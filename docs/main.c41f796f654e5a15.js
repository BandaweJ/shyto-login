(self.webpackChunklogin=self.webpackChunklogin||[]).push([[179],{2011:(at,Ae,O)=>{"use strict";O.d(Ae,{hO:()=>Ve,xv:()=>ge,Dh:()=>oe,GT:()=>pe,cc:()=>Se,on:()=>j,pX:()=>re});var m=O(5e3),L=O(127),M=O(5813);at=O.hmd(at);const se=["ngOnDestroy"],re=(ae,xe,Me,le={})=>new Proxy(ae,{get:(De,ye)=>Me.runOutsideAngular(()=>{var ze;if(ae[ye])return(null===(ze=null==le?void 0:le.spy)||void 0===ze?void 0:ze.get)&&le.spy.get(ye,ae[ye]),ae[ye];if(se.indexOf(ye)>-1)return()=>{};const te=xe.toPromise().then(Ze=>{const Y=Ze&&Ze[ye];return"function"==typeof Y?Y.bind(Ze):Y&&Y.then?Y.then(he=>Me.run(()=>he)):Me.run(()=>Y)});return new Proxy(()=>{},{get:(Ze,Y)=>te[Y],apply:(Ze,Y,he)=>te.then(de=>{var me;const ke=de&&de(...he);return(null===(me=null==le?void 0:le.spy)||void 0===me?void 0:me.apply)&&le.spy.apply(ye,he,ke),ke})})})}),pe=(ae,xe)=>{xe.forEach(Me=>{Object.getOwnPropertyNames(Me.prototype||Me).forEach(le=>{Object.defineProperty(ae.prototype,le,Object.getOwnPropertyDescriptor(Me.prototype||Me,le))})})};class ce{constructor(xe){return xe}}const oe=new m.OlP("angularfire2.app.options"),ge=new m.OlP("angularfire2.app.name");function j(ae,xe,Me){const De="object"==typeof Me&&Me||{};De.name=De.name||"string"==typeof Me&&Me||"[DEFAULT]";const ze=L.Z.apps.filter(te=>te&&te.name===De.name)[0]||xe.runOutsideAngular(()=>L.Z.initializeApp(ae,De));try{JSON.stringify(ae)!==JSON.stringify(ze.options)&&V("error",`${ze.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(te){}return new ce(ze)}const V=(ae,...xe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[ae](...xe)},X={provide:ce,useFactory:j,deps:[oe,m.R0b,[new m.FiY,ge]]};let Ve=(()=>{class ae{constructor(Me){L.Z.registerVersion("angularfire",M.q4.full,"core"),L.Z.registerVersion("angularfire",M.q4.full,"app-compat"),L.Z.registerVersion("angular",m.q4F.full,Me.toString())}static initializeApp(Me,le){return{ngModule:ae,providers:[{provide:oe,useValue:Me},{provide:ge,useValue:le}]}}}return ae.\u0275fac=function(Me){return new(Me||ae)(m.LFG(m.Lbi))},ae.\u0275mod=m.oAB({type:ae}),ae.\u0275inj=m.cJS({providers:[X]}),ae})();function Se(ae,xe,Me,le,De){const[,ye,ze]=globalThis.\u0275AngularfireInstanceCache.find(te=>te[0]===ae)||[];if(ye)return function Pe(ae,xe){try{return ae.toString()===xe.toString()}catch(Me){return ae===xe}}(De,ze)||(K("error",`${xe} was already initialized on the ${Me} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),K("warn",{is:De,was:ze})),ye;{const te=le();return globalThis.\u0275AngularfireInstanceCache.push([ae,te,De]),te}}const Ue=!!at.hot,K=(ae,...xe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[ae](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,Ae,O)=>{"use strict";O.d(Ae,{q4:()=>uu,iC:()=>ds,HU:()=>Fl,vb:()=>hu,JM:()=>np});var m=O(5e3),L=O(5867),M=O(5861),se=O(9681),re=O(2090),pe=O(4859),ce=O(1877),oe=O(2940);const ge="@firebase/installations",j="0.5.5",X=`w:${j}`,Ve="FIS_v2",xe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Me(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function le({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:de(D.expiresIn),creationTime:Date.now()}}function ye(D,b){return ze.apply(this,arguments)}function ze(){return(ze=(0,M.Z)(function*(D,b){const F=(yield b.json()).error;return xe.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function te({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Ze(D,{refreshToken:b}){const x=te(D);return x.append("Authorization",function me(D){return`${Ve} ${D}`}(b)),x}function Y(D){return he.apply(this,arguments)}function he(){return(he=(0,M.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function de(D){return Number(D.replace("s","000"))}function ke(D,b){return ue.apply(this,arguments)}function ue(){return(ue=(0,M.Z)(function*(D,{fid:b}){const x=le(D),Z={method:"POST",headers:te(D),body:JSON.stringify({fid:b,authVersion:Ve,appId:D.appId,sdkVersion:X})},Ne=yield Y(()=>fetch(x,Z));if(Ne.ok){const Be=yield Ne.json();return{fid:Be.fid||b,registrationStatus:2,refreshToken:Be.refreshToken,authToken:De(Be.authToken)}}throw yield ye("Create Installation",Ne)})).apply(this,arguments)}function yt(D){return new Promise(b=>{setTimeout(b,D)})}const Tn=/^[cdef][\w-]{21}$/;function rt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function Zn(D){return function qt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Tn.test(x)?x:""}catch(D){return""}}function Xt(D){return`${D.appName}!${D.appId}`}const hr=new Map;function Yt(D,b){const x=Xt(D);fn(x,b),function Ni(D,b){const x=function fr(){return!Ln&&"BroadcastChannel"in self&&(Ln=new BroadcastChannel("[Firebase] FID Change"),Ln.onmessage=D=>{fn(D.data.key,D.data.fid)}),Ln}();x&&x.postMessage({key:D,fid:b}),function Oi(){0===hr.size&&Ln&&(Ln.close(),Ln=null)}()}(x,b)}function fn(D,b){const x=hr.get(D);if(x)for(const F of x)F(b)}let Ln=null;const Un="firebase-installations-store";let Pi=null;function dt(){return Pi||(Pi=(0,oe.openDb)("firebase-installations-database",1,D=>{0===D.oldVersion&&D.createObjectStore(Un)})),Pi}function vr(D,b){return yn.apply(this,arguments)}function yn(){return(yn=(0,M.Z)(function*(D,b){const x=Xt(D),W=(yield dt()).transaction(Un,"readwrite"),Z=W.objectStore(Un),Ne=yield Z.get(x);return yield Z.put(b,x),yield W.complete,(!Ne||Ne.fid!==b.fid)&&Yt(D,b.fid),b})).apply(this,arguments)}function jt(D){return _r.apply(this,arguments)}function _r(){return(_r=(0,M.Z)(function*(D){const b=Xt(D),F=(yield dt()).transaction(Un,"readwrite");yield F.objectStore(Un).delete(b),yield F.complete})).apply(this,arguments)}function ht(D,b){return ot.apply(this,arguments)}function ot(){return(ot=(0,M.Z)(function*(D,b){const x=Xt(D),W=(yield dt()).transaction(Un,"readwrite"),Z=W.objectStore(Un),Ne=yield Z.get(x),Be=b(Ne);return void 0===Be?yield Z.delete(x):yield Z.put(Be,x),yield W.complete,Be&&(!Ne||Ne.fid!==Be.fid)&&Yt(D,Be.fid),Be})).apply(this,arguments)}function wt(D){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,M.Z)(function*(D){let b;const x=yield ht(D,F=>{const W=sr(F),Z=Ct(D,W);return b=Z.registrationPromise,Z.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function sr(D){return xs(D||{fid:rt(),registrationStatus:0})}function Ct(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(xe.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(D,b){return Ye.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Ss(D)}:{installationEntry:b}}function Ye(){return(Ye=(0,M.Z)(function*(D,b){try{return vr(D,yield ke(D,b))}catch(x){throw Me(x)&&409===x.customData.serverCode?yield jt(D):yield vr(D,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Ss(D){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,M.Z)(function*(D){let b=yield Ft(D);for(;1===b.registrationStatus;)yield yt(100),b=yield Ft(D);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield wt(D);return F||x}return b})).apply(this,arguments)}function Ft(D){return ht(D,b=>{if(!b)throw xe.create("installation-not-found");return xs(b)})}function xs(D){return function Vn(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ln(D,b){return U.apply(this,arguments)}function U(){return(U=(0,M.Z)(function*({appConfig:D,platformLoggerProvider:b},x){const F=$(D,x),W=Ze(D,x),Z=b.getImmediate({optional:!0});Z&&W.append("x-firebase-client",Z.getPlatformInfoString());const Be={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:X}})},qe=yield Y(()=>fetch(F,Be));if(qe.ok)return De(yield qe.json());throw yield ye("Generate Auth Token",qe)})).apply(this,arguments)}function $(D,{fid:b}){return`${le(D)}/${b}/authTokens:generate`}function G(D){return _e.apply(this,arguments)}function _e(){return(_e=(0,M.Z)(function*(D,b=!1){let x;const F=yield ht(D.appConfig,Z=>{if(!Bn(Z))throw xe.create("not-registered");const Ne=Z.authToken;if(!b&&Yn(Ne))return Z;if(1===Ne.requestStatus)return x=ne(D,b),Z;{if(!navigator.onLine)throw xe.create("app-offline");const Be=jn(Z);return x=$t(D,Be),Be}});return x?yield x:F.authToken})).apply(this,arguments)}function ne(D,b){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,M.Z)(function*(D,b){let x=yield ct(D.appConfig);for(;1===x.authToken.requestStatus;)yield yt(100),x=yield ct(D.appConfig);const F=x.authToken;return 0===F.requestStatus?G(D,b):F})).apply(this,arguments)}function ct(D){return ht(D,b=>{if(!Bn(b))throw xe.create("not-registered");return function ie(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function $t(D,b){return en.apply(this,arguments)}function en(){return(en=(0,M.Z)(function*(D,b){try{const x=yield ln(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield vr(D.appConfig,F),x}catch(x){if(!Me(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield vr(D.appConfig,F)}else yield jt(D.appConfig);throw x}})).apply(this,arguments)}function Bn(D){return void 0!==D&&2===D.registrationStatus}function Yn(D){return 2===D.requestStatus&&!function St(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function jn(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function H(){return(H=(0,M.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield wt(b.appConfig);return F?F.catch(console.error):G(b).catch(console.error),x.fid})).apply(this,arguments)}function $e(){return($e=(0,M.Z)(function*(D,b=!1){const x=D;return yield st(x.appConfig),(yield G(x,b)).token})).apply(this,arguments)}function st(D){return Et.apply(this,arguments)}function Et(){return(Et=(0,M.Z)(function*(D){const{registrationPromise:b}=yield wt(D);b&&(yield b)})).apply(this,arguments)}function Bo(D){return xe.create("missing-app-config-values",{valueName:D})}const tn="installations",Nt=D=>{const b=D.getProvider("app").getImmediate(),x=function or(D){if(!D||!D.options)throw Bo("App Configuration");if(!D.name)throw Bo("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw Bo(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,platformLoggerProvider:(0,se._getProvider)(b,"platform-logger"),_delete:()=>Promise.resolve()}},nn=D=>{const b=D.getProvider("app").getImmediate(),x=(0,se._getProvider)(b,tn).getImmediate();return{getId:()=>function q(D){return H.apply(this,arguments)}(x),getToken:W=>function Te(D){return $e.apply(this,arguments)}(x,W)}};(function zr(){(0,se._registerComponent)(new pe.wA(tn,Nt,"PUBLIC")),(0,se._registerComponent)(new pe.wA("installations-internal",nn,"PRIVATE"))})(),(0,se.registerVersion)(ge,j),(0,se.registerVersion)(ge,j,"esm2017");const Fi="@firebase/remote-config",An=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ha{constructor(b,x,F,W){this.client=b,this.storage=x,this.storageCache=F,this.logger=W}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,W=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${W}.`),W}fetch(b){var x=this;return(0,M.Z)(function*(){const[F,W]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(W&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return W;b.eTag=W&&W.eTag;const Z=yield x.client.fetch(b),Ne=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&Ne.push(x.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(Ne),Z})()}}function Os(D=navigator){return D.languages&&D.languages[0]||D.language}class Kr{constructor(b,x,F,W,Z,Ne){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=W,this.apiKey=Z,this.appId=Ne}fetch(b){var x=this;return(0,M.Z)(function*(){const[F,W]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Be={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},qe={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:x.appId,language_code:Os()},zt={method:"POST",headers:Be,body:JSON.stringify(qe)},Wt=fetch(Ne,zt),Nn=new Promise((hs,Pr)=>{b.signal.addEventListener(()=>{const va=new Error("The operation was aborted.");va.name="AbortError",Pr(va)})});let Or;try{yield Promise.race([Wt,Nn]),Or=yield Wt}catch(hs){let Pr="fetch-client-network";throw"AbortError"===hs.name&&(Pr="fetch-timeout"),An.create(Pr,{originalErrorMessage:hs.message})}let In=Or.status;const zi=Or.headers.get("ETag")||void 0;let Vs,Ir;if(200===Or.status){let hs;try{hs=yield Or.json()}catch(Pr){throw An.create("fetch-client-parse",{originalErrorMessage:Pr.message})}Vs=hs.entries,Ir=hs.state}if("INSTANCE_STATE_UNSPECIFIED"===Ir?In=500:"NO_CHANGE"===Ir?In=304:("NO_TEMPLATE"===Ir||"EMPTY_CONFIG"===Ir)&&(Vs={}),304!==In&&200!==In)throw An.create("fetch-status",{httpStatus:In});return{status:In,eTag:zi,config:Vs}})()}}class Zf{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,M.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var W=this;return(0,M.Z)(function*(){yield function Kf(D,b){return new Promise((x,F)=>{const W=Math.max(b-Date.now(),0),Z=setTimeout(x,W);D.addEventListener(()=>{clearTimeout(Z),F(An.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const Z=yield W.client.fetch(b);return yield W.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function es(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Z))throw Z;const Ne={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(Ne),W.attemptFetch(b,Ne)}})()}}class bl{constructor(b,x,F,W,Z){this.app=b,this._client=x,this._storageCache=F,this._storage=W,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ju(D,b){const x=D.target.error||void 0;return An.create(b,{originalErrorMessage:x&&x.message})}const Ps="app_namespace_store";class mo{constructor(b,x,F,W=function Tl(){return new Promise((D,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{b(Ju(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ps,{keyPath:"compositeKey"})}}catch(x){b(An.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,M.Z)(function*(){const F=yield x.openDbPromise;return new Promise((W,Z)=>{const Be=F.transaction([Ps],"readonly").objectStore(Ps),qe=x.createCompositeKey(b);try{const zt=Be.get(qe);zt.onerror=Wt=>{Z(Ju(Wt,"storage-get"))},zt.onsuccess=Wt=>{const Nn=Wt.target.result;W(Nn?Nn.value:void 0)}}catch(zt){Z(An.create("storage-get",{originalErrorMessage:zt&&zt.message}))}})})()}set(b,x){var F=this;return(0,M.Z)(function*(){const W=yield F.openDbPromise;return new Promise((Z,Ne)=>{const qe=W.transaction([Ps],"readwrite").objectStore(Ps),zt=F.createCompositeKey(b);try{const Wt=qe.put({compositeKey:zt,value:x});Wt.onerror=Nn=>{Ne(Ju(Nn,"storage-set"))},Wt.onsuccess=()=>{Z()}}catch(Wt){Ne(An.create("storage-set",{originalErrorMessage:Wt&&Wt.message}))}})})()}delete(b){var x=this;return(0,M.Z)(function*(){const F=yield x.openDbPromise;return new Promise((W,Z)=>{const Be=F.transaction([Ps],"readwrite").objectStore(Ps),qe=x.createCompositeKey(b);try{const zt=Be.delete(qe);zt.onerror=Wt=>{Z(Ju(Wt,"storage-delete"))},zt.onsuccess=()=>{W()}}catch(zt){Z(An.create("storage-delete",{originalErrorMessage:zt&&zt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Xf{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,M.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),W=b.storage.getActiveConfig(),Z=yield x;Z&&(b.lastFetchStatus=Z);const Ne=yield F;Ne&&(b.lastSuccessfulFetchTimestampMillis=Ne);const Be=yield W;Be&&(b.activeConfig=Be)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Cl(){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,M.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}!function ep(){(0,se._registerComponent)(new pe.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),W=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw An.create("registration-window");if(!(0,re.hl)())throw An.create("indexed-db-unavailable");const{projectId:Z,apiKey:Ne,appId:Be}=F.options;if(!Z)throw An.create("registration-project-id");if(!Ne)throw An.create("registration-api-key");if(!Be)throw An.create("registration-app-id");const qe=new mo(Be,F.name,x=x||"firebase"),zt=new Xf(qe),Wt=new ce.Yd(Fi);Wt.logLevel=ce.in.ERROR;const Nn=new Kr(W,se.SDK_VERSION,x,Z,Ne,Be),Or=new Zf(Nn,qe),In=new Ha(Or,qe,zt,Wt),zi=new bl(F,In,zt,qe,Wt);return function an(D){const b=(0,re.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(zi),zi},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Fi,"0.3.4"),(0,se.registerVersion)(Fi,"0.3.4","esm2017")}();const Go="/firebase-messaging-sw.js",Ii="/firebase-cloud-messaging-push-scope",Al="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zo="google.c.a.c_id",Qd="google.c.a.c_l",Wo="google.c.a.ts",Sl="google.c.a.e";var yo=(()=>{return(D=yo||(yo={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",yo;var D})();function li(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xu(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),W=new Uint8Array(F.length);for(let Z=0;Z<F.length;++Z)W[Z]=F.charCodeAt(Z);return W}const pn="fcm_token_details_db",Jd="fcm_token_object_Store";function qa(D){return Yo.apply(this,arguments)}function Yo(){return Yo=(0,M.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(pn))return null;let b=null;return(yield(0,oe.openDb)(pn,5,function(){var F=(0,M.Z)(function*(W){var Z;if(W.oldVersion<2||!W.objectStoreNames.contains(Jd))return;const Ne=W.transaction.objectStore(Jd),Be=yield Ne.index("fcmSenderId").get(D);if(yield Ne.clear(),Be)if(2===W.oldVersion){const qe=Be;if(!qe.auth||!qe.p256dh||!qe.endpoint)return;b={token:qe.fcmToken,createTime:null!==(Z=qe.createTime)&&void 0!==Z?Z:Date.now(),subscriptionOptions:{auth:qe.auth,p256dh:qe.p256dh,endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:"string"==typeof qe.vapidKey?qe.vapidKey:li(qe.vapidKey)}}}else if(3===W.oldVersion){const qe=Be;b={token:qe.fcmToken,createTime:qe.createTime,subscriptionOptions:{auth:li(qe.auth),p256dh:li(qe.p256dh),endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:li(qe.vapidKey)}}}else if(4===W.oldVersion){const qe=Be;b={token:qe.fcmToken,createTime:qe.createTime,subscriptionOptions:{auth:li(qe.auth),p256dh:li(qe.p256dh),endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:li(qe.vapidKey)}}}});return function(W){return F.apply(this,arguments)}}())).close(),yield(0,oe.deleteDb)(pn),yield(0,oe.deleteDb)("fcm_vapid_details_db"),yield(0,oe.deleteDb)("undefined"),xl(b)?b:null}),Yo.apply(this,arguments)}function xl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Di="firebase-messaging-store";let ec=null;function un(){return ec||(ec=(0,oe.openDb)("firebase-messaging-database",1,D=>{0===D.oldVersion&&D.createObjectStore(Di)})),ec}function vo(D){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,M.Z)(function*(D){const b=Qn(D),F=yield(yield un()).transaction(Di).objectStore(Di).get(b);if(F)return F;{const W=yield qa(D.appConfig.senderId);if(W)return yield rn(D,W),W}})).apply(this,arguments)}function rn(D,b){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,M.Z)(function*(D,b){const x=Qn(D),W=(yield un()).transaction(Di,"readwrite");return yield W.objectStore(Di).put(b,x),yield W.complete,b})).apply(this,arguments)}function Wa(D){return ks.apply(this,arguments)}function ks(){return(ks=(0,M.Z)(function*(D){const b=Qn(D),F=(yield un()).transaction(Di,"readwrite");yield F.objectStore(Di).delete(b),yield F.complete})).apply(this,arguments)}function Qn({appConfig:D}){return D.appId}const Sn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Bi(D,b){return pr.apply(this,arguments)}function pr(){return(pr=(0,M.Z)(function*(D,b){const x=yield ts(D),F=_o(b),W={method:"POST",headers:x,body:JSON.stringify(F)};let Z;try{Z=yield(yield fetch(ji(D.appConfig),W)).json()}catch(Ne){throw Sn.create("token-subscribe-failed",{errorInfo:Ne})}if(Z.error)throw Sn.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw Sn.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function Js(D,b){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,M.Z)(function*(D,b){const x=yield ts(D),F=_o(b.subscriptionOptions),W={method:"PATCH",headers:x,body:JSON.stringify(F)};let Z;try{Z=yield(yield fetch(`${ji(D.appConfig)}/${b.token}`,W)).json()}catch(Ne){throw Sn.create("token-update-failed",{errorInfo:Ne})}if(Z.error)throw Sn.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw Sn.create("token-update-no-token");return Z.token})).apply(this,arguments)}function Jo(D,b){return bi.apply(this,arguments)}function bi(){return(bi=(0,M.Z)(function*(D,b){const F={method:"DELETE",headers:yield ts(D)};try{const Z=yield(yield fetch(`${ji(D.appConfig)}/${b}`,F)).json();if(Z.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(W){throw Sn.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function ji({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function ts(D){return ft.apply(this,arguments)}function ft(){return(ft=(0,M.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function _o({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const W={web:{endpoint:x,auth:b,p256dh:D}};return F!==Al&&(W.web.applicationPubKey=F),W}const Rl=6048e5;function Ka(D){return nc.apply(this,arguments)}function nc(){return(nc=(0,M.Z)(function*(D){const b=yield gn(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:li(b.getKey("auth")),p256dh:li(b.getKey("p256dh"))},F=yield vo(D.firebaseDependencies);if(F){if(Xs(F.subscriptionOptions,x))return Date.now()>=F.createTime+Rl?ic(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Jo(D.firebaseDependencies,F.token)}catch(W){console.warn(W)}return Ot(D.firebaseDependencies,x)}return Ot(D.firebaseDependencies,x)})).apply(this,arguments)}function Xo(D){return rc.apply(this,arguments)}function rc(){return(rc=(0,M.Z)(function*(D){const b=yield vo(D.firebaseDependencies);b&&(yield Jo(D.firebaseDependencies,b.token),yield Wa(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function ic(D,b){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,M.Z)(function*(D,b){try{const x=yield Js(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield rn(D.firebaseDependencies,F),x}catch(x){throw yield Xo(D),x}})).apply(this,arguments)}function Ot(D,b){return sc.apply(this,arguments)}function sc(){return(sc=(0,M.Z)(function*(D,b){const F={token:yield Bi(D,b),createTime:Date.now(),subscriptionOptions:b};return yield rn(D,F),F.token})).apply(this,arguments)}function gn(D,b){return wo.apply(this,arguments)}function wo(){return(wo=(0,M.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xu(b)})})).apply(this,arguments)}function Xs(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function di(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function oc(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const W=b.notification.image;W&&(D.notification.image=W)}(b,D),function ea(D,b){!b.data||(D.data=b.data)}(b,D),function tp(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const x=b.fcmOptions.link;x&&(D.fcmOptions.link=x);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function Nl(D){return"object"==typeof D&&!!D&&zo in D}function eo(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function xn(D){return Sn.create("missing-app-config-values",{valueName:D})}eo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),eo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ns{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Za(D){if(!D||!D.options)throw xn("App Configuration Object");if(!D.name)throw xn("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw xn(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:W,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ta(D){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,M.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Go,{scope:Ii}),D.swRegistration.update().catch(()=>{})}catch(b){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function Ti(D,b){return ac.apply(this,arguments)}function ac(){return(ac=(0,M.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield ta(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function Ya(D,b){return uc.apply(this,arguments)}function uc(){return(uc=(0,M.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Al)})).apply(this,arguments)}function na(){return(na=(0,M.Z)(function*(D,b){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield Ya(D,null==b?void 0:b.vapidKey),yield Ti(D,null==b?void 0:b.serviceWorkerRegistration),Ka(D)})).apply(this,arguments)}function ra(D,b,x){return cc.apply(this,arguments)}function cc(){return(cc=(0,M.Z)(function*(D,b,x){const F=lc(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[zo],message_name:x[Qd],message_time:x[Wo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function lc(D){switch(D){case yo.NOTIFICATION_CLICKED:return"notification_open";case yo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ia(){return(ia=(0,M.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===yo.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(di(x)):D.onMessageHandler.next(di(x)));const F=x.data;Nl(F)&&"1"===F[Sl]&&(yield ra(D,x.messageType,F))})).apply(this,arguments)}const sa="@firebase/messaging",dc=D=>{const b=new ns(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Xd(D,b){return ia.apply(this,arguments)}(b,x)),b},eh=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function Qa(D,b){return na.apply(this,arguments)}(b,F)}};function Eo(){return $i.apply(this,arguments)}function $i(){return($i=(0,M.Z)(function*(){try{yield(0,re.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function th(){(0,se._registerComponent)(new pe.wA("messaging",dc,"PUBLIC")),(0,se._registerComponent)(new pe.wA("messaging-internal",eh,"PRIVATE")),(0,se.registerVersion)(sa,"0.9.8"),(0,se.registerVersion)(sa,"0.9.8","esm2017")}();const oa="analytics",to="firebase_id",fc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ja="https://www.googletagmanager.com/gtag/js",ur=new ce.Yd("@firebase/analytics");function pc(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function is(D,b){const x=document.createElement("script");x.src=`${Ja}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function gc(D,b,x,F,W,Z){return mc.apply(this,arguments)}function mc(){return(mc=(0,M.Z)(function*(D,b,x,F,W,Z){const Ne=F[W];try{if(Ne)yield b[Ne];else{const qe=(yield pc(x)).find(zt=>zt.measurementId===W);qe&&(yield b[qe.appId])}}catch(Be){ur.error(Be)}D("config",W,Z)})).apply(this,arguments)}function eu(D,b,x,F,W){return tu.apply(this,arguments)}function tu(){return(tu=(0,M.Z)(function*(D,b,x,F,W){try{let Z=[];if(W&&W.send_to){let Ne=W.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Be=yield pc(x);for(const qe of Ne){const zt=Be.find(Nn=>Nn.measurementId===qe),Wt=zt&&b[zt.appId];if(!Wt){Z=[];break}Z.push(Wt)}}0===Z.length&&(Z=Object.values(b)),yield Promise.all(Z),D("event",F,W||{})}catch(Z){ur.error(Z)}})).apply(this,arguments)}function wn(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(Ja))return b;return null}const Je=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),vc=new class Jn{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Mn(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Io(D){return ua.apply(this,arguments)}function ua(){return(ua=(0,M.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,W={method:"GET",headers:Mn(F)},Z=fc.replace("{app-id}",x),Ne=yield fetch(Z,W);if(200!==Ne.status&&304!==Ne.status){let Be="";try{const qe=yield Ne.json();(null===(b=qe.error)||void 0===b?void 0:b.message)&&(Be=qe.error.message)}catch(qe){}throw Je.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Be})}return Ne.json()})).apply(this,arguments)}function Do(D){return no.apply(this,arguments)}function no(){return(no=(0,M.Z)(function*(D,b=vc,x){const{appId:F,apiKey:W,measurementId:Z}=D.options;if(!F)throw Je.create("no-app-id");if(!W){if(Z)return{measurementId:Z,appId:F};throw Je.create("no-api-key")}const Ne=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new nu;return setTimeout((0,M.Z)(function*(){Be.abort()}),void 0!==x?x:6e4),os({appId:F,apiKey:W,measurementId:Z},Ne,Be,b)})).apply(this,arguments)}function os(D,b,x){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,M.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,W=vc){const{appId:Z,measurementId:Ne}=D;try{yield _c(F,b)}catch(Be){if(Ne)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Be.message}]`),{appId:Z,measurementId:Ne};throw Be}try{const Be=yield Io(D);return W.deleteThrottleMetadata(Z),Be}catch(Be){if(!Ol(Be)){if(W.deleteThrottleMetadata(Z),Ne)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Be.message}]`),{appId:Z,measurementId:Ne};throw Be}const qe=503===Number(Be.customData.httpStatus)?(0,re.$s)(x,W.intervalMillis,30):(0,re.$s)(x,W.intervalMillis),zt={throttleEndTimeMillis:Date.now()+qe,backoffCount:x+1};return W.setThrottleMetadata(Z,zt),ur.debug(`Calling attemptFetch again in ${qe} millis`),os(D,zt,F,W)}})).apply(this,arguments)}function _c(D,b){return new Promise((x,F)=>{const W=Math.max(b-Date.now(),0),Z=setTimeout(x,W);D.addEventListener(()=>{clearTimeout(Z),F(Je.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Ol(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class nu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function Pl(){return mn.apply(this,arguments)}function mn(){return(mn=(0,M.Z)(function*(){if(!(0,re.hl)())return ur.warn(Je.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return ur.warn(Je.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function ca(){return(ca=(0,M.Z)(function*(D,b,x,F,W,Z,Ne){var Be;const qe=Do(D);qe.then(In=>{x[In.measurementId]=In.appId,D.options.measurementId&&In.measurementId!==D.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${In.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(In=>ur.error(In)),b.push(qe);const zt=Pl().then(In=>{if(In)return F.getId()}),[Wt,Nn]=yield Promise.all([qe,zt]);wn()||is(Z,Wt.measurementId),W("js",new Date);const Or=null!==(Be=null==Ne?void 0:Ne.config)&&void 0!==Be?Be:{};return Or.origin="firebase",Or.update=!0,null!=Nn&&(Or[to]=Nn),W("config",Wt.measurementId,Or),Wt.measurementId})).apply(this,arguments)}class To{constructor(b){this.app=b}_delete(){return delete Rr[this.app.options.appId],Promise.resolve()}}let Rr={},ru=[];const Co={};let la,ro,Hi="dataLayer",wc=!1;function Yr(D,b,x){!function Ao(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,W)=>`(${W+1}) ${F}`).join(" "),x=Je.create("invalid-analytics-context",{errorInfo:b});ur.warn(x.message)}}();const F=D.options.appId;if(!F)throw Je.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Je.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Rr[F])throw Je.create("already-exists",{id:F});if(!wc){!function Xa(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Hi);const{wrappedGtag:Z,gtagCore:Ne}=function cm(D,b,x,F,W){let Z=function(...Ne){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(Z=window[W]),window[W]=function ih(D,b,x,F){function Z(){return(Z=(0,M.Z)(function*(Ne,Be,qe){try{"event"===Ne?yield eu(D,b,x,Be,qe):"config"===Ne?yield gc(D,b,x,F,Be,qe):D("set",Be)}catch(zt){ur.error(zt)}})).apply(this,arguments)}return function W(Ne,Be,qe){return Z.apply(this,arguments)}}(Z,D,b,x),{gtagCore:Z,wrappedGtag:window[W]}}(Rr,ru,Co,Hi,"gtag");ro=Z,la=Ne,wc=!0}return Rr[F]=function bo(D,b,x,F,W,Z,Ne){return ca.apply(this,arguments)}(D,ru,Co,b,la,Hi,x),new To(D)}function So(){return(So=(0,M.Z)(function*(D,b,x,F,W){if(W&&W.global)D("event",x,F);else{const Z=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:Z}))}})).apply(this,arguments)}function kl(){return su.apply(this,arguments)}function su(){return(su=(0,M.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}const oh="@firebase/analytics";!function ou(){(0,se._registerComponent)(new pe.wA(oa,(b,{options:x})=>Yr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new pe.wA("analytics-internal",function D(b){try{const x=b.getProvider(oa).getImmediate();return{logEvent:(F,W,Z)=>function fi(D,b,x,F){D=(0,re.m9)(D),function Ec(D,b,x,F,W){return So.apply(this,arguments)}(ro,Rr[D.app.options.appId],b,x,F).catch(W=>ur.error(W))}(x,F,W,Z)}}catch(x){throw Je.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(oh,"0.7.5"),(0,se.registerVersion)(oh,"0.7.5","esm2017")}();var cs=O(4408),zn=O(7565);const fa=new class ha extends zn.v{}(class Dc extends cs.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):b.flush(this)}});var au=O(4986),Nr=O(8505),Ci=O(9468),pa=O(5363);const uu=new m.GfV("7.2.1"),Jr="__angularfire_symbol__analyticsIsSupportedValue",Ro="__angularfire_symbol__analyticsIsSupported",bc="__angularfire_symbol__remoteConfigIsSupportedValue",cu="__angularfire_symbol__remoteConfigIsSupported",xt="__angularfire_symbol__messagingIsSupportedValue",lu="__angularfire_symbol__messagingIsSupported";function np(D,b,x){if(b){if(1===b.length)return b[0];const Z=b.filter(Ne=>Ne.app===x);if(1===Z.length)return Z[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Ro]||(globalThis[Ro]=kl().then(D=>globalThis[Jr]=D).catch(()=>globalThis[Jr]=!1)),globalThis[lu]||(globalThis[lu]=Eo().then(D=>globalThis[xt]=D).catch(()=>globalThis[xt]=!1)),globalThis[cu]||(globalThis[cu]=Cl().then(D=>globalThis[bc]=D).catch(()=>globalThis[bc]=!1));const hu=(D,b)=>{const x=b?[b]:(0,L.C6)(),F=[];return x.forEach(W=>{W.container.getProvider(D).instances.forEach(Ne=>{F.includes(Ne)||F.push(Ne)})}),F};function Er(){}class ga{constructor(b,x=fa){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const W=this.zone;return this.delegate.schedule(function(Ne){W.runGuarded(()=>{b.apply(this,[Ne])})},x,F)}}class fu{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Er,{},Er,Er)),x.pipe((0,Nr.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fl=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ga(Zone.current)),this.insideAngular=x.run(()=>new ga(Zone.current,au.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(m.LFG(m.R0b))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ls(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ds(D){return ls(),function pu(D){return function(x){return(x=x.lift(new fu(D.ngZone))).pipe((0,Ci.R)(D.outsideAngular),(0,pa.Q)(D.insideAngular))}}(ls())(D)}},4929:(at,Ae,O)=>{"use strict";O.d(Ae,{$:()=>Rl,A:()=>V,E:()=>Nt,G:()=>Mr,I:()=>es,K:()=>Yn,L:()=>Cl,M:()=>Al,N:()=>qo,P:()=>uu,Q:()=>zo,R:()=>oh,T:()=>Ii,U:()=>Ko,V:()=>yo,W:()=>Jd,X:()=>Qn,Y:()=>Sn,Z:()=>pr,_:()=>bi,a:()=>Je,a0:()=>nc,a1:()=>rc,a2:()=>Ce,a3:()=>sc,a4:()=>wo,a5:()=>di,a6:()=>oc,a7:()=>tp,a8:()=>Nl,a9:()=>ns,aA:()=>Nn,aB:()=>pu,aC:()=>tn,aG:()=>Jn,aJ:()=>Wo,aa:()=>Ls,ab:()=>ac,ae:()=>na,af:()=>cc,ag:()=>lc,aj:()=>Ml,ak:()=>nh,am:()=>hc,an:()=>Xa,ao:()=>Cn,ap:()=>Y,aq:()=>Mt,ar:()=>st,as:()=>Me,at:()=>lh,au:()=>Ul,av:()=>le,aw:()=>te,ax:()=>de,ay:()=>St,az:()=>Ir,b:()=>wn,c:()=>du,d:()=>Er,e:()=>np,f:()=>D,g:()=>Ne,h:()=>F,i:()=>as,j:()=>zt,k:()=>Bs,l:()=>zn,m:()=>pm,o:()=>oe,r:()=>fa,s:()=>cs,u:()=>Ci,z:()=>Se});var m=O(5861),L=O(2090),M=O(9681),se=O(655),re=O(1877),pe=O(4859);const oe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},V={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Se=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function Ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ae=new re.Yd("@firebase/auth");function xe(v,...f){ae.logLevel<=re.in.ERROR&&ae.error(`Auth (${M.SDK_VERSION}): ${v}`,...f)}function Me(v,...f){throw ze(v,...f)}function le(v,...f){return ze(v,...f)}function De(v,f,p){const w=Object.assign(Object.assign({},Pe()),{[f]:p});return new L.LL("auth","Firebase",w).create(f,{appName:v.name})}function ye(v,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Me(v,"argument-error"),De(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(v,...f){if("string"!=typeof v){const p=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(p,...w)}return Ue.create(v,...f)}function te(v,f,...p){if(!v)throw ze(f,...p)}function Ze(v){const f="INTERNAL ASSERTION FAILED: "+v;throw xe(f),new Error(f)}function Y(v,f){v||Ze(f)}const he=new Map;function de(v){Y(v instanceof Function,"Expected a class definition");let f=he.get(v);return f?(Y(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,he.set(v,f),f)}function ue(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function yt(){return"http:"===qt()||"https:"===qt()}function qt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class rt{constructor(f,p){this.shortDelay=f,this.longDelay=p,Y(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Tn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zn(v,f){Y(v.emulator,"Emulator should always be set here");const{url:p}=v.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class Xt{static initialize(f,p,w){this.fetchImpl=f,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Yt=new rt(3e4,6e4);function Bt(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Jt(v,f,p,w){return fn.apply(this,arguments)}function fn(){return(fn=(0,m.Z)(function*(v,f,p,w,A={}){return Ni(v,A,(0,m.Z)(function*(){let P={},J={};w&&("GET"===f?J=w:P={body:JSON.stringify(w)});const Re=(0,L.xO)(Object.assign({key:v.config.apiKey},J)).slice(1),et=yield v._getAdditionalHeaders();return et["Content-Type"]="application/json",v.languageCode&&(et["X-Firebase-Locale"]=v.languageCode),Xt.fetch()(ci(v,v.config.apiHost,p,Re),Object.assign({method:f,headers:et,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Ni(v,f,p){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,m.Z)(function*(v,f,p){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},hr),f);try{const A=new wi(v),P=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const J=yield P.json();if("needConfirmation"in J)throw Un(v,"account-exists-with-different-credential",J);if(P.ok&&!("errorMessage"in J))return J;{const Re=P.ok?J.errorMessage:J.error.message,[et,gt]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw Un(v,"credential-already-in-use",J);if("EMAIL_EXISTS"===et)throw Un(v,"email-already-in-use",J);const _t=w[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(gt)throw De(v,_t,gt);Me(v,_t)}}catch(A){if(A instanceof L.ZR)throw A;Me(v,"network-request-failed")}})).apply(this,arguments)}function fr(v,f,p,w){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,m.Z)(function*(v,f,p,w,A={}){const P=yield Jt(v,f,p,w,A);return"mfaPendingCredential"in P&&Me(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function ci(v,f,p,w){const A=`${f}${p}?${w}`;return v.config.emulator?Zn(v.config,A):`${v.config.apiScheme}://${A}`}class wi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(le(this.auth,"network-request-failed")),Yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(v,f,p){const w={appName:v.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const A=le(v,f,w);return A.customData._tokenResponse=p,A}function dt(){return(dt=(0,m.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function vr(v,f){return yn.apply(this,arguments)}function yn(){return(yn=(0,m.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function jt(v,f){return _r.apply(this,arguments)}function _r(){return(_r=(0,m.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ht(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Qt(){return(Qt=(0,m.Z)(function*(v,f=!1){const p=(0,L.m9)(v),w=yield p.getIdToken(f),A=Ct(w);te(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,J=null==P?void 0:P.sign_in_provider;return{claims:A,token:w,authTime:ht(sr(A.auth_time)),issuedAtTime:ht(sr(A.iat)),expirationTime:ht(sr(A.exp)),signInProvider:J||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function sr(v){return 1e3*Number(v)}function Ct(v){const[f,p,w]=v.split(".");if(void 0===f||void 0===p||void 0===w)return xe("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,L.tV)(p);return A?JSON.parse(A):(xe("Failed to decode base64 JWT payload"),null)}catch(A){return xe("Caught error parsing JWT payload as JSON",A),null}}function Ye(v,f){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,m.Z)(function*(v,f,p=!1){if(p)return f;try{return yield f}catch(w){throw w instanceof L.ZR&&Xi(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Xi({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Ft{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),w)}iteration(){var f=this;return(0,m.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&f.schedule(!0))}f.schedule()})()}}class xs{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ht(this.lastLoginAt),this.creationTime=ht(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vn(v){return ln.apply(this,arguments)}function ln(){return(ln=(0,m.Z)(function*(v){var f;const p=v.auth,w=yield v.getIdToken(),A=yield Ye(v,jt(p,{idToken:w}));te(null==A?void 0:A.users.length,p,"internal-error");const P=A.users[0];v._notifyReloadListener(P);const J=(null===(f=P.providerUserInfo)||void 0===f?void 0:f.length)?_e(P.providerUserInfo):[],Re=G(v.providerData,J),_t=!!v.isAnonymous&&!(v.email&&P.passwordHash||(null==Re?void 0:Re.length)),Dn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Re,metadata:new xs(P.createdAt,P.lastLoginAt),isAnonymous:_t};Object.assign(v,Dn)})).apply(this,arguments)}function $(){return($=(0,m.Z)(function*(v){const f=(0,L.m9)(v);yield Vn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function G(v,f){return[...v.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function _e(v){return v.map(f=>{var{providerId:p}=f,w=(0,se._T)(f,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Ge(){return(Ge=(0,m.Z)(function*(v,f){const p=yield Ni(v,{},(0,m.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:P}=v.config,J=ci(v,A,"/v1/token",`key=${P}`),Re=yield v._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",Xt.fetch()(J,{method:"POST",headers:Re,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){te(f.idToken,"internal-error"),te(void 0!==f.idToken,"internal-error"),te(void 0!==f.refreshToken,"internal-error");const p="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function it(v){const f=Ct(v);return te(f,"internal-error"),te(void 0!==f.exp,"internal-error"),te(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var w=this;return(0,m.Z)(function*(){return te(!w.accessToken||w.refreshToken,f,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var w=this;return(0,m.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:J}=yield function ne(v,f){return Ge.apply(this,arguments)}(f,p);w.updateTokensAndExpiration(A,P,Number(J))})()}updateTokensAndExpiration(f,p,w){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,p){const{refreshToken:w,accessToken:A,expirationTime:P}=p,J=new ct;return w&&(te("string"==typeof w,"internal-error",{appName:f}),J.refreshToken=w),A&&(te("string"==typeof A,"internal-error",{appName:f}),J.accessToken=A),P&&(te("number"==typeof P,"internal-error",{appName:f}),J.expirationTime=P),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new ct,this.toJSON())}_performRefresh(){return Ze("not implemented")}}function $t(v,f){te("string"==typeof v||void 0===v,"internal-error",{appName:f})}class en{constructor(f){var{uid:p,auth:w,stsTokenManager:A}=f,P=(0,se._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ft(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new xs(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,m.Z)(function*(){const w=yield Ye(p,p.stsTokenManager.getToken(p.auth,f));return te(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(f){return function wt(v){return Qt.apply(this,arguments)}(this,f)}reload(){return function U(v){return $.apply(this,arguments)}(this)}_assign(f){this!==f&&(te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new en(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var w=this;return(0,m.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),p&&(yield Vn(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,m.Z)(function*(){const p=yield f.getIdToken();return yield Ye(f,function Pi(v,f){return dt.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var w,A,P,J,Re,et,gt,_t;const Dn=null!==(w=p.displayName)&&void 0!==w?w:void 0,ei=null!==(A=p.email)&&void 0!==A?A:void 0,wa=null!==(P=p.phoneNumber)&&void 0!==P?P:void 0,wu=null!==(J=p.photoURL)&&void 0!==J?J:void 0,zl=null!==(Re=p.tenantId)&&void 0!==Re?Re:void 0,xc=null!==(et=p._redirectEventId)&&void 0!==et?et:void 0,Mc=null!==(gt=p.createdAt)&&void 0!==gt?gt:void 0,Rc=null!==(_t=p.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:Wl,emailVerified:Eu,isAnonymous:Kl,providerData:gh,stsTokenManager:mh}=p;te(Wl&&mh,f,"internal-error");const yh=ct.fromJSON(this.name,mh);te("string"==typeof Wl,f,"internal-error"),$t(Dn,f.name),$t(ei,f.name),te("boolean"==typeof Eu,f,"internal-error"),te("boolean"==typeof Kl,f,"internal-error"),$t(wa,f.name),$t(wu,f.name),$t(zl,f.name),$t(xc,f.name),$t(Mc,f.name),$t(Rc,f.name);const Iu=new en({uid:Wl,auth:f,email:ei,emailVerified:Eu,displayName:Dn,isAnonymous:Kl,photoURL:wu,phoneNumber:wa,tenantId:zl,stsTokenManager:yh,createdAt:Mc,lastLoginAt:Rc});return gh&&Array.isArray(gh)&&(Iu.providerData=gh.map(vm=>Object.assign({},vm))),xc&&(Iu._redirectEventId=xc),Iu}static _fromIdTokenResponse(f,p,w=!1){return(0,m.Z)(function*(){const A=new ct;A.updateFromServerResponse(p);const P=new en({uid:p.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield Vn(P),P})()}}const Yn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,w){var A=this;return(0,m.Z)(function*(){A.storage[p]=w})()}_get(p){var w=this;return(0,m.Z)(function*(){const A=w.storage[p];return void 0===A?null:A})()}_remove(p){var w=this;return(0,m.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return v.type="NONE",v})();function St(v,f,p){return`firebase:${v}:${f}:${p}`}class jn{constructor(f,p,w){this.persistence=f,this.auth=p,this.userKey=w;const{config:A,name:P}=this.auth;this.fullUserKey=St(this.userKey,A.apiKey,P),this.fullPersistenceKey=St("persistence",A.apiKey,P),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?en._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,m.Z)(function*(){if(p.persistence===f)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,w="authUser"){return(0,m.Z)(function*(){if(!p.length)return new jn(de(Yn),f,w);const A=(yield Promise.all(p.map(function(){var gt=(0,m.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return gt.apply(this,arguments)}}()))).filter(gt=>gt);let P=A[0]||de(Yn);const J=St(w,f.config.apiKey,f.name);let Re=null;for(const gt of p)try{const _t=yield gt._get(J);if(_t){const Dn=en._fromJSON(f,_t);gt!==P&&(Re=Dn),P=gt;break}}catch(_t){}const et=A.filter(gt=>gt._shouldAllowMigration);return P._shouldAllowMigration&&et.length?(P=et[0],Re&&(yield P._set(J,Re.toJSON())),yield Promise.all(p.map(function(){var gt=(0,m.Z)(function*(_t){if(_t!==P)try{yield _t._remove(J)}catch(Dn){}});return function(_t){return gt.apply(this,arguments)}}())),new jn(P,f,w)):new jn(P,f,w)})()}}function ie(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if($e(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(q(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Et(f))return"Blackberry";if(kt(f))return"Webos";if(H(f))return"Safari";if((f.includes("chrome/")||Te(f))&&!f.includes("edge/"))return"Chrome";if(st(f))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function q(v=(0,L.z$)()){return/firefox\//i.test(v)}function H(v=(0,L.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Te(v=(0,L.z$)()){return/crios\//i.test(v)}function $e(v=(0,L.z$)()){return/iemobile/i.test(v)}function st(v=(0,L.z$)()){return/android/i.test(v)}function Et(v=(0,L.z$)()){return/blackberry/i.test(v)}function kt(v=(0,L.z$)()){return/webos/i.test(v)}function Mt(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function Cn(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function wr(v=(0,L.z$)()){return Mt(v)||st(v)||kt(v)||Et(v)||/windows phone/i.test(v)||$e(v)}function or(v,f=[]){let p;switch(v){case"Browser":p=ie((0,L.z$)());break;case"Worker":p=`${ie((0,L.z$)())}-${v}`;break;default:p=v}const w=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${M.SDK_VERSION}/${w}`}class Bo{constructor(f,p){this.app=f,this.config=p,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new We(this),this.idTokenSubscription=new We(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=p.sdkClientVersion}_initializeWithPersistence(f,p){var w=this;return p&&(this._popupRedirectResolver=de(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var A,P;if(!w._deleted&&(w.persistenceManager=yield jn.create(w,f),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(J){}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p)}})()}initializeCurrentUser(f){var p=this;return(0,m.Z)(function*(){var w;let A=yield p.assertedPersistence.getCurrentUser();if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const P=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,J=null==A?void 0:A._redirectEventId,Re=yield p.tryRedirectSignIn(f);(!P||P===J)&&(null==Re?void 0:Re.user)&&(A=Re.user)}return A?A._redirectEventId?(te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===A._redirectEventId?p.directlySetCurrentUser(A):p.reloadAndSetCurrentUserOrClear(A)):p.reloadAndSetCurrentUserOrClear(A):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var p=this;return(0,m.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch(A){yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,m.Z)(function*(){try{yield Vn(f)}catch(w){if("auth/network-request-failed"!==w.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ut(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,m.Z)(function*(){const w=f?(0,L.m9)(f):null;return w&&te(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(f){var p=this;return(0,m.Z)(function*(){if(!p._deleted)return f&&te(p.tenantId===f.tenantId,p,"tenant-id-mismatch"),p.queue((0,m.Z)(function*(){yield p.directlySetCurrentUser(f),p.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(de(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,p,w){return this.registerStateListener(this.authStateSubscription,f,p,w)}onIdTokenChanged(f,p,w){return this.registerStateListener(this.idTokenSubscription,f,p,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var w=this;return(0,m.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(p);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const w=f&&de(f)||p._popupRedirectResolver;te(w,p,"argument-error"),p.redirectPersistenceManager=yield jn.create(p,[de(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,m.Z)(function*(){var w,A;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===f?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,m.Z)(function*(){if(f===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,w,A){if(this._deleted)return()=>{};const P="function"==typeof p?p:p.next.bind(p),J=this._isInitialized?Promise.resolve():this._initializationPromise;return te(J,this,"internal-error"),J.then(()=>P(this.currentUser)),"function"==typeof p?f.addObserver(p,w,A):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==f&&(p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh()),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=or(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){const p={"X-Client-Version":f.clientVersion};return f.app.options.appId&&(p["X-Firebase-gmpid"]=f.app.options.appId),p})()}}function tn(v){return(0,L.m9)(v)}class We{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(p=>this.observer=p)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Nt(v,f,p){const w=tn(v);te(w._canInitEmulator,w,"emulator-config-failed"),te(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!(null==p?void 0:p.disableWarnings),P=nn(f),{host:J,port:Re}=function zr(v){const f=nn(v),p=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const P=A[1];return{host:P,port:Fi(w.substr(P.length+1))}}{const[P,J]=w.split(":");return{host:P,port:Fi(J)}}}(f);w.config.emulator={url:`${P}//${J}${null===Re?"":`:${Re}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:J,port:Re,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function $n(){function v(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function nn(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Fi(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Mr{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return Ze("not implemented")}_getIdTokenResponse(f){return Ze("not implemented")}_linkToIdToken(f,p){return Ze("not implemented")}_getReauthenticationResolver(f){return Ze("not implemented")}}function on(v,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,m.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:resetPassword",Bt(v,f))})).apply(this,arguments)}function An(v,f){return It.apply(this,arguments)}function It(){return(It=(0,m.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Va(v,f){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,m.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:update",Bt(v,f))})).apply(this,arguments)}function Ns(){return(Ns=(0,m.Z)(function*(v,f){return fr(v,"POST","/v1/accounts:signInWithPassword",Bt(v,f))})).apply(this,arguments)}function Hn(v,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,m.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:sendOobCode",Bt(v,f))})).apply(this,arguments)}function jo(v,f){return ar.apply(this,arguments)}function ar(){return(ar=(0,m.Z)(function*(v,f){return Hn(v,f)})).apply(this,arguments)}function an(v,f){return ja.apply(this,arguments)}function ja(){return(ja=(0,m.Z)(function*(v,f){return Hn(v,f)})).apply(this,arguments)}function $o(v,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,m.Z)(function*(v,f){return Hn(v,f)})).apply(this,arguments)}function Li(v,f){return $a.apply(this,arguments)}function $a(){return($a=(0,m.Z)(function*(v,f){return Hn(v,f)})).apply(this,arguments)}function Ui(){return(Ui=(0,m.Z)(function*(v,f){return fr(v,"POST","/v1/accounts:signInWithEmailLink",Bt(v,f))})).apply(this,arguments)}function Qu(){return(Qu=(0,m.Z)(function*(v,f){return fr(v,"POST","/v1/accounts:signInWithEmailLink",Bt(v,f))})).apply(this,arguments)}class Ha extends Mr{constructor(f,p,w,A=null){super("password",w),this._email=f,this._password=p,this._tenantId=A}static _fromEmailAndPassword(f,p){return new Ha(f,p,"password")}static _fromEmailAndCode(f,p,w=null){return new Ha(f,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,m.Z)(function*(){switch(p.signInMethod){case"password":return function Ba(v,f){return Ns.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Il(v,f){return Ui.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Me(f,"internal-error")}})()}_linkToIdToken(f,p){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return An(f,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Vi(v,f){return Qu.apply(this,arguments)}(f,{idToken:p,email:w._email,oobCode:w._password});default:Me(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Os(v,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,m.Z)(function*(v,f){return fr(v,"POST","/v1/accounts:signInWithIdp",Bt(v,f))})).apply(this,arguments)}class es extends Mr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new es(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Me("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=p,P=(0,se._T)(p,["providerId","signInMethod"]);if(!w||!A)return null;const J=new es(w,A);return J.idToken=P.idToken||void 0,J.accessToken=P.accessToken||void 0,J.secret=P.secret,J.nonce=P.nonce,J.pendingToken=P.pendingToken||null,J}_getIdTokenResponse(f){return Os(f,this.buildRequest())}_linkToIdToken(f,p){const w=this.buildRequest();return w.idToken=p,Os(f,w)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Os(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,L.xO)(p)}return f}}function Zf(v,f){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,m.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:sendVerificationCode",Bt(v,f))})).apply(this,arguments)}function bl(){return(bl=(0,m.Z)(function*(v,f){return fr(v,"POST","/v1/accounts:signInWithPhoneNumber",Bt(v,f))})).apply(this,arguments)}function Ps(){return(Ps=(0,m.Z)(function*(v,f){const p=yield fr(v,"POST","/v1/accounts:signInWithPhoneNumber",Bt(v,f));if(p.temporaryProof)throw Un(v,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Qf={USER_NOT_FOUND:"user-not-found"};function Tl(){return(Tl=(0,m.Z)(function*(v,f){return fr(v,"POST","/v1/accounts:signInWithPhoneNumber",Bt(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Qf)})).apply(this,arguments)}class mo extends Mr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new mo({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new mo({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function Yf(v,f){return bl.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function Ju(v,f){return Ps.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Jf(v,f){return Tl.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:w,verificationCode:A}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:w,phoneNumber:A,temporaryProof:P}=f;return w||p||A||P?new mo({verificationId:p,verificationCode:w,phoneNumber:A,temporaryProof:P}):null}}class Ho{constructor(f){var p,w,A,P,J,Re;const et=(0,L.zd)((0,L.pd)(f)),gt=null!==(p=et.apiKey)&&void 0!==p?p:null,_t=null!==(w=et.oobCode)&&void 0!==w?w:null,Dn=function Xf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=et.mode)&&void 0!==A?A:null);te(gt&&_t&&Dn,"argument-error"),this.apiKey=gt,this.operation=Dn,this.code=_t,this.continueUrl=null!==(P=et.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(J=et.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(Re=et.tenantId)&&void 0!==Re?Re:null}static parseLink(f){const p=function ep(v){const f=(0,L.zd)((0,L.pd)(v)).link,p=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||p||f||v}(f);try{return new Ho(p)}catch(w){return null}}}let Cl=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(p,w){return Ha._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const A=Ho.parseLink(w);return te(A,"argument-error"),Ha._fromEmailAndCode(p,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ei{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Go extends Ei{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ii extends Go{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return te("providerId"in p&&"signInMethod"in p,"argument-error"),es._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return te(f.idToken||f.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ii.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ii.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:P,nonce:J,providerId:Re}=f;if(!w&&!A&&!p&&!P||!Re)return null;try{return new Ii(Re)._credential({idToken:p,accessToken:w,nonce:J,pendingToken:P})}catch(et){return null}}}let Al=(()=>{class v extends Go{constructor(){super("facebook.com")}static credential(p){return es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),qo=(()=>{class v extends Go{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:A}=p;if(!w&&!A)return null;try{return v.credential(w,A)}catch(P){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),zo=(()=>{class v extends Go{constructor(){super("github.com")}static credential(p){return es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Wo extends Mr{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return Os(f,this.buildRequest())}_linkToIdToken(f,p){const w=this.buildRequest();return w.idToken=p,Os(f,w)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Os(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:P}=p;return w&&A&&P&&w===A?new Wo(w,P):null}static _create(f,p){return new Wo(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ko extends Ei{constructor(f){te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ko.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ko.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Wo.fromJSON(f);return te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:w}=f;if(!p||!w)return null;try{return Wo._create(w,p)}catch(A){return null}}}let yo=(()=>{class v extends Go{constructor(){super("twitter.com")}static credential(p,w){return es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=p;if(!w||!A)return null;try{return v.credential(w,A)}catch(P){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function li(v,f){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,m.Z)(function*(v,f){return fr(v,"POST","/v1/accounts:signUp",Bt(v,f))})).apply(this,arguments)}class pn{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,w,A=!1){return(0,m.Z)(function*(){const P=yield en._fromIdTokenResponse(f,w,A),J=Zo(w);return new pn({user:P,providerId:J,_tokenResponse:w,operationType:p})})()}static _forOperation(f,p,w){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=Zo(w);return new pn({user:f,providerId:A,_tokenResponse:w,operationType:p})})()}}function Zo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Jd(v){return qa.apply(this,arguments)}function qa(){return(qa=(0,m.Z)(function*(v){var f;const p=tn(v);if(yield p._initializationPromise,null===(f=p.currentUser)||void 0===f?void 0:f.isAnonymous)return new pn({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield li(p,{returnSecureToken:!0}),A=yield pn._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Yo extends L.ZR{constructor(f,p,w,A){var P;super(p.code,p.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Yo.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,p,w,A){return new Yo(f,p,w,A)}}function xl(v,f,p,w){return("reauthenticate"===f?p._getReauthenticationResolver(v):p._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Yo._fromErrorAndOperation(v,P,f,w):P})}function za(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Ml(v,f){return Di.apply(this,arguments)}function Di(){return(Di=(0,m.Z)(function*(v,f){const p=(0,L.m9)(v);yield vo(!0,p,f);const{providerUserInfo:w}=yield vr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),A=za(w||[]);return p.providerData=p.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function ec(v,f){return un.apply(this,arguments)}function un(){return(un=(0,m.Z)(function*(v,f,p=!1){const w=yield Ye(v,f._linkToIdToken(v.auth,yield v.getIdToken()),p);return pn._forOperation(v,"link",w)})).apply(this,arguments)}function vo(v,f,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,m.Z)(function*(v,f,p){yield Vn(f);const A=!1===v?"provider-already-linked":"no-such-provider";te(za(f.providerData).has(p)===v,f.auth,A)})).apply(this,arguments)}function rn(v,f){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,m.Z)(function*(v,f,p=!1){const{auth:w}=v,A="reauthenticate";try{const P=yield Ye(v,xl(w,A,f,v),p);te(P.idToken,w,"internal-error");const J=Ct(P.idToken);te(J,w,"internal-error");const{sub:Re}=J;return te(v.uid===Re,w,"user-mismatch"),pn._forOperation(v,A,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Me(w,"user-mismatch"),P}})).apply(this,arguments)}function Wa(v,f){return ks.apply(this,arguments)}function ks(){return(ks=(0,m.Z)(function*(v,f,p=!1){const w="signIn",A=yield xl(v,w,f),P=yield pn._fromIdTokenResponse(v,w,A);return p||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Qn(v,f){return tc.apply(this,arguments)}function tc(){return(tc=(0,m.Z)(function*(v,f){return Wa(tn(v),f)})).apply(this,arguments)}function Sn(v,f){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,m.Z)(function*(v,f){const p=(0,L.m9)(v);return yield vo(!1,p,f.providerId),ec(p,f)})).apply(this,arguments)}function pr(v,f){return Js.apply(this,arguments)}function Js(){return(Js=(0,m.Z)(function*(v,f){return rn((0,L.m9)(v),f)})).apply(this,arguments)}function Fs(v,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,m.Z)(function*(v,f){return fr(v,"POST","/v1/accounts:signInWithCustomToken",Bt(v,f))})).apply(this,arguments)}function bi(v,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,m.Z)(function*(v,f){const p=tn(v),w=yield Fs(p,{token:f,returnSecureToken:!0}),A=yield pn._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class ts{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?ft._fromServerResponse(f,p):Me(f,"internal-error")}}class ft extends ts{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new ft(p)}}function _o(v,f,p){var w;te((null===(w=p.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),te(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(te(p.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(te(p.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function Rl(v,f,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,m.Z)(function*(v,f,p){const w=(0,L.m9)(v),A={requestType:"PASSWORD_RESET",email:f};p&&_o(w,A,p),yield an(w,A)})).apply(this,arguments)}function nc(v,f,p){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,m.Z)(function*(v,f,p){yield on((0,L.m9)(v),{oobCode:f,newPassword:p})})).apply(this,arguments)}function rc(v,f){return ic.apply(this,arguments)}function ic(){return(ic=(0,m.Z)(function*(v,f){yield Va((0,L.m9)(v),{oobCode:f})})).apply(this,arguments)}function Ce(v,f){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,m.Z)(function*(v,f){const p=(0,L.m9)(v),w=yield on(p,{oobCode:f}),A=w.requestType;switch(te(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(w.mfaInfo,p,"internal-error");default:te(w.email,p,"internal-error")}let P=null;return w.mfaInfo&&(P=ts._fromServerResponse(tn(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function sc(v,f){return gn.apply(this,arguments)}function gn(){return(gn=(0,m.Z)(function*(v,f){const{data:p}=yield Ce((0,L.m9)(v),f);return p.email})).apply(this,arguments)}function wo(v,f,p){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,m.Z)(function*(v,f,p){const w=tn(v),A=yield li(w,{returnSecureToken:!0,email:f,password:p}),P=yield pn._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function di(v,f,p){return Qn((0,L.m9)(v),Cl.credential(f,p))}function oc(v,f,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,m.Z)(function*(v,f,p){const w=(0,L.m9)(v),A={requestType:"EMAIL_SIGNIN",email:f};te(p.handleCodeInApp,w,"argument-error"),p&&_o(w,A,p),yield $o(w,A)})).apply(this,arguments)}function tp(v,f){const p=Ho.parseLink(f);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}function Nl(v,f,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,m.Z)(function*(v,f,p){const w=(0,L.m9)(v),A=Cl.credentialWithLink(f,p||ue());return te(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Qn(w,A)})).apply(this,arguments)}function Za(v,f){return xn.apply(this,arguments)}function xn(){return(xn=(0,m.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:createAuthUri",Bt(v,f))})).apply(this,arguments)}function ns(v,f){return ta.apply(this,arguments)}function ta(){return(ta=(0,m.Z)(function*(v,f){const w={identifier:f,continueUri:yt()?ue():"http://localhost"},{signinMethods:A}=yield Za((0,L.m9)(v),w);return A||[]})).apply(this,arguments)}function Ls(v,f){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,m.Z)(function*(v,f){const p=(0,L.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&_o(p.auth,A,f);const{email:P}=yield jo(p.auth,A);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function ac(v,f,p){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,m.Z)(function*(v,f,p){const w=(0,L.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};p&&_o(w.auth,P,p);const{email:J}=yield Li(w.auth,P);J!==v.email&&(yield v.reload())})).apply(this,arguments)}function uc(v,f){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,m.Z)(function*(v,f){return Jt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function na(v,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,m.Z)(function*(v,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const w=(0,L.m9)(v),P={idToken:yield w.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},J=yield Ye(w,uc(w.auth,P));w.displayName=J.displayName||null,w.photoURL=J.photoUrl||null;const Re=w.providerData.find(({providerId:et})=>"password"===et);Re&&(Re.displayName=w.displayName,Re.photoURL=w.photoURL),yield w._updateTokensIfNecessary(J)})).apply(this,arguments)}function cc(v,f){return Xd((0,L.m9)(v),f,null)}function lc(v,f){return Xd((0,L.m9)(v),null,f)}function Xd(v,f,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,m.Z)(function*(v,f,p){const{auth:w}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(P.email=f),p&&(P.password=p);const J=yield Ye(v,An(w,P));yield v._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class Us{constructor(f,p,w={}){this.isNewUser=f,this.providerId=p,this.profile=w}}class dc extends Us{constructor(f,p,w,A){super(f,p,w),this.username=A}}class eh extends Us{constructor(f,p){super(f,"facebook.com",p)}}class th extends dc{constructor(f,p){super(f,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Eo extends Us{constructor(f,p){super(f,"google.com",p)}}class $i extends dc{constructor(f,p,w){super(f,"twitter.com",p,w)}}function nh(v){const{user:f,_tokenResponse:p}=v;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function sa(v){var f,p;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const J=null===(p=null===(f=Ct(v.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(J)return new Us(P,"anonymous"!==J&&"custom"!==J?J:null)}if(!w)return null;switch(w){case"facebook.com":return new eh(P,A);case"github.com":return new th(P,A);case"google.com":return new Eo(P,A);case"twitter.com":return new $i(P,A,v.screenName||null);case"custom":case"anonymous":return new Us(P,null);default:return new Us(P,w,A)}}(p)}class to{constructor(f,p){this.type=f,this.credential=p}static _fromIdtoken(f){return new to("enroll",f)}static _fromMfaPendingCredential(f){return new to("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,w;if(null==f?void 0:f.multiFactorSession){if(null===(p=f.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return to._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return to._fromIdtoken(f.multiFactorSession.idToken)}return null}}class aa{constructor(f,p,w){this.session=f,this.hints=p,this.signInResolver=w}static _fromError(f,p){const w=tn(f),A=p.customData._serverResponse,P=(A.mfaInfo||[]).map(Re=>ts._fromServerResponse(w,Re));te(A.mfaPendingCredential,w,"internal-error");const J=to._fromMfaPendingCredential(A.mfaPendingCredential);return new aa(J,P,function(){var Re=(0,m.Z)(function*(et){const gt=yield et._process(w,J);delete A.mfaInfo,delete A.mfaPendingCredential;const _t=Object.assign(Object.assign({},A),{idToken:gt.idToken,refreshToken:gt.refreshToken});switch(p.operationType){case"signIn":const Dn=yield pn._fromIdTokenResponse(w,p.operationType,_t);return yield w._updateCurrentUser(Dn.user),Dn;case"reauthenticate":return te(p.user,w,"internal-error"),pn._forOperation(p.user,p.operationType,_t);default:Me(w,"internal-error")}});return function(et){return Re.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,m.Z)(function*(){return p.signInResolver(f)})()}}function hc(v,f){var p;const w=(0,L.m9)(v),A=f;return te(f.customData.operationType,w,"argument-error"),te(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),aa._fromError(w,A)}function fc(v,f){return Jt(v,"POST","/v2/accounts/mfaEnrollment:start",Bt(v,f))}class pc{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>ts._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new pc(f)}getSession(){var f=this;return(0,m.Z)(function*(){return to._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,p){var w=this;return(0,m.Z)(function*(){const A=f,P=yield w.getSession(),J=yield Ye(w.user,A._process(w.user.auth,P,p));return yield w.user._updateTokensIfNecessary(J),w.user.reload()})()}unenroll(f){var p=this;return(0,m.Z)(function*(){const w="string"==typeof f?f:f.uid,A=yield p.user.getIdToken(),P=yield Ye(p.user,function ur(v,f){return Jt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Bt(v,f))}(p.user.auth,{idToken:A,mfaEnrollmentId:w}));p.enrolledFactors=p.enrolledFactors.filter(({uid:J})=>J!==w),yield p.user._updateTokensIfNecessary(P);try{yield p.user.reload()}catch(J){if("auth/user-token-expired"!==J.code)throw J}})()}}const is=new WeakMap;function Xa(v){const f=(0,L.m9)(v);return is.has(f)||is.set(f,pc._fromUser(f)),is.get(f)}const gc="__sak";class mc{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(gc,"1"),this.storage.removeItem(gc),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const wn=(()=>{class v extends mc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function eu(){const v=(0,L.z$)();return H(v)||Mt(v)}()&&function ki(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=wr(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),P=this.localCache[w];A!==P&&p(w,P,A)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((Re,et,gt)=>{this.notifyListeners(Re,gt)});const A=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(A);if(p.newValue!==Re)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!w)return}const P=()=>{const Re=this.storage.getItem(A);!w&&this.localCache[A]===Re||this.notifyListeners(A,Re)},J=this.storage.getItem(A);!function Rt(){return(0,L.w1)()&&10===document.documentMode}()||J===p.newValue||p.newValue===p.oldValue?P():setTimeout(P,10)}notifyListeners(p,w){this.localCache[p]=w;const A=this.listeners[p];if(A)for(const P of Array.from(A))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var A=()=>super._set,P=this;return(0,m.Z)(function*(){yield A().call(P,p,w),P.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,A=this;return(0,m.Z)(function*(){const P=yield w().call(A,p);return A.localCache[p]=JSON.stringify(P),P})()}_remove(p){var w=()=>super._remove,A=this;return(0,m.Z)(function*(){yield w().call(A,p),delete A.localCache[p]})()}}return v.type="LOCAL",v})(),Je=(()=>{class v extends mc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return v.type="SESSION",v})();let Zr=(()=>{class v{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(P=>P.isListeningto(p));if(w)return w;const A=new v(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,m.Z)(function*(){const A=p,{eventId:P,eventType:J,data:Re}=A.data,et=w.handlersMap[J];if(!(null==et?void 0:et.size))return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:J});const gt=Array.from(et).map(function(){var Dn=(0,m.Z)(function*(ei){return ei(A.origin,Re)});return function(ei){return Dn.apply(this,arguments)}}()),_t=yield function ss(v){return Promise.all(v.map(function(){var f=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return f.apply(this,arguments)}}()))}(gt);A.ports[0].postMessage({status:"done",eventId:P,eventType:J,response:_t})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Jn(v="",f=10){let p="";for(let w=0;w<f;w++)p+=Math.floor(10*Math.random());return v+p}class vc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,w=50){var A=this;return(0,m.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let J,Re;return new Promise((et,gt)=>{const _t=Jn("",20);P.port1.start();const Dn=setTimeout(()=>{gt(new Error("unsupported_event"))},w);Re={messageChannel:P,onMessage(ei){const wa=ei;if(wa.data.eventId===_t)switch(wa.data.status){case"ack":clearTimeout(Dn),J=setTimeout(()=>{gt(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),et(wa.data.response);break;default:clearTimeout(Dn),clearTimeout(J),gt(new Error("invalid_response"))}}},A.handlers.add(Re),P.port1.addEventListener("message",Re.onMessage),A.target.postMessage({eventType:f,eventId:_t,data:p},[P.port2])}).finally(()=>{Re&&A.removeMessageHandler(Re)})})()}}function Mn(){return window}function ua(){return void 0!==Mn().WorkerGlobalScope&&"function"==typeof Mn().importScripts}function no(){return(no=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const _c="firebaseLocalStorageDb",nu="firebaseLocalStorage",Pl="fbase_key";class mn{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function bo(v,f){return v.transaction([nu],f?"readwrite":"readonly").objectStore(nu)}function To(){const v=indexedDB.open(_c,1);return new Promise((f,p)=>{v.addEventListener("error",()=>{p(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(nu,{keyPath:Pl})}catch(A){p(A)}}),v.addEventListener("success",(0,m.Z)(function*(){const w=v.result;w.objectStoreNames.contains(nu)?f(w):(w.close(),yield function ca(){const v=indexedDB.deleteDatabase(_c);return new mn(v).toPromise()}(),f(yield To()))}))})}function Rr(v,f,p){return ru.apply(this,arguments)}function ru(){return(ru=(0,m.Z)(function*(v,f,p){const w=bo(v,!0).put({[Pl]:f,value:p});return new mn(w).toPromise()})).apply(this,arguments)}function Hi(){return(Hi=(0,m.Z)(function*(v,f){const p=bo(v,!1).get(f),w=yield new mn(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function iu(v,f){const p=bo(v,!0).delete(f);return new mn(p).toPromise()}const as=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield To()),p.db})()}_withRetries(p){var w=this;return(0,m.Z)(function*(){let A=0;for(;;)try{const P=yield w._openDb();return yield p(P)}catch(P){if(A++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return ua()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=Zr._getInstance(function Pt(){return ua()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(A,P){return{keyProcessed:(yield p._poll()).includes(P.key)}});return function(A,P){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var w,A;if(p.activeServiceWorker=yield function Do(){return no.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new vc(p.activeServiceWorker);const P=yield p.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=P[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function os(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield To();return yield Rr(p,gc,"1"),yield iu(p,gc),!0}catch(p){}return!1})()}_withPendingWrite(p){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var A=this;return(0,m.Z)(function*(){return A._withPendingWrite((0,m.Z)(function*(){return yield A._withRetries(P=>Rr(P,p,w)),A.localCache[p]=w,A.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,m.Z)(function*(){const A=yield w._withRetries(P=>function Co(v,f){return Hi.apply(this,arguments)}(P,p));return w.localCache[p]=A,A})()}_remove(p){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(A=>iu(A,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const w=yield p._withRetries(J=>{const Re=bo(J,!1).getAll();return new mn(Re).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:J,value:Re}of w)P.add(J),JSON.stringify(p.localCache[J])!==JSON.stringify(Re)&&(p.notifyListeners(J,Re),A.push(J));for(const J of Object.keys(p.localCache))p.localCache[J]&&!P.has(J)&&(p.notifyListeners(J,null),A.push(J));return A})()}notifyListeners(p,w){this.localCache[p]=w;const A=this.listeners[p];if(A)for(const P of Array.from(A))P(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ao(v,f){return Jt(v,"POST","/v2/accounts/mfaSignIn:start",Bt(v,f))}function So(){return(So=(0,m.Z)(function*(v){return(yield Jt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xo(v){return new Promise((f,p)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=f,w.onerror=A=>{const P=le("internal-error");P.customData=A,p(P)},w.type="text/javascript",w.charset="UTF-8",function Rn(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(w)})}function io(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Gn=1e12;class Qr{constructor(f){this.auth=f,this.counter=Gn,this._widgets=new Map}render(f,p){const w=this.counter;return this._widgets.set(w,new qn(f,this.auth.name,p||{})),this.counter++,w}reset(f){var p;const w=f||Gn;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(f){var p;return(null===(p=this._widgets.get(f||Gn))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,m.Z)(function*(){var w;return null===(w=p._widgets.get(f||Gn))||void 0===w||w.execute(),""})()}}class qn{constructor(f,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;te(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ic(v){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hi=io("rcb"),kl=new rt(3e4,6e4);class En{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Mn().grecaptcha}load(f,p=""){return te(function sh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(p),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Mn().grecaptcha):new Promise((w,A)=>{const P=Mn().setTimeout(()=>{A(le(f,"network-request-failed"))},kl.get());Mn()[hi]=()=>{Mn().clearTimeout(P),delete Mn()[hi];const Re=Mn().grecaptcha;if(!Re)return void A(le(f,"internal-error"));const et=Re.render;Re.render=(gt,_t)=>{const Dn=et(gt,_t);return this.counter++,Dn},this.hostLanguage=p,w(Re)},xo(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:hi,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(P),A(le(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Mn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class lm{load(f){return(0,m.Z)(function*(){return new Qr(f)})()}clearedOneInstance(){}}const Mo="recaptcha",fi={theme:"light",type:"image"};class oh{constructor(f,p=Object.assign({},fi),w){this.parameters=p,this.type=Mo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tn(w),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;te(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new lm:new En,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(p)||new Promise(P=>{const J=Re=>{!Re||(f.tokenChangeListeners.delete(J),P(Re))};f.tokenChangeListeners.add(J),f.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof f)f(p);else if("string"==typeof f){const w=Mn()[f];"function"==typeof w&&w(p)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){te(yt()&&!ua(),f.auth,"internal-error"),yield function us(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function Ec(v){return So.apply(this,arguments)}(f.auth);te(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ou{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=mo._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function cs(v,f,p){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,m.Z)(function*(v,f,p){const w=tn(v),A=yield au(w,f,(0,L.m9)(p));return new ou(A,P=>Qn(w,P))})).apply(this,arguments)}function zn(v,f,p){return ha.apply(this,arguments)}function ha(){return(ha=(0,m.Z)(function*(v,f,p){const w=(0,L.m9)(v);yield vo(!1,w,"phone");const A=yield au(w.auth,f,(0,L.m9)(p));return new ou(A,P=>Sn(w,P))})).apply(this,arguments)}function fa(v,f,p){return ah.apply(this,arguments)}function ah(){return(ah=(0,m.Z)(function*(v,f,p){const w=(0,L.m9)(v),A=yield au(w.auth,f,(0,L.m9)(p));return new ou(A,P=>pr(w,P))})).apply(this,arguments)}function au(v,f,p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,m.Z)(function*(v,f,p){var w;const A=yield p.verify();try{let P;if(te("string"==typeof A,v,"argument-error"),te(p.type===Mo,v,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const J=P.session;if("phoneNumber"in P)return te("enroll"===J.type,v,"internal-error"),(yield fc(v,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{te("signin"===J.type,v,"internal-error");const Re=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return te(Re,v,"missing-multi-factor-info"),(yield Ao(v,{mfaPendingCredential:J.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield Zf(v,{phoneNumber:P.phoneNumber,recaptchaToken:A});return J}}finally{p._reset()}})).apply(this,arguments)}function Ci(v,f){return pa.apply(this,arguments)}function pa(){return(pa=(0,m.Z)(function*(v,f){yield ec((0,L.m9)(v),f)})).apply(this,arguments)}let uu=(()=>{class v{constructor(p){this.providerId=v.PROVIDER_ID,this.auth=tn(p)}verifyPhoneNumber(p,w){return au(this.auth,p,(0,L.m9)(w))}static credential(p,w){return mo._fromVerification(p,w)}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:A}=p;return w&&A?mo._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Jr(v,f){return f?de(f):(te(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ro extends Mr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Os(f,this._buildIdpRequest())}_linkToIdToken(f,p){return Os(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return Os(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function bc(v){return Wa(v.auth,new Ro(v),v.bypassAuthState)}function cu(v){const{auth:f,user:p}=v;return te(p,f,"internal-error"),rn(p,new Ro(v),v.bypassAuthState)}function xt(v){return lu.apply(this,arguments)}function lu(){return(lu=(0,m.Z)(function*(v){const{auth:f,user:p}=v;return te(p,f,"internal-error"),ec(p,new Ro(v),v.bypassAuthState)})).apply(this,arguments)}class qi{constructor(f,p,w,A,P=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,m.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(w,A){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:P,tenantId:J,error:Re,type:et}=f;if(Re)return void p.reject(Re);const gt={auth:p.auth,requestUri:w,sessionId:A,tenantId:J||void 0,postBody:P||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(et)(gt))}catch(_t){p.reject(_t)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return bc;case"linkViaPopup":case"linkViaRedirect":return xt;case"reauthViaPopup":case"reauthViaRedirect":return cu;default:Me(this.auth,"internal-error")}}resolve(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xr=new rt(2e3,1e4);function du(v,f,p){return so.apply(this,arguments)}function so(){return(so=(0,m.Z)(function*(v,f,p){const w=tn(v);ye(v,f,Ei);const A=Jr(w,p);return new fu(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function np(v,f,p){return hu.apply(this,arguments)}function hu(){return(hu=(0,m.Z)(function*(v,f,p){const w=(0,L.m9)(v);ye(w.auth,f,Ei);const A=Jr(w.auth,p);return new fu(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function Er(v,f,p){return ga.apply(this,arguments)}function ga(){return(ga=(0,m.Z)(function*(v,f,p){const w=(0,L.m9)(v);ye(w.auth,f,Ei);const A=Jr(w.auth,p);return new fu(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let fu=(()=>{class v extends qi{constructor(p,w,A,P,J){super(p,w,P,J),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const w=yield p.execute();return te(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,m.Z)(function*(){Y(1===p.filter.length,"Popup operations only handle one event");const w=Jn();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(le(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Xr.get())};p()}}return v.currentPopupAction=null,v})();const ls=new Map;class Xn extends qi{constructor(f,p,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,m.Z)(function*(){let w=ls.get(p.auth._key());if(!w){try{const P=(yield function er(v,f){return ma.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;w=()=>Promise.resolve(P)}catch(A){w=()=>Promise.reject(A)}ls.set(p.auth._key(),w)}return p.bypassAuthState||ls.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,p().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function ma(){return(ma=(0,m.Z)(function*(v,f){const p=Ll(f),w=ya(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(p));return yield w._remove(p),A})).apply(this,arguments)}function uh(v,f){return ds.apply(this,arguments)}function ds(){return(ds=(0,m.Z)(function*(v,f){return ya(v)._set(Ll(f),"true")})).apply(this,arguments)}function pu(){ls.clear()}function ya(v){return de(v._redirectPersistence)}function Ll(v){return St("pendingRedirect",v.config.apiKey,v.name)}function D(v,f,p){return function b(v,f,p){return x.apply(this,arguments)}(v,f,p)}function x(){return(x=(0,m.Z)(function*(v,f,p){const w=tn(v);ye(v,f,Ei);const A=Jr(w,p);return yield uh(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function F(v,f,p){return function W(v,f,p){return Z.apply(this,arguments)}(v,f,p)}function Z(){return(Z=(0,m.Z)(function*(v,f,p){const w=(0,L.m9)(v);ye(w.auth,f,Ei);const A=Jr(w.auth,p);yield uh(A,w.auth);const P=yield In(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function Ne(v,f,p){return function Be(v,f,p){return qe.apply(this,arguments)}(v,f,p)}function qe(){return(qe=(0,m.Z)(function*(v,f,p){const w=(0,L.m9)(v);ye(w.auth,f,Ei);const A=Jr(w.auth,p);yield vo(!1,w,f.providerId),yield uh(A,w.auth);const P=yield In(w);return A._openRedirect(w.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function zt(v,f){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,m.Z)(function*(v,f){return yield tn(v)._initializationPromise,Nn(v,f,!1)})).apply(this,arguments)}function Nn(v,f){return Or.apply(this,arguments)}function Or(){return(Or=(0,m.Z)(function*(v,f,p=!1){const w=tn(v),A=Jr(w,f),J=yield new Xn(w,A,p).execute();return J&&!p&&(delete J.user._redirectEventId,yield w._persistUserIfCurrent(J.user),yield w._setRedirectUser(null,f)),J})).apply(this,arguments)}function In(v){return zi.apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(v){const f=Jn(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Ir{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(p=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function va(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pr(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var w;if(f.error&&!Pr(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(le(this.auth,A))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const w=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hs(f))}saveEventToCache(f){this.cachedEventUids.add(hs(f)),this.lastProcessedEventTime=Date.now()}}function hs(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Pr({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ul(v){return gu.apply(this,arguments)}function gu(){return(gu=(0,m.Z)(function*(v,f={}){return Jt(v,"GET","/v1/projects",f)})).apply(this,arguments)}const Vl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rp=/^https?/;function mu(){return(mu=(0,m.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Ul(v);for(const p of f)try{if(yu(p))return}catch(w){}Me(v,"unauthorized-domain")})).apply(this,arguments)}function yu(v){const f=ue(),{protocol:p,hostname:w}=new URL(f);if(v.startsWith("chrome-extension://")){const J=new URL(v);return""===J.hostname&&""===w?"chrome-extension:"===p&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&J.hostname===w}if(!rp.test(p))return!1;if(Vl.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Tc=new rt(3e4,6e4);function ip(){const v=Mn().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let p=0;p<v.CP.length;p++)v.CP[p]=null}let Cc=null;function sp(v){return Cc=Cc||function A_(v){return new Promise((f,p)=>{var w,A,P;function J(){ip(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ip(),p(le(v,"network-request-failed"))},timeout:Tc.get()})}if(null===(A=null===(w=Mn().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(P=Mn().gapi)||void 0===P?void 0:P.load)){const Re=io("iframefcb");return Mn()[Re]=()=>{gapi.load?J():p(le(v,"network-request-failed"))},xo(`https://apis.google.com/js/api.js?onload=${Re}`).catch(et=>p(et))}J()}}).catch(f=>{throw Cc=null,f})}(v),Cc}const op=new rt(5e3,15e3),vu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ac=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bl(v){const f=v.config;te(f.authDomain,v,"auth-domain-config-required");const p=f.emulator?Zn(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:v.name,v:M.SDK_VERSION},A=Ac.get(v.config.apiHost);A&&(w.eid=A);const P=v._getFrameworks();return P.length&&(w.fw=P.join(",")),`${p}?${(0,L.xO)(w).slice(1)}`}function No(){return No=(0,m.Z)(function*(v){const f=yield sp(v),p=Mn().gapi;return te(p,v,"internal-error"),f.open({where:document.body,url:Bl(v),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vu,dontclear:!0},w=>new Promise(function(){var A=(0,m.Z)(function*(P,J){yield w.restyle({setHideOnLeave:!1});const Re=le(v,"network-request-failed"),et=Mn().setTimeout(()=>{J(Re)},op.get());function gt(){Mn().clearTimeout(et),P(w)}w.ping(gt).then(gt,()=>{J(Re)})});return function(P,J){return A.apply(this,arguments)}}()))}),No.apply(this,arguments)}const ap={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hl{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function lh(v,f,p,w,A,P){te(v.config.authDomain,v,"auth-domain-config-required"),te(v.config.apiKey,v,"invalid-api-key");const J={apiKey:v.config.apiKey,appName:v.name,authType:p,redirectUrl:w,v:M.SDK_VERSION,eventId:A};if(f instanceof Ei){f.setDefaultLanguage(v.languageCode),J.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||(J.customParameters=JSON.stringify(f.getCustomParameters()));for(const[et,gt]of Object.entries(P||{}))J[et]=gt}if(f instanceof Go){const et=f.getScopes().filter(gt=>""!==gt);et.length>0&&(J.scopes=et.join(","))}v.tenantId&&(J.tid=v.tenantId);const Re=J;for(const et of Object.keys(Re))void 0===Re[et]&&delete Re[et];return`${function fm({config:v}){return v.emulator?Zn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(Re).slice(1)}`}const dh="webStorageSupport",Bs=class fs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Je,this._completeRedirectFn=Nn}_openPopup(f,p,w,A){var P=this;return(0,m.Z)(function*(){var J;Y(null===(J=P.eventManagers[f._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const Re=lh(f,p,w,ue(),A);return function Gl(v,f,p,w=500,A=600){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),J=Math.max((window.screen.availWidth-w)/2,0).toString();let Re="";const et=Object.assign(Object.assign({},ap),{width:w.toString(),height:A.toString(),top:P,left:J}),gt=(0,L.z$)().toLowerCase();p&&(Re=Te(gt)?"_blank":p),q(gt)&&(f=f||"http://localhost",et.scrollbars="yes");const _t=Object.entries(et).reduce((ei,[wa,wu])=>`${ei}${wa}=${wu},`,"");if(function qr(v=(0,L.z$)()){var f;return Mt(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(gt)&&"_self"!==Re)return function ql(v,f){const p=document.createElement("a");p.href=v,p.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(f||"",Re),new Hl(null);const Dn=window.open(f||"",Re,_t);te(Dn,v,"popup-blocked");try{Dn.focus()}catch(ei){}return new Hl(Dn)}(f,Re,Jn())})()}_openRedirect(f,p,w,A){var P=this;return(0,m.Z)(function*(){return yield P._originValidation(f),function Io(v){Mn().location.href=v}(lh(f,p,w,ue(),A)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:A,promise:P}=this.eventManagers[p];return A?Promise.resolve(A):(Y(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(f);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(f){var p=this;return(0,m.Z)(function*(){const w=yield function _u(v){return No.apply(this,arguments)}(f),A=new Ir(f);return w.register("authEvent",P=>(te(null==P?void 0:P.authEvent,f,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:A},p.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(dh,{type:dh},A=>{var P;const J=null===(P=null==A?void 0:A[0])||void 0===P?void 0:P[dh];void 0!==J&&p(!!J),Me(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function dm(v){return mu.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return wr()||H()||Mt()}};class fh extends class hh{constructor(f){this.factorId=f}_process(f,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,w);case"signin":return this._finalizeSignIn(f,p.credential);default:return Ze("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new fh(f)}_finalizeEnroll(f,p,w){return function Ja(v,f){return Jt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Bt(v,f))}(f,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function Yr(v,f){return Jt(v,"POST","/v2/accounts/mfaSignIn:finalize",Bt(v,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let pm=(()=>{class v{constructor(){}static assertion(p){return fh._fromCredential(p)}}return v.FACTOR_ID="phone",v})();var gm="@firebase/auth";class x_{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function mm(v){(0,M._registerComponent)(new pe.wA("auth",(f,{options:p})=>{const w=f.getProvider("app").getImmediate(),{apiKey:A,authDomain:P}=w.options;return(J=>{te(A&&!A.includes(":"),"invalid-api-key",{appName:J.name}),te(!(null==P?void 0:P.includes(":")),"argument-error",{appName:J.name});const Re={apiKey:A,authDomain:P,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:or(v)},et=new Bo(J,Re);return function ke(v,f){const p=(null==f?void 0:f.persistence)||[],w=(Array.isArray(p)?p:[p]).map(de);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(et,p),et})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,w)=>{f.getProvider("auth-internal").initialize()})),(0,M._registerComponent)(new pe.wA("auth-internal",f=>{const p=tn(f.getProvider("auth").getImmediate());return new x_(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,M.registerVersion)(gm,"0.19.9",function up(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,M.registerVersion)(gm,"0.19.9","esm2017")}("Browser")},2090:(at,Ae,O)=>{"use strict";O.d(Ae,{BH:()=>Ve,LL:()=>ue,ZR:()=>ke,zI:()=>he,US:()=>pe,tV:()=>ge,$s:()=>Ft,r3:()=>Bt,Sg:()=>Se,ne:()=>Pi,vZ:()=>Ln,ZB:()=>V,pd:()=>wi,m9:()=>ln,z$:()=>Pe,jU:()=>ae,ru:()=>xe,d:()=>le,xb:()=>fn,w1:()=>De,hl:()=>Ze,uI:()=>Ue,UG:()=>K,b$:()=>Me,G6:()=>te,Mn:()=>ye,xO:()=>Oi,zd:()=>ci,eu:()=>Y});const se=function(U){const $=[];let G=0;for(let _e=0;_e<U.length;_e++){let ne=U.charCodeAt(_e);ne<128?$[G++]=ne:ne<2048?($[G++]=ne>>6|192,$[G++]=63&ne|128):55296==(64512&ne)&&_e+1<U.length&&56320==(64512&U.charCodeAt(_e+1))?(ne=65536+((1023&ne)<<10)+(1023&U.charCodeAt(++_e)),$[G++]=ne>>18|240,$[G++]=ne>>12&63|128,$[G++]=ne>>6&63|128,$[G++]=63&ne|128):($[G++]=ne>>12|224,$[G++]=ne>>6&63|128,$[G++]=63&ne|128)}return $},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,$){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let ne=0;ne<U.length;ne+=3){const Ge=U[ne],ct=ne+1<U.length,$t=ct?U[ne+1]:0,en=ne+2<U.length,Bn=en?U[ne+2]:0;let jn=(15&$t)<<2|Bn>>6,ie=63&Bn;en||(ie=64,ct||(jn=64)),_e.push(G[Ge>>2],G[(3&Ge)<<4|$t>>4],G[jn],G[ie])}return _e.join("")},encodeString(U,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(U):this.encodeByteArray(se(U),$)},decodeString(U,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(U):function(U){const $=[];let G=0,_e=0;for(;G<U.length;){const ne=U[G++];if(ne<128)$[_e++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Ge=U[G++];$[_e++]=String.fromCharCode((31&ne)<<6|63&Ge)}else if(ne>239&&ne<365){const en=((7&ne)<<18|(63&U[G++])<<12|(63&U[G++])<<6|63&U[G++])-65536;$[_e++]=String.fromCharCode(55296+(en>>10)),$[_e++]=String.fromCharCode(56320+(1023&en))}else{const Ge=U[G++],ct=U[G++];$[_e++]=String.fromCharCode((15&ne)<<12|(63&Ge)<<6|63&ct)}}return $.join("")}(this.decodeStringToByteArray(U,$))},decodeStringToByteArray(U,$){this.init_();const G=$?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let ne=0;ne<U.length;){const Ge=G[U.charAt(ne++)],$t=ne<U.length?G[U.charAt(ne)]:0;++ne;const Bn=ne<U.length?G[U.charAt(ne)]:64;++ne;const St=ne<U.length?G[U.charAt(ne)]:64;if(++ne,null==Ge||null==$t||null==Bn||null==St)throw Error();_e.push(Ge<<2|$t>>4),64!==Bn&&(_e.push($t<<4&240|Bn>>2),64!==St&&_e.push(Bn<<6&192|St))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},oe=function(U){return function(U){const $=se(U);return pe.encodeByteArray($,!0)}(U).replace(/\./g,"")},ge=function(U){try{return pe.decodeString(U,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function V(U,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return $}for(const G in $)!$.hasOwnProperty(G)||!X(G)||(U[G]=V(U[G],$[G]));return U}function X(U){return"__proto__"!==U}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,G)=>{this.resolve=$,this.reject=G})}wrapCallback($){return(G,_e)=>{G?this.reject(G):this.resolve(_e),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(G):$(G,_e))}}}function Se(U,$){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=$||"demo-project",ne=U.iat||0,Ge=U.sub||U.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ct=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:ne,exp:ne+3600,auth_time:ne,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},U);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(ct)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function K(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function ae(){return"object"==typeof self&&self.self===self}function xe(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function le(){return Pe().indexOf("Electron/")>=0}function De(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function ye(){return Pe().indexOf("MSAppHost/")>=0}function te(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ze(){return"object"==typeof indexedDB}function Y(){return new Promise((U,$)=>{try{let G=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(_e);ne.onsuccess=()=>{ne.result.close(),G||self.indexedDB.deleteDatabase(_e),U(!0)},ne.onupgradeneeded=()=>{G=!1},ne.onerror=()=>{var Ge;$((null===(Ge=ne.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(G){$(G)}})}function he(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ke extends Error{constructor($,G,_e){super(G),this.code=$,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor($,G,_e){this.service=$,this.serviceName=G,this.errors=_e}create($,...G){const _e=G[0]||{},ne=`${this.service}/${$}`,Ge=this.errors[$],ct=Ge?function yt(U,$){return U.replace(qt,(G,_e)=>{const ne=$[_e];return null!=ne?String(ne):`<${_e}?>`})}(Ge,_e):"Error";return new ke(ne,`${this.serviceName}: ${ct} (${ne}).`,_e)}}const qt=/\{\$([^}]+)}/g;function Bt(U,$){return Object.prototype.hasOwnProperty.call(U,$)}function fn(U){for(const $ in U)if(Object.prototype.hasOwnProperty.call(U,$))return!1;return!0}function Ln(U,$){if(U===$)return!0;const G=Object.keys(U),_e=Object.keys($);for(const ne of G){if(!_e.includes(ne))return!1;const Ge=U[ne],ct=$[ne];if(fr(Ge)&&fr(ct)){if(!Ln(Ge,ct))return!1}else if(Ge!==ct)return!1}for(const ne of _e)if(!G.includes(ne))return!1;return!0}function fr(U){return null!==U&&"object"==typeof U}function Oi(U){const $=[];for(const[G,_e]of Object.entries(U))Array.isArray(_e)?_e.forEach(ne=>{$.push(encodeURIComponent(G)+"="+encodeURIComponent(ne))}):$.push(encodeURIComponent(G)+"="+encodeURIComponent(_e));return $.length?"&"+$.join("&"):""}function ci(U){const $={};return U.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[ne,Ge]=_e.split("=");$[decodeURIComponent(ne)]=decodeURIComponent(Ge)}}),$}function wi(U){const $=U.indexOf("?");if(!$)return"";const G=U.indexOf("#",$);return U.substring($,G>0?G:void 0)}function Pi(U,$){const G=new dt(U,$);return G.subscribe.bind(G)}class dt{constructor($,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{$(this)}).catch(_e=>{this.error(_e)})}next($){this.forEachObserver(G=>{G.next($)})}error($){this.forEachObserver(G=>{G.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,G,_e){let ne;if(void 0===$&&void 0===G&&void 0===_e)throw new Error("Missing Observer.");ne=function yn(U,$){if("object"!=typeof U||null===U)return!1;for(const G of $)if(G in U&&"function"==typeof U[G])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:G,complete:_e},void 0===ne.next&&(ne.next=jt),void 0===ne.error&&(ne.error=jt),void 0===ne.complete&&(ne.complete=jt);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(ct){}}),this.observers.push(ne),Ge}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,$)}sendOne($,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{G(this.observers[$])}catch(_e){"undefined"!=typeof console&&console.error&&console.error(_e)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jt(){}function Ft(U,$=1e3,G=2){const _e=$*Math.pow(G,U),ne=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+ne)}function ln(U){return U&&U._delegate?U._delegate:U}},3483:(at,Ae,O)=>{"use strict";var m=O(5e3);let L=null;function M(){return L}const ce=new m.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ge(){return(0,m.LFG)(V)}()},providedIn:"platform"}),n})();const j=new m.OlP("Location Initialized");let V=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return M().getBaseHref(this._doc)}onPopState(t){const r=M().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=M().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){X()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){X()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ce))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ve(){return new V((0,m.LFG)(ce))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let K=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ae(n){const e=(0,m.LFG)(ce).location;return new Me((0,m.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const xe=new m.OlP("appBaseHref");let Me=(()=>{class n extends K{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,c){const d=this.prepareExternalUrl(o+Ue(c));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,c){const d=this.prepareExternalUrl(o+Ue(c));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(oe),m.LFG(xe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),le=(()=>{class n extends K{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,c){let d=this.prepareExternalUrl(o+Ue(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,c){let d=this.prepareExternalUrl(o+Ue(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(oe),m.LFG(xe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Pe(te(o)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Se,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(m.LFG(K),m.LFG(oe))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ye(){return new De((0,m.LFG)(K),(0,m.LFG)(oe))}()},providedIn:"root"}),n})();function te(n){return n.replace(/\/index.html$/,"")}var he=(()=>((he=he||{})[he.Zero=0]="Zero",he[he.One=1]="One",he[he.Two=2]="Two",he[he.Few=3]="Few",he[he.Many=4]="Many",he[he.Other=5]="Other",he))();const wi=m.kL8;class on{}let An=(()=>{class n extends on{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(wi(r||this.locale)(t)){case he.Zero:return"zero";case he.One:return"one";case he.Two:return"two";case he.Few:return"few";case he.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.soG))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ar=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new an,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ja("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ja("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class an{constructor(){this.$implicit=null,this.ngIf=null}}function ja(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Sl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[{provide:on,useClass:An}]}),n})();function Zo(n){return"server"===n}let xl=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new za((0,m.LFG)(ce),window)}),n})();class za{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Di(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const c=o.shadowRoot;if(c){const d=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],o-c[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ml(this.window.history)||Ml(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ml(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qs extends class vo extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){L||(L=n)}(new Qs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Qo(){return rn=rn||document.querySelector("base"),rn?rn.getAttribute("href"):null}();return null==t?null:function ks(n){Wa=Wa||document.createElement("a"),Wa.setAttribute("href",n);const e=Wa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Va(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let Wa,rn=null;const Qn=new m.OlP("TRANSITION_ID"),Sn=[{provide:m.ip1,useFactory:function tc(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=M(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<o.length;c++)r.remove(o[c])})}},deps:[Qn,ce,m.zs3],multi:!0}];class Bi{static init(){(0,m.VLi)(new Bi)}addToWindow(e){m.dqk.getAngularTestability=(r,o=!0)=>{const c=e.findTestabilityInTree(r,o);if(null==c)throw new Error("Could not find testability for element.");return c},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const o=m.dqk.getAllAngularTestabilities();let c=o.length,d=!1;const g=function(E){d=d||E,c--,0==c&&r(d)};o.forEach(function(E){E.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?M().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let pr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Js=new m.OlP("EventManagerPlugins");let Fs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let c=0;c<o.length;c++){const d=o[c];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Js),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Jo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=M().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let bi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ji=(()=>{class n extends bi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(c=>{const d=this._doc.createElement("style");d.textContent=c,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ts),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ts))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ce))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function ts(n){M().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_o=/%COMP%/g;function Ce(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ce(n,o,t):(o=o.replace(_o,n),t.push(o))}return t}function Ot(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new wo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new oc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case m.ifc.ShadowDom:return new ea(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ce(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Fs),m.LFG(ji),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class wo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const c=ft[o];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ft[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,o&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ot(r)):this.eventManager.addEventListener(e,t,Ot(r))}}class oc extends wo{constructor(e,t,r,o){super(e),this.component=r;const c=Ce(o+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr=function rc(n){return"_ngcontent-%COMP%".replace(_o,n)}(o+"-"+r.id),this.hostAttr=function ic(n){return"_nghost-%COMP%".replace(_o,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ea extends wo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Ce(o.id,o.styles,[]);for(let d=0;d<c.length;d++){const g=document.createElement("style");g.textContent=c[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let tp=(()=>{class n extends Jo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ce))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Nl=["alt","control","meta","shift"],Za={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ns={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ta=(()=>{class n extends Jo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const c=n.parseEventName(r),d=n.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>M().onAndCancel(t,c.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const c=n._normalizeKey(r.pop());let d="";if(Nl.forEach(E=>{const T=r.indexOf(E);T>-1&&(r.splice(T,1),d+=E+".")}),d+=c,0!=r.length||0===c.length)return null;const g={};return g.domEventName=o,g.fullKey=d,g}static getEventFullKey(t){let r="",o=function Ls(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&xn.hasOwnProperty(e)&&(e=xn[e]))}return Za[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Nl.forEach(c=>{c!=o&&ns[c](t)&&(r+=c+".")}),r+=o,r}static eventCallback(t,r,o){return c=>{n.getEventFullKey(c)===t&&o.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ce))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Qa=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Ti(){Qs.makeCurrent(),Bi.init()},multi:!0},{provide:ce,useFactory:function Ya(){return(0,m.RDi)(document),document},deps:[]}]),na=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function ac(){return new m.qLn},deps:[]},{provide:Js,useClass:tp,multi:!0,deps:[ce,m.R0b,m.Lbi]},{provide:Js,useClass:ta,multi:!0,deps:[ce]},{provide:gn,useClass:gn,deps:[Fs,ji,m.AFp]},{provide:m.FYo,useExisting:gn},{provide:bi,useExisting:ji},{provide:ji,useClass:ji,deps:[ce]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:Fs,useClass:Fs,deps:[Js,m.R0b]},{provide:class un{},useClass:pr,deps:[]}];let ra=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Qn,useExisting:m.AFp},Sn]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:na,imports:[Sl,m.hGG]}),n})();"undefined"!=typeof window&&window;var wn=O(8996),yc=O(7669);function Je(...n){const e=(0,yc.yG)(n);return(0,wn.D)(n,e)}var ss=O(7579);class Zr extends ss.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Jn=O(8306);const{isArray:vc}=Array,{getPrototypeOf:Mn,prototype:Io,keys:ua}=Object;var os=O(4671),Pt=O(4004);const{isArray:_c}=Array;var mn=O(5403),bo=O(9672);function ca(...n){const e=(0,yc.yG)(n),t=(0,yc.jO)(n),{args:r,keys:o}=function Do(n){if(1===n.length){const e=n[0];if(vc(e))return{args:e,keys:null};if(function no(n){return n&&"object"==typeof n&&Mn(n)===Io}(e)){const t=ua(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,wn.D)([],e);const c=new Jn.y(function To(n,e,t=os.y){return r=>{Rr(e,()=>{const{length:o}=n,c=new Array(o);let d=o,g=o;for(let E=0;E<o;E++)Rr(e,()=>{const T=(0,wn.D)(n[E],e);let R=!1;T.subscribe((0,mn.x)(r,N=>{c[E]=N,R||(R=!0,g--),g||r.next(t(c.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>function Pl(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,d):os.y));return t?c.pipe(function nu(n){return(0,Pt.U)(e=>function Ol(n,e){return _c(e)?n(...e):n(e)}(n,e))}(t)):c}function Rr(n,e,t){n?(0,bo.f)(t,n,e):e()}const Co=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Hi=O(8189);function la(...n){return function iu(){return(0,Hi.J)(1)}()((0,wn.D)(n,(0,yc.yG)(n)))}var ro=O(8421);function wc(n){return new Jn.y(e=>{(0,ro.Xf)(n()).subscribe(e)})}var as=O(515),Ao=O(727),Yr=O(4482);function Ec(){return(0,Yr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,mn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,c=t;t=null,o&&(!c||o===c)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class So extends Jn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ao.w0;const t=this.getSubject();e.add(this.source.subscribe((0,mn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ao.w0.EMPTY)}return e}refCount(){return Ec()(this)}}function Rn(n,e){return(0,Yr.e)((t,r)=>{let o=null,c=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,mn.x)(r,E=>{null==o||o.unsubscribe();let T=0;const R=c++;(0,ro.Xf)(n(E,R)).subscribe(o=(0,mn.x)(r,N=>r.next(e?e(E,N,R,T++):N),()=>{o=null,g()}))},()=>{d=!0,g()}))})}var xo=O(5698);function io(...n){const e=(0,yc.yG)(n);return(0,Yr.e)((t,r)=>{(e?la(n,t,e):la(n,t)).subscribe(r)})}function da(n,e,t,r,o){return(c,d)=>{let g=t,E=e,T=0;c.subscribe((0,mn.x)(d,R=>{const N=T++;E=g?n(E,R,N):(g=!0,R),r&&d.next(E)},o&&(()=>{g&&d.next(E),d.complete()})))}}function Gi(n,e){return(0,Yr.e)(da(n,e,arguments.length>=2,!0))}function Gn(n,e){return(0,Yr.e)((t,r)=>{let o=0;t.subscribe((0,mn.x)(r,c=>n.call(e,c,o++)&&r.next(c)))})}function Qr(n){return(0,Yr.e)((e,t)=>{let c,r=null,o=!1;r=e.subscribe((0,mn.x)(t,void 0,void 0,d=>{c=(0,ro.Xf)(n(d,Qr(n)(e))),r?(r.unsubscribe(),r=null,c.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,c.subscribe(t))})}var qn=O(5577),Ic=O(576);function hi(n,e){return(0,Ic.m)(e)?(0,qn.z)(n,e,1):(0,qn.z)(n,1)}function kl(n){return n<=0?()=>as.E:(0,Yr.e)((e,t)=>{let r=[];e.subscribe((0,mn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function su(n=En){return(0,Yr.e)((e,t)=>{let r=!1;e.subscribe((0,mn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function En(){return new Co}function sh(n){return(0,Yr.e)((e,t)=>{let r=!1;e.subscribe((0,mn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Mo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gn((o,c)=>n(o,c,r)):os.y,(0,xo.q)(1),t?sh(e):su(()=>new Co))}var fi=O(8505);class us{constructor(e,t){this.id=e,this.url=t}}class ou extends us{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cs extends us{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Dc extends us{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zn extends us{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ha extends us{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fa extends us{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ah extends us{constructor(e,t,r,o,c){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class au extends us{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nr extends us{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ci{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jr{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ro{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xt="primary";class lu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qi(n){return new lu(n)}const Xr="ngNavigationCancelingError";function du(n){const e=Error("NavigationCancelingError: "+n);return e[Xr]=!0,e}function np(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let c=0;c<r.length;c++){const d=r[c],g=n[c];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Er(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let c=0;c<t.length;c++)if(o=t[c],!ga(n[o],e[o]))return!1;return!0}function ga(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,c)=>r[c]===o)}return n===e}function fu(n){return Array.prototype.concat.apply([],n)}function Fl(n){return n.length>0?n[n.length-1]:null}function Xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function er(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,wn.D)(Promise.resolve(n)):Je(n)}const uh={exact:function Ll(n,e,t){if(!qe(n.segments,e.segments)||!F(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ll(n.children[r],e.children[r],t))return!1;return!0},subset:b},ds={exact:function ya(n,e){return Er(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ga(n[t],e[t]))},ignored:()=>!0};function pu(n,e,t){return uh[t.paths](n.root,e.root,t.matrixParams)&&ds[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function b(n,e,t){return x(n,e,e.segments,t)}function x(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!qe(o,t)||e.hasChildren()||!F(o,t,r))}if(n.segments.length===t.length){if(!qe(n.segments,t)||!F(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!b(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(qe(n.segments,o)&&F(n.segments,o,r)&&n.children[xt])&&x(n.children[xt],e,c,r)}}function F(n,e,t){return e.every((r,o)=>ds[t](n[o].parameters,r.parameters))}class W{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qi(this.queryParams)),this._queryParamMap}toString(){return Or.serialize(this)}}class Z{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return In(this)}}class Ne{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qi(this.parameters)),this._parameterMap}toString(){return gu(this)}}function qe(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Wt{}class Nn{parse(e){const t=new Cc(e);return new W(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${zi(e.root,!0)}`,r=function rp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ir(t)}=${Ir(o)}`).join("&"):`${Ir(t)}=${Ir(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function hs(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Or=new Nn;function In(n){return n.segments.map(e=>gu(e)).join("/")}function zi(n,e){if(!n.hasChildren())return In(n);if(e){const t=n.children[xt]?zi(n.children[xt],!1):"",r=[];return Xn(n.children,(o,c)=>{c!==xt&&r.push(`${c}:${zi(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function zt(n,e){let t=[];return Xn(n.children,(r,o)=>{o===xt&&(t=t.concat(e(r,o)))}),Xn(n.children,(r,o)=>{o!==xt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===xt?[zi(n.children[xt],!1)]:[`${o}:${zi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${In(n)}/${t[0]}`:`${In(n)}/(${t.join("//")})`}}function Vs(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ir(n){return Vs(n).replace(/%3B/gi,";")}function Pr(n){return Vs(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function va(n){return decodeURIComponent(n)}function Ul(n){return va(n.replace(/\+/g,"%20"))}function gu(n){return`${Pr(n.path)}${function Vl(n){return Object.keys(n).map(e=>`;${Pr(e)}=${Pr(n[e])}`).join("")}(n.parameters)}`}const dm=/^[^\/()?;=#]+/;function mu(n){const e=n.match(dm);return e?e[0]:""}const yu=/^[^=?&#]+/,ip=/^[^&#]+/;class Cc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new Z(e,t)),r}parseSegment(){const e=mu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ne(va(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=mu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=mu(this.remaining);o&&(r=o,this.capture(r))}e[va(t)]=va(r)}parseQueryParam(e){const t=function Tc(n){const e=n.match(yu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function A_(n){const e=n.match(ip);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Ul(t),c=Ul(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(c)}else e[o]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mu(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=xt);const d=this.parseChildren();t[c]=1===Object.keys(d).length?d[xt]:new Z([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class sp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=op(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=op(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ch(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ch(e,this._root).map(t=>t.value)}}function op(n,e){if(n===e.value)return e;for(const t of e.children){const r=op(n,t);if(r)return r}return null}function ch(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ch(n,t);if(r.length)return r.unshift(e),r}return[]}class oo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ac extends sp{constructor(e,t){super(e),this.snapshot=t,$l(this,e)}toString(){return this.snapshot.toString()}}function Bl(n,e){const t=function _u(n,e){const d=new _a([],{},{},"",{},xt,e,null,n.root,-1,{});return new jl("",new oo(d,[]))}(n,e),r=new Zr([new Ne("",{})]),o=new Zr({}),c=new Zr({}),d=new Zr({}),g=new Zr(""),E=new No(r,o,d,g,c,xt,e,t.root);return E.snapshot=t.root,new Ac(new oo(E,[]),t)}class No{constructor(e,t,r,o,c,d,g,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=d,this.component=g,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Pt.U)(e=>qi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Pt.U)(e=>qi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ap(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],c=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(c.component)break;r--}}return function S_(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class _a{constructor(e,t,r,o,c,d,g,E,T,R,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=d,this.component=g,this.routeConfig=E,this._urlSegment=T,this._lastPathIndex=R,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jl extends sp{constructor(e,t){super(t),this.url=e,$l(this,t)}toString(){return Hl(this._root)}}function $l(n,e){e.value._routerState=n,e.children.forEach(t=>$l(n,t))}function Hl(n){const e=n.children.length>0?` { ${n.children.map(Hl).join(", ")} } `:"";return`${n.value}${e}`}function Gl(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Er(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Er(e.params,t.params)||n.params.next(t.params),function hu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Er(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Er(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ql(n,e){const t=Er(n.params,e.params)&&function Be(n,e){return qe(n,e)&&n.every((t,r)=>Er(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ql(n.parent,e.parent))}function Sc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function lh(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Sc(n,r,o);return Sc(n,r)})}(n,e,t);return new oo(r,o)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const d=c.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>Sc(n,g)),d}}const r=function fm(n){return new No(new Zr(n.url),new Zr(n.params),new Zr(n.queryParams),new Zr(n.fragment),new Zr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(c=>Sc(n,c));return new oo(r,o)}}function fs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bs(n){return"object"==typeof n&&null!=n&&n.outlets}function hh(n,e,t,r,o){let c={};return r&&Xn(r,(d,g)=>{c[g]=Array.isArray(d)?d.map(E=>`${E}`):`${d}`}),new W(t.root===n?e:fh(t.root,n,e),c,o)}function fh(n,e,t){const r={};return Xn(n.children,(o,c)=>{r[c]=o===e?t:fh(o,e,t)}),new Z(n.segments,r)}class pm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fs(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Bs);if(o&&o!==Fl(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ph{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ym(n,e,t){if(n||(n=new Z([],{})),0===n.segments.length&&n.hasChildren())return v(n,e,t);const r=function f(n,e,t){let r=0,o=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return c;const d=n.segments[o],g=t[r];if(Bs(g))break;const E=`${g}`,T=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&T&&"object"==typeof T&&void 0===T.outlets){if(!P(E,T,d))return c;r+=2}else{if(!P(E,{},d))return c;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new Z(n.segments.slice(0,r.pathIndex),{});return c.children[xt]=new Z(n.segments.slice(r.pathIndex),n.children),v(c,0,o)}return r.match&&0===o.length?new Z(n.segments,{}):r.match&&!n.hasChildren()?p(n,e,t):r.match?v(n,0,o):p(n,e,t)}function v(n,e,t){if(0===t.length)return new Z(n.segments,{});{const r=function mm(n){return Bs(n[0])?n[0].outlets:{[xt]:n}}(t),o={};return Xn(r,(c,d)=>{"string"==typeof c&&(c=[c]),null!==c&&(o[d]=ym(n.children[d],e,c))}),Xn(n.children,(c,d)=>{void 0===r[d]&&(o[d]=c)}),new Z(n.segments,o)}}function p(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const c=t[o];if(Bs(c)){const E=w(c.outlets);return new Z(r,E)}if(0===o&&fs(t[0])){r.push(new Ne(n.segments[e].path,A(t[0]))),o++;continue}const d=Bs(c)?c.outlets[xt]:`${c}`,g=o<t.length-1?t[o+1]:null;d&&g&&fs(g)?(r.push(new Ne(d,A(g))),o+=2):(r.push(new Ne(d,{})),o++)}return new Z(r,{})}function w(n){const e={};return Xn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=p(new Z([],{}),0,t))}),e}function A(n){const e={};return Xn(n,(t,r)=>e[r]=`${t}`),e}function P(n,e,t){return n==t.path&&Er(e,t.parameters)}class Re{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=vu(t);e.children.forEach(c=>{const d=c.value.outlet;this.deactivateRoutes(c,o[d],r),delete o[d]}),Xn(o,(c,d)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(o===c)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=vu(e);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=vu(e);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=vu(t);e.children.forEach(c=>{this.activateRoutes(c,o[c.value.outlet],r),this.forwardEvent(new bc(c.value.snapshot))}),e.children.length&&this.forwardEvent(new Jr(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(Gl(o),o===c)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),Gl(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=function et(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=g?g.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=E,d.outlet&&d.outlet.activateWith(o,E),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class gt{constructor(e,t){this.routes=e,this.module=t}}function _t(n){return"function"==typeof n}function ei(n){return n instanceof W}const Mc=Symbol("INITIAL_VALUE");function Rc(){return Rn(n=>ca(n.map(e=>e.pipe((0,xo.q)(1),io(Mc)))).pipe(Gi((e,t)=>{let r=!1;return t.reduce((o,c,d)=>o!==Mc?o:(c===Mc&&(r=!0),r||!1!==c&&d!==t.length-1&&!ei(c)?o:c),e)},Mc),Gn(e=>e!==Mc),(0,Pt.U)(e=>ei(e)?e:!0===e),(0,xo.q)(1)))}class Wl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Eu,this.attachRef=null}}class Eu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Wl,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Kl=(()=>{class n{constructor(t,r,o,c,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=c||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,E=new gh(t,g,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Eu),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class gh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===No?this.route:e===Eu?this.childContexts:this.parent.get(e,t)}}let mh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[Kl],encapsulation:2}),n})();function yh(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Iu(r,vm(e,r))}}function Iu(n,e){n.children&&yh(n.children,e)}function vm(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function vh(n){const e=n.children&&n.children.map(vh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=mh),t}function js(n){return n.outlet||xt}function cr(n,e){const t=n.filter(r=>js(r)===e);return t.push(...n.filter(r=>js(r)!==e)),t}const M_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function cp(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},M_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||np)(t,n,e);if(!c)return Object.assign({},M_);const d={};Xn(c.posParams,(E,T)=>{d[T]=E.path});const g=c.consumed.length>0?Object.assign(Object.assign({},d),c.consumed[c.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:g,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function Zl(n,e,t,r,o="corrected"){if(t.length>0&&function SI(n,e,t){return t.some(r=>lp(n,e,r)&&js(r)!==xt)}(n,t,r)){const d=new Z(e,function AI(n,e,t,r){const o={};o[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&js(c)!==xt){const d=new Z([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[js(c)]=d}return o}(n,e,r,new Z(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function xI(n,e,t){return t.some(r=>lp(n,e,r))}(n,t,r)){const d=new Z(n.segments,function R_(n,e,t,r,o,c){const d={};for(const g of r)if(lp(n,t,g)&&!o[js(g)]){const E=new Z([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===c?n.segments.length:e.length,d[js(g)]=E}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const c=new Z(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function lp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function N_(n,e,t,r){return!!(js(n)===r||r!==xt&&lp(e,t,n))&&("**"===n.path||cp(e,n,t).matched)}function MI(n,e,t){return 0===e.length&&!n.children[t]}class dp{constructor(e){this.segmentGroup=e||null}}class Yl{constructor(e){this.urlTree=e}}function kr(n){return new Jn.y(e=>e.error(new dp(n)))}function hp(n){return new Jn.y(e=>e.error(new Yl(n)))}function O_(n){return new Jn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class _h{constructor(e,t,r,o,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=Zl(this.urlTree.root,[],[],this.config).segmentGroup,t=new Z(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xt).pipe((0,Pt.U)(c=>this.createUrlTree(wm(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qr(c=>{if(c instanceof Yl)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof dp?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xt).pipe((0,Pt.U)(o=>this.createUrlTree(wm(o),e.queryParams,e.fragment))).pipe(Qr(o=>{throw o instanceof dp?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Z([],{[xt]:e}):e;return new W(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Pt.U)(c=>new Z([],c))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const c of Object.keys(r.children))"primary"===c?o.unshift(c):o.push(c);return(0,wn.D)(o).pipe(hi(c=>{const d=r.children[c],g=cr(t,c);return this.expandSegmentGroup(e,g,d,c).pipe((0,Pt.U)(E=>({segment:E,outlet:c})))}),Gi((c,d)=>(c[d.outlet]=d.segment,c),{}),function lm(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gn((o,c)=>n(o,c,r)):os.y,kl(1),t?sh(e):su(()=>new Co))}())}expandSegment(e,t,r,o,c,d){return(0,wn.D)(r).pipe(hi(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,c,d).pipe(Qr(T=>{if(T instanceof dp)return Je(null);throw T}))),Mo(g=>!!g),Qr((g,E)=>{if(g instanceof Co||"EmptyError"===g.name){if(MI(t,o,c))return Je(new Z([],{}));throw new dp(t)}throw g}))}expandSegmentAgainstRoute(e,t,r,o,c,d,g){return N_(o,t,c,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,c,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,d):kr(t):kr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?hp(c):this.lineralizeSegments(r,c).pipe((0,qn.z)(d=>{const g=new Z(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,d){const{matched:g,consumedSegments:E,lastChild:T,positionalParamSegments:R}=cp(t,o,c);if(!g)return kr(t);const N=this.applyRedirectCommands(E,o.redirectTo,R);return o.redirectTo.startsWith("/")?hp(N):this.lineralizeSegments(o,N).pipe((0,qn.z)(z=>this.expandSegment(e,t,r,z.concat(c.slice(T)),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Je(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Pt.U)(z=>(r._loadedConfig=z,new Z(o,{})))):Je(new Z(o,{}));const{matched:d,consumedSegments:g,lastChild:E}=cp(t,r,o);if(!d)return kr(t);const T=o.slice(E);return this.getChildConfig(e,r,o).pipe((0,qn.z)(N=>{const z=N.module,ee=N.routes,{segmentGroup:Ie,slicedSegments:je}=Zl(t,g,T,ee),nt=new Z(Ie.segments,Ie.children);if(0===je.length&&nt.hasChildren())return this.expandChildren(z,ee,nt).pipe((0,Pt.U)(Vt=>new Z(g,Vt)));if(0===ee.length&&0===je.length)return Je(new Z(g,{}));const Lt=js(r)===c;return this.expandSegment(z,nt,ee,je,Lt?xt:c,!0).pipe((0,Pt.U)(Fn=>new Z(g.concat(Fn.segments),Fn.children)))}))}getChildConfig(e,t,r){return t.children?Je(new gt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Je(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,qn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Pt.U)(c=>(t._loadedConfig=c,c))):function P_(n){return new Jn.y(e=>e.error(du(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Je(new gt([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Je(o.map(d=>{const g=e.get(d);let E;if(function wa(n){return n&&_t(n.canLoad)}(g))E=g.canLoad(t,r);else{if(!_t(g))throw new Error("Invalid CanLoad guard");E=g(t,r)}return er(E)})).pipe(Rc(),(0,fi.b)(d=>{if(!ei(d))return;const g=du(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw g.url=d,g}),(0,Pt.U)(d=>!0===d)):Je(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Je(r);if(o.numberOfChildren>1||!o.children[xt])return O_(e.redirectTo);o=o.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const c=this.createSegmentGroup(e,t.root,r,o);return new W(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xn(e,(o,c)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[c]=t[g]}else r[c]=o}),r}createSegmentGroup(e,t,r,o){const c=this.createSegments(e,t.segments,r,o);let d={};return Xn(t.children,(g,E)=>{d[E]=this.createSegmentGroup(e,g,r,o)}),new Z(c,d)}createSegments(e,t,r,o){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,o):this.findOrReturn(c,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function wm(n){const e={};for(const r of Object.keys(n.children)){const c=wm(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function _m(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new Z(n.segments.concat(e.segments),e.children)}return n}(new Z(n.segments,e))}class Em{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fp{constructor(e,t){this.component=e,this.route=t}}function k_(n,e,t){const r=n._root;return Eh(r,e?e._root:null,t,[r.value])}function wh(n,e,t){const r=function OI(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Eh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=vu(e);return n.children.forEach(d=>{(function Im(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&c.routeConfig===d.routeConfig){const E=function PI(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qe(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qe(n.url,e.url)||!Er(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ql(n,e)||!Er(n.queryParams,e.queryParams);default:return!ql(n,e)}}(d,c,c.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new Em(r)):(c.data=d.data,c._resolvedData=d._resolvedData),Eh(n,e,c.component?g?g.children:null:t,r,o),E&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new fp(g.outlet.component,d))}else d&&Ih(e,g,o),o.canActivateChecks.push(new Em(r)),Eh(n,null,c.component?g?g.children:null:t,r,o)})(d,c[d.value.outlet],t,r.concat([d.value]),o),delete c[d.value.outlet]}),Xn(c,(d,g)=>Ih(d,t.getContext(g),o)),o}function Ih(n,e,t){const r=vu(n),o=n.value;Xn(r,(c,d)=>{Ih(c,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new fp(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class jI{}function bm(n){return new Jn.y(e=>e.error(n))}class HI{constructor(e,t,r,o,c,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d}recognize(){const e=Zl(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xt);if(null===t)return null;const r=new _a([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new oo(r,t),c=new jl(this.url,o);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=ap(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const d=t.children[c],g=cr(e,c),E=this.processSegmentGroup(g,d,c);if(null===E)return null;r.push(...E)}const o=L_(r);return function GI(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const c of e){const d=this.processSegmentAgainstRoute(c,t,r,o);if(null!==d)return d}return MI(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!N_(e,t,r,o))return null;let c,d=[],g=[];if("**"===e.path){const ee=r.length>0?Fl(r).parameters:{};c=new _a(r,ee,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ao(e),js(e),e.component,e,U_(t),Nc(t)+r.length,zI(e))}else{const ee=cp(t,e,r);if(!ee.matched)return null;d=ee.consumedSegments,g=r.slice(ee.lastChild),c=new _a(d,ee.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ao(e),js(e),e.component,e,U_(t),Nc(t)+d.length,zI(e))}const E=function qI(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:T,slicedSegments:R}=Zl(t,d,g,E.filter(ee=>void 0===ee.redirectTo),this.relativeLinkResolution);if(0===R.length&&T.hasChildren()){const ee=this.processChildren(E,T);return null===ee?null:[new oo(c,ee)]}if(0===E.length&&0===R.length)return[new oo(c,[])];const N=js(e)===o,z=this.processSegment(E,T,R,N?xt:o);return null===z?null:[new oo(c,z)]}}function F_(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function L_(n){const e=[],t=new Set;for(const r of n){if(!F_(r)){e.push(r);continue}const o=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=L_(r.children);e.push(new oo(r.value,o))}return e.filter(r=>!t.has(r))}function U_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Nc(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ao(n){return n.data||{}}function zI(n){return n.resolve||{}}function pp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Cm(n){return Rn(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,Pt.U)(()=>e)):Je(e)})}class j_ extends class bh{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const gp=new m.OlP("ROUTES");class mp{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Pt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=c.create(e);return new gt(fu(d.injector.get(gp,void 0,m.XFs.Self|m.XFs.Optional)).map(vh),d)}),Qr(c=>{throw t._loader$=void 0,c}));return t._loader$=new So(o,()=>new ss.x).pipe(Ec()),t._loader$}loadModuleFactory(e){return er(e()).pipe((0,qn.z)(t=>t instanceof m.YKP?Je(t):(0,wn.D)(this.compiler.compileModuleAsync(t))))}}class $_{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function IT(n){throw n}function Ql(n,e,t){return e.parse("/")}function yp(n,e){return Je(null)}const H_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ti=(()=>{class n{constructor(t,r,o,c,d,g,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=c,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ss.x,this.errorHandler=IT,this.malformedUriErrorHandler=Ql,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:yp,afterPreactivation:yp},this.urlHandlingStrategy=new $_,this.routeReuseStrategy=new j_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(m.h0i),this.console=d.get(m.c2e);const N=d.get(m.R0b);this.isNgZoneEnabled=N instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function ma(){return new W(new Z([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mp(d,g,z=>this.triggerEvent(new Ci(z)),z=>this.triggerEvent(new pa(z))),this.routerState=Bl(this.currentUrlTree,this.rootComponentType),this.transitions=new Zr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Gn(o=>0!==o.id),(0,Pt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Rn(o=>{let c=!1,d=!1;return Je(o).pipe((0,fi.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rn(g=>{const E=this.browserUrlTree.toString(),T=!this.navigated||g.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||T)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return vp(g.source)&&(this.browserUrlTree=g.extractedUrl),Je(g).pipe(Rn(N=>{const z=this.transitions.getValue();return r.next(new ou(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),z!==this.transitions.getValue()?as.E:Promise.resolve(N)}),function RI(n,e,t,r){return Rn(o=>function pi(n,e,t,r,o){return new _h(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Pt.U)(c=>Object.assign(Object.assign({},o),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,fi.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function wT(n,e,t,r,o){return(0,qn.z)(c=>function $I(n,e,t,r,o="emptyOnly",c="legacy"){try{const d=new HI(n,e,t,r,o,c).recognize();return null===d?bm(new jI):Je(d)}catch(d){return bm(d)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,o).pipe((0,Pt.U)(d=>Object.assign(Object.assign({},c),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,fi.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const ee=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(ee,N)}this.browserUrlTree=N.urlAfterRedirects}const z=new ha(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(z)}));if(T&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:z,extractedUrl:ee,source:Ie,restoredState:je,extras:nt}=g,Lt=new ou(z,this.serializeUrl(ee),Ie,je);r.next(Lt);const cn=Bl(ee,this.rootComponentType).snapshot;return Je(Object.assign(Object.assign({},g),{targetSnapshot:cn,urlAfterRedirects:ee,extras:Object.assign(Object.assign({},nt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),as.E}),Cm(g=>{const{targetSnapshot:E,id:T,extractedUrl:R,rawUrl:N,extras:{skipLocationChange:z,replaceUrl:ee}}=g;return this.hooks.beforePreactivation(E,{navigationId:T,appliedUrlTree:R,rawUrlTree:N,skipLocationChange:!!z,replaceUrl:!!ee})}),(0,fi.b)(g=>{const E=new fa(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(E)}),(0,Pt.U)(g=>Object.assign(Object.assign({},g),{guards:k_(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function Dm(n,e){return(0,qn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:c,canDeactivateChecks:d}}=t;return 0===d.length&&0===c.length?Je(Object.assign(Object.assign({},t),{guardsResult:!0})):function kI(n,e,t,r){return(0,wn.D)(n).pipe((0,qn.z)(o=>function BI(n,e,t,r,o){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return c&&0!==c.length?Je(c.map(g=>{const E=wh(g,e,o);let T;if(function xc(n){return n&&_t(n.canDeactivate)}(E))T=er(E.canDeactivate(n,e,t,r));else{if(!_t(E))throw new Error("Invalid CanDeactivate guard");T=er(E(n,e,t,r))}return T.pipe(Mo())})).pipe(Rc()):Je(!0)}(o.component,o.route,t,e,r)),Mo(o=>!0!==o,!0))}(d,r,o,n).pipe((0,qn.z)(g=>g&&function Dn(n){return"boolean"==typeof n}(g)?function FI(n,e,t,r){return(0,wn.D)(e).pipe(hi(o=>la(function LI(n,e){return null!==n&&e&&e(new uu(n)),Je(!0)}(o.route.parent,r),function Dh(n,e){return null!==n&&e&&e(new Ro(n)),Je(!0)}(o.route,r),function VI(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(d=>function NI(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>wc(()=>Je(d.guards.map(E=>{const T=wh(E,d.node,t);let R;if(function zl(n){return n&&_t(n.canActivateChild)}(T))R=er(T.canActivateChild(r,n));else{if(!_t(T))throw new Error("Invalid CanActivateChild guard");R=er(T(r,n))}return R.pipe(Mo())})).pipe(Rc())));return Je(c).pipe(Rc())}(n,o.path,t),function UI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const o=r.map(c=>wc(()=>{const d=wh(c,e,t);let g;if(function wu(n){return n&&_t(n.canActivate)}(d))g=er(d.canActivate(e,n));else{if(!_t(d))throw new Error("Invalid CanActivate guard");g=er(d(e,n))}return g.pipe(Mo())}));return Je(o).pipe(Rc())}(n,o.route,t))),Mo(o=>!0!==o,!0))}(r,c,n,e):Je(g)),(0,Pt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,fi.b)(g=>{if(ei(g.guardsResult)){const T=du(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw T.url=g.guardsResult,T}const E=new ah(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(E)}),Gn(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),Cm(g=>{if(g.guards.canActivateChecks.length)return Je(g).pipe((0,fi.b)(E=>{const T=new au(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(T)}),Rn(E=>{let T=!1;return Je(E).pipe(function V_(n,e){return(0,qn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Je(t);let c=0;return(0,wn.D)(o).pipe(hi(d=>function ET(n,e,t,r){return function Oo(n,e,t,r){const o=pp(n);if(0===o.length)return Je({});const c={};return(0,wn.D)(o).pipe((0,qn.z)(d=>function Tm(n,e,t,r){const o=wh(n,e,r);return er(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,fi.b)(g=>{c[d]=g}))),kl(1),(0,qn.z)(()=>pp(c).length===o.length?Je(c):as.E))}(n._resolve,n,e,r).pipe((0,Pt.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),ap(n,t).resolve),null)))}(d.route,r,n,e)),(0,fi.b)(()=>c++),kl(1),(0,qn.z)(d=>c===o.length?Je(t):as.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,fi.b)({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,fi.b)(E=>{const T=new Nr(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(T)}))}),Cm(g=>{const{targetSnapshot:E,id:T,extractedUrl:R,rawUrl:N,extras:{skipLocationChange:z,replaceUrl:ee}}=g;return this.hooks.afterPreactivation(E,{navigationId:T,appliedUrlTree:R,rawUrlTree:N,skipLocationChange:!!z,replaceUrl:!!ee})}),(0,Pt.U)(g=>{const E=function hm(n,e,t){const r=Sc(n,e._root,t?t._root:void 0);return new Ac(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:E})}),(0,fi.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,Pt.U)(r=>(new Re(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,fi.b)({next(){c=!0},complete(){c=!0}}),function oh(n){return(0,Yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;c||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),Qr(g=>{if(d=!0,function so(n){return n&&n[Xr]}(g)){const E=ei(g.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const T=new Dc(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(T),E?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vp(o.source)};this.scheduleNavigation(R,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new zn(o.id,this.serializeUrl(o.extractedUrl),g);r.next(E);try{o.resolve(this.errorHandler(g))}catch(T){o.reject(T)}}return as.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const c={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const E=Object.assign({},d);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(c.state=E)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,d,c)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){yh(t),this.config=t.map(vh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:c,fragment:d,queryParamsHandling:g,preserveFragment:E}=r,T=o||this.routerState.root,R=E?this.currentUrlTree.fragment:d;let N=null;switch(g){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=c||null}return null!==N&&(N=this.removeEmptyProps(N)),function dh(n,e,t,r,o){if(0===t.length)return hh(e.root,e.root,e,r,o);const c=function gm(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new pm(!0,0,n);let e=0,t=!1;const r=n.reduce((o,c,d)=>{if("object"==typeof c&&null!=c){if(c.outlets){const g={};return Xn(c.outlets,(E,T)=>{g[T]="string"==typeof E?E.split("/"):E}),[...o,{outlets:g}]}if(c.segmentPath)return[...o,c.segmentPath]}return"string"!=typeof c?[...o,c]:0===d?(c.split("/").forEach((g,E)=>{0==E&&"."===g||(0==E&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,c]},[]);return new pm(t,e,r)}(t);if(c.toRoot())return hh(e.root,new Z([],{}),e,r,o);const d=function x_(n,e,t){if(n.isAbsolute)return new ph(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new ph(c,c===e.root,0)}const r=fs(n.commands[0])?0:1;return function up(n,e,t){let r=n,o=e,c=t;for(;c>o;){if(c-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new ph(r,!1,o-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),g=d.processChildren?v(d.segmentGroup,d.index,c.commands):ym(d.segmentGroup,d.index,c.commands);return hh(d.segmentGroup,g,e,r,o)}(T,this.currentUrlTree,t,N,null!=R?R:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=ei(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function KI(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},H_):!1===r?Object.assign({},WI):r,ei(t))return pu(this.currentUrlTree,t,o);const c=this.parseUrl(t);return pu(this.currentUrlTree,c,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const c=t[o];return null!=c&&(r[o]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new cs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,c,d){var g,E,T;if(this.disposed)return Promise.resolve(!1);const R=this.transitions.value,N=vp(r)&&R&&!vp(R.source),z=R.rawUrl.toString()===t.toString(),ee=R.id===(null===(g=this.currentNavigation)||void 0===g?void 0:g.id);if(N&&z&&ee)return Promise.resolve(!0);let je,nt,Lt;d?(je=d.resolve,nt=d.reject,Lt=d.promise):Lt=new Promise((Vt,Kn)=>{je=Vt,nt=Kn});const cn=++this.navigationId;let Fn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Fn=o&&o.\u0275routerPageId?o.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(E=this.browserPageId)&&void 0!==E?E:0:(null!==(T=this.browserPageId)&&void 0!==T?T:0)+1):Fn=0,this.setTransition({id:cn,targetPageId:Fn,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:je,reject:nt,promise:Lt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Lt.catch(Vt=>Promise.reject(Vt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",c):this.location.go(o,"",c)}restoreHistory(t,r=!1){var o,c;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Dc(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function vp(n){return"imperative"!==n}let Oc=(()=>{class n{constructor(t,r,o,c,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=c,this.el=d,this.commands=null,this.onChanges=new ss.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Jl(this.skipLocationChange),replaceUrl:Jl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Jl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ti),m.Y36(No),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})();function Jl(n){return""===n||!!n}class _p{}class wp{preload(e,t){return Je(null)}}let z_=(()=>{class n{constructor(t,r,o,c){this.router=t,this.injector=o,this.preloadingStrategy=c,this.loader=new mp(o,r,E=>t.triggerEvent(new Ci(E)),E=>t.triggerEvent(new pa(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(Gn(t=>t instanceof cs),hi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const d=c._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else c.loadChildren&&!c.canLoad?o.push(this.preloadConfig(t,c)):c.children&&o.push(this.processRoutes(t,c.children));return(0,wn.D)(o).pipe((0,Hi.J)(),(0,Pt.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Je(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,qn.z)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ti),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(_p))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),xm=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ou?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof cs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new cu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Du=new m.OlP("ROUTER_CONFIGURATION"),bu=new m.OlP("ROUTER_FORROOT_GUARD"),W_=[De,{provide:Wt,useClass:Nn},{provide:ti,useFactory:function Q_(n,e,t,r,o,c,d={},g,E){const T=new ti(null,n,e,t,r,o,fu(c));return g&&(T.urlHandlingStrategy=g),E&&(T.routeReuseStrategy=E),function Rm(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,T),d.enableTracing&&T.events.subscribe(R=>{var N,z;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${R.constructor.name}`),console.log(R.toString()),console.log(R),null===(z=console.groupEnd)||void 0===z||z.call(console)}),T},deps:[Wt,Eu,De,m.zs3,m.Sil,gp,Du,[class Am{},new m.FiY],[class B_{},new m.FiY]]},Eu,{provide:No,useFactory:function J_(n){return n.routerState.root},deps:[ti]},z_,wp,class q_{preload(e,t){return t().pipe(Qr(()=>Je(null)))}},{provide:Du,useValue:{enableTracing:!1}}];function K_(){return new m.PXZ("Router",ti)}let Z_=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[W_,Mm(t),{provide:bu,useFactory:Y_,deps:[[ti,new m.FiY,new m.tp0]]},{provide:Du,useValue:r||{}},{provide:K,useFactory:QI,deps:[oe,[new m.tBr(xe),new m.FiY],Du]},{provide:xm,useFactory:Ep,deps:[ti,xl,Du]},{provide:_p,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:wp},{provide:m.PXZ,multi:!0,useFactory:K_},[Xl,{provide:m.ip1,multi:!0,useFactory:Ip,deps:[Xl]},{provide:Dp,useFactory:X_,deps:[Xl]},{provide:m.tb,multi:!0,useExisting:Dp}]]}}static forChild(t){return{ngModule:n,providers:[Mm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(bu,8),m.LFG(ti,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function Ep(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new xm(n,e,t)}function QI(n,e,t={}){return t.useHash?new le(n,e):new Me(n,e)}function Y_(n){return"guarded"}function Mm(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:gp,multi:!0,useValue:n}]}let Xl=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ss.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),c=this.injector.get(ti),d=this.injector.get(Du);return"disabled"===d.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?Je(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Du),o=this.injector.get(z_),c=this.injector.get(xm),d=this.injector.get(ti),g=this.injector.get(m.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),c.init(),d.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Ip(n){return n.appInitializer.bind(n)}function X_(n){return n.bootstrapListener.bind(n)}const Dp=new m.OlP("Router Initializer");let Th=(()=>{class n{constructor(){this.title="login"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container-fluid"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m._UZ(1,"router-outlet"),m.qZA())},directives:[Kl],styles:[""]}),n})();var uo=O(2011);const Nm_firebaseConfig={apiKey:"AIzaSyCU4xRHOYBiYHStG15rGFXBDJ_hD-XL7Co",authDomain:"shyto-login.firebaseapp.com",projectId:"shyto-login",storageBucket:"shyto-login.appspot.com",messagingSenderId:"487550983455",appId:"1:487550983455:web:807421692e96cc5f76242a",measurementId:"G-CBT4MX9Y7J"};var JI=O(4929),Ut=O(2090),Tu=O(9681),Po=O(1877),Ch=O(4859),DT=O(4986),ni=O(5813);function Om(){return(0,Yr.e)((n,e)=>{let t,r=!1;n.subscribe((0,mn.x)(e,o=>{const c=t;t=o,r&&e.next([c,o]),r=!0}))})}function XI(n,e){return n===e}O(5881);var tt,co=O(3942),Ee=O(5861),r0="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ea={},Pm=Pm||{},At=r0||self;function Ah(){}function km(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Sh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Dt="closure_uid_"+(1e9*Math.random()>>>0),s0=0;function o0(n,e,t){return n.call.apply(n.bind,arguments)}function a0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function mr(n,e,t){return(mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o0:a0).apply(null,arguments)}function Wi(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Fr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,c){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function Cu(){this.s=this.s,this.o=this.o}var Ia={};Cu.prototype.s=!1,Cu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function eD(n){return Object.prototype.hasOwnProperty.call(n,Dt)&&n[Dt]||(n[Dt]=++s0)}(this);delete Ia[n]}},Cu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bp=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Lm=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in o&&e.call(t,o[c],c,n)};function tD(n){return Array.prototype.concat.apply([],arguments)}function Tp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Vm(n){return/^[\s\xa0]*$/.test(n)}var ri,xh=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Lr(n,e){return-1!=n.indexOf(e)}function Mh(n,e){return n<e?-1:n>e?1:0}e:{var Cp=At.navigator;if(Cp){var nD=Cp.userAgent;if(nD){ri=nD;break e}}ri=""}function Bm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function u0(n){const e={};for(const t in n)e[t]=n[t];return e}var c0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function l0(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let c=0;c<c0.length;c++)t=c0[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ap(n){return Ap[" "](n),n}Ap[" "]=Ah;var Hm,n,rD=Lr(ri,"Opera"),Rh=Lr(ri,"Trident")||Lr(ri,"MSIE"),jm=Lr(ri,"Edge"),Sp=jm||Rh,d0=Lr(ri,"Gecko")&&!(Lr(ri.toLowerCase(),"webkit")&&!Lr(ri,"Edge"))&&!(Lr(ri,"Trident")||Lr(ri,"MSIE"))&&!Lr(ri,"Edge"),$m=Lr(ri.toLowerCase(),"webkit")&&!Lr(ri,"Edge");function iD(){var n=At.document;return n?n.documentMode:void 0}e:{var h0="",f0=(n=ri,d0?/rv:([^\);]+)(\)|;)/.exec(n):jm?/Edge\/([\d\.]+)/.exec(n):Rh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$m?/WebKit\/(\S+)/.exec(n):rD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(f0&&(h0=f0?f0[1]:""),Rh){var p0=iD();if(null!=p0&&p0>parseFloat(h0)){Hm=String(p0);break e}}Hm=h0}var CT={};var ST=At.document&&Rh&&(iD()||parseInt(Hm,10))||void 0,Au=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",Ah,e),At.removeEventListener("test",Ah,e)}catch(t){}return n}();function Ur(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Nh(n,e){if(Ur.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(d0){e:{try{Ap(e.nodeName);var o=!0;break e}catch(c){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:m0[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nh.Z.h.call(this)}}Ur.prototype.h=function(){this.defaultPrevented=!0},Fr(Nh,Ur);var m0={2:"touch",3:"pen",4:"mouse"};Nh.prototype.h=function(){Nh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Pc="closure_listenable_"+(1e6*Math.random()|0),y0=0;function Gm(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++y0,this.ca=this.fa=!1}function xp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function lo(n){this.src=n,this.g={},this.h=0}function Mp(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],o=bp(r,e);(c=0<=o)&&Array.prototype.splice.call(r,o,1),c&&(xp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qm(n,e,t,r){for(var o=0;o<n.length;++o){var c=n[o];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return o}return-1}lo.prototype.add=function(n,e,t,r,o){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var d=qm(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new Gm(e,this.src,c,!!r,o)).fa=t,n.push(e)),e};var Oh="closure_lm_"+(1e6*Math.random()|0),zm={};function Wm(n,e,t,r,o){if(r&&r.once)return ed(n,e,t,r,o);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Wm(n,e[c],t,r,o);return null}return t=Rp(t),n&&n[Pc]?n.N(e,t,Sh(r)?!!r.capture:!!r,o):v0(n,e,t,!1,r,o)}function v0(n,e,t,r,o,c){if(!e)throw Error("Invalid event type");var d=Sh(o)?!!o.capture:!!o,g=Su(n);if(g||(n[Oh]=g=new lo(n)),(t=g.add(e,t,r,d,c)).proxy)return t;if(r=function oD(){var e=kh;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Au||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Fc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ed(n,e,t,r,o){if(Array.isArray(e)){for(var c=0;c<e.length;c++)ed(n,e[c],t,r,o);return null}return t=Rp(t),n&&n[Pc]?n.O(e,t,Sh(r)?!!r.capture:!!r,o):v0(n,e,t,!0,r,o)}function kc(n,e,t,r,o){if(Array.isArray(e))for(var c=0;c<e.length;c++)kc(n,e[c],t,r,o);else r=Sh(r)?!!r.capture:!!r,t=Rp(t),n&&n[Pc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qm(c=n.g[e],t,r,o))&&(xp(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Su(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qm(e,t,r,o)),(t=-1<n?e[n]:null)&&Ph(t))}function Ph(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Pc])Mp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Fc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Su(e))?(Mp(t,n),0==t.h&&(t.src=null,e[Oh]=null)):xp(n)}}}function Fc(n){return n in zm?zm[n]:zm[n]="on"+n}function kh(n,e){if(n.ca)n=!0;else{e=new Nh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ph(n),n=t.call(r,e)}return n}function Su(n){return(n=n[Oh])instanceof lo?n:null}var Km="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rp(n){return"function"==typeof n?n:(n[Km]||(n[Km]=function(e){return n.handleEvent(e)}),n[Km])}function Dr(){Cu.call(this),this.i=new lo(this),this.P=this,this.I=null}function br(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ur(e,n);else if(e instanceof Ur)e.target=e.target||n;else{var o=e;l0(e=new Ur(r,n),o)}if(o=!0,t)for(var c=t.length-1;0<=c;c--){var d=e.g=t[c];o=td(d,r,!0,e)&&o}if(o=td(d=e.g=n,r,!0,e)&&o,o=td(d,r,!1,e)&&o,t)for(c=0;c<t.length;c++)o=td(d=e.g=t[c],r,!1,e)&&o}function td(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,c=0;c<e.length;++c){var d=e[c];if(d&&!d.ca&&d.capture==t){var g=d.listener,E=d.ia||d.src;d.fa&&Mp(n.i,d),o=!1!==g.call(E,r)&&o}}return o&&!r.defaultPrevented}Fr(Dr,Cu),Dr.prototype[Pc]=!0,Dr.prototype.removeEventListener=function(n,e,t,r){kc(this,n,e,t,r)},Dr.prototype.M=function(){if(Dr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)xp(t[r]);delete n.g[e],n.h--}}this.I=null},Dr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Dr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Np=At.JSON.stringify;function Op(){var n=E0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ym,Zm=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xT,n=>n.reset());class xT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _0(n){At.setTimeout(()=>{throw n},0)}function Pp(n,e){Ym||function w0(){var n=At.Promise.resolve(void 0);Ym=function(){n.then(ps)}}(),Qm||(Ym(),Qm=!0),E0.add(n,e)}var Qm=!1,E0=new class aD{constructor(){this.h=this.g=null}add(e,t){const r=Zm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ps(){for(var n;n=Op();){try{n.h.call(n.g)}catch(t){_0(t)}var e=Zm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Qm=!1}function kp(n,e){Dr.call(this),this.h=n||1,this.g=e||At,this.j=mr(this.kb,this),this.l=Date.now()}function Jm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function I0(n,e,t){if("function"==typeof n)t&&(n=mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function uD(n){n.g=I0(()=>{n.g=null,n.i&&(n.i=!1,uD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fr(kp,Dr),(tt=kp.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),br(this,"tick"),this.da&&(Jm(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){kp.Z.M.call(this),Jm(this),delete this.g};class D0 extends Cu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uD(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fp(n){Cu.call(this),this.h=n,this.g={}}Fr(Fp,Cu);var b0=[];function Lp(n,e,t,r){Array.isArray(t)||(t&&(b0[0]=t.toString()),t=b0);for(var o=0;o<t.length;o++){var c=Wm(e,t[o],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Xm(n){Bm(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ph(e)},n),n.g={}}function Up(){this.g=!0}function Lc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function T0(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var c=o[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var d=1;d<o.length;d++)o[d]=""}}}return Np(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}Fp.prototype.M=function(){Fp.Z.M.call(this),Xm(this)},Fp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Up.prototype.Aa=function(){this.g=!1},Up.prototype.info=function(){};var Uc={},C0=null;function Fh(){return C0=C0||new Dr}function ey(n){Ur.call(this,Uc.Ma,n)}function Lh(n){const e=Fh();br(e,new ey(e,n))}function ho(n,e){Ur.call(this,Uc.STAT_EVENT,n),this.stat=e}function ii(n){const e=Fh();br(e,new ho(e,n))}function A0(n,e){Ur.call(this,Uc.Na,n),this.size=e}function Uh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}Uc.Ma="serverreachability",Fr(ey,Ur),Uc.STAT_EVENT="statevent",Fr(ho,Ur),Uc.Na="timingevent",Fr(A0,Ur);var ty={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ny={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ry(){}function x0(){}ry.prototype.h=null;var nd,Vc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function iy(){Ur.call(this,"d")}function sy(){Ur.call(this,"c")}function rd(){}function Vh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Fp(this),this.P=oy,this.W=new kp(n=Sp?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Vp}function Vp(){this.i=null,this.g="",this.h=!1}Fr(iy,Ur),Fr(sy,Ur),Fr(rd,ry),rd.prototype.g=function(){return new XMLHttpRequest},rd.prototype.i=function(){return{}},nd=new rd;var oy=45e3,Bp={},jp={};function ay(n,e,t){n.K=1,n.v=Gp(fo(e)),n.s=t,n.U=!0,$p(n,null)}function $p(n,e){n.F=Date.now(),id(n),n.A=fo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),dy(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Vp,n.g=my(n.l,t?e:null,!n.s),0<n.O&&(n.L=new D0(mr(n.Ia,n,n.g),n.O)),Lp(n.V,n.g,"readystatechange",n.gb),e=n.H?u0(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Lh(1),function cD(n,e,t,r,o,c){n.info(function(){if(n.g)if(c)for(var d="",g=c.split("&"),E=0;E<g.length;E++){var T=g[E].split("=");if(1<T.length){var R=T[0];T=T[1];var N=R.split("_");d=2<=N.length&&"type"==N[1]?d+(R+"=")+T+"&":d+(R+"=redacted&")}}else d=null;else d=c;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function hD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function M0(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=R0(n,t),o==jp){4==e&&(n.o=4,ii(14),r=!1),Lc(n.j,n.m,null,"[Incomplete Response]");break}if(o==Bp){n.o=4,ii(15),Lc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Lc(n.j,n.m,o,null),od(n,o)}hD(n)&&o!=jp&&o!=Bp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ku(e),e.L=!0,ii(11))):(Lc(n.j,n.m,t,"[Invalid Chunked Response]"),Ai(n),sd(n))}function R0(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?jp:(t=Number(e.substring(t,r)),isNaN(t)?Bp:(r+=1)+t>e.length?jp:(e=e.substr(r,t),n.C=r+t,e))}function id(n){n.Y=Date.now()+n.P,uy(n,n.P)}function uy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Uh(mr(n.eb,n),e)}function Bh(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function sd(n){0==n.l.G||n.I||Hc(n.l,n)}function Ai(n){Bh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Jm(n.W),Xm(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function od(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||U0(t.i,n)))if(t.I=n.N,!n.J&&U0(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(T){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Uh(mr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ba(t),Qp(t)}Pu(t),ii(18)}if(1>=hy(t.i)&&t.ka){try{t.ka()}catch(T){}t.ka=void 0}}else Hs(t,11)}else if((n.J||t.g==n)&&ba(t),!Vm(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let T=o[e];if(t.U=T[0],T=T[1],2==t.G)if("c"==T[0]){t.J=T[1],t.la=T[2];const R=T[3];null!=R&&(t.ma=R,t.h.info("VER="+t.ma));const N=T[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const z=T[5];null!=z&&"number"==typeof z&&0<z&&(t.K=r=1.5*z,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const ee=n.g;if(ee){const Ie=ee.g?ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ie){var c=r.i;!c.g&&(Lr(Ie,"spdy")||Lr(Ie,"quic")||Lr(Ie,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(zp(c,c.h),c.h=null))}if(r.D){const je=ee.g?ee.g.getResponseHeader("X-HTTP-Session-Id"):null;je&&(r.sa=je,vn(r.F,r.D,je))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=zc(r,r.H?r.la:null,r.W),d.J){V0(r.i,d);var g=d,E=r.K;E&&g.setTimeout(E),g.B&&(Bh(g),id(g)),r.g=d}else Xp(r);0<t.l.length&&Ru(t)}else"stop"!=T[0]&&"close"!=T[0]||Hs(t,7);else 3==t.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?Hs(t,7):gy(t):"noop"!=T[0]&&t.j&&t.j.wa(T),t.A=0)}Lh(4)}catch(T){}}function cy(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(km(n)||"string"==typeof n)Lm(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(km(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function fD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(km(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var c=0;c<o;c++)e.call(void 0,r[c],t&&t[c],n)}}function jh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof jh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function $h(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];xu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)xu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function xu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=Vh.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==Da(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const R=Da(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>R)&&(3!=R||Sp||this.g&&(this.h.h||this.g.ga()||Z0(this.g)))){this.I||4!=R||7==e||Lh(8==e||0>=N?3:2),Bh(this);var t=this.g.ba();this.N=t;t:if(hD(this)){var r=Z0(this.g);n="";var o=r.length,c=4==Da(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ai(this),sd(this);var d="";break t}this.h.i=new At.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function lD(n,e,t,r,o,c,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+c+" "+d})}(this.j,this.u,this.A,this.m,this.X,R,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,E=this.g;if((g=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vm(g)){var T=g;break t}}T=null}if(!(t=T)){this.i=!1,this.o=3,ii(12),Ai(this),sd(this);break e}Lc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,od(this,t)}this.U?(M0(this,R,d),Sp&&this.i&&3==R&&(Lp(this.V,this.W,"tick",this.fb),this.W.start())):(Lc(this.j,this.m,d,null),od(this,d)),4==R&&Ai(this),this.i&&!this.I&&(4==R?Hc(this.l,this):(this.i=!1,id(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,ii(12)):(this.o=0,ii(13)),Ai(this),sd(this)}}}catch(R){}},tt.fb=function(){if(this.g){var n=Da(this.g),e=this.g.ga();this.C<e.length&&(Bh(this),M0(this,n,e),this.i&&4!=n&&id(this))}},tt.cancel=function(){this.I=!0,Ai(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function dD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Lh(3),ii(17)),Ai(this),this.o=2,sd(this)):uy(this,this.Y-n)},(tt=jh.prototype).R=function(){$h(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return $h(this),this.g.concat()},tt.get=function(n,e){return xu(this.h,n)?this.h[n]:e},tt.set=function(n,e){xu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],c=this.get(o);n.call(e,c,o,this)}};var Hp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Bc){this.g=void 0!==e?e:n.g,Gh(this,n.j),this.s=n.s,qh(this,n.i),zh(this,n.m),this.l=n.l,e=n.h;var t=new Wh;t.i=e.i,e.g&&(t.g=new jh(e.g),t.h=e.h),N0(this,t),this.o=n.o}else n&&(t=String(n).match(Hp))?(this.g=!!e,Gh(this,t[1]||"",!0),this.s=ko(t[2]||""),qh(this,t[3]||"",!0),zh(this,t[4]),this.l=ko(t[5]||"",!0),N0(this,t[6]||"",!0),this.o=ko(t[7]||"")):(this.g=!!e,this.h=new Wh(null,this.g))}function fo(n){return new Bc(n)}function Gh(n,e,t){n.j=t?ko(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function qh(n,e,t){n.i=t?ko(e,!0):e}function zh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function N0(n,e,t){e instanceof Wh?(n.h=e,function k0(n,e){e&&!n.j&&(Tr(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(qp(this,r),dy(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ad(e,yD)),n.h=new Wh(e,n.g))}function vn(n,e,t){n.h.set(e,t)}function Gp(n){return vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ko(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ad(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,gD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Bc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ad(e,P0,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ad(e,P0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ad(t,"/"==t.charAt(0)?mD:ud,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ad(t,vD)),n.join("")};var P0=/[#\/\?@]/g,ud=/[#\?:]/g,mD=/[#\?]/g,yD=/[#\?@]/g,vD=/#/g;function Wh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Tr(n){n.g||(n.g=new jh,n.h=0,n.i&&function Hh(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var c=n[t].substring(0,r);o=n[t].substring(r+1)}else c=n[t];e(c,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qp(n,e){Tr(n),e=jc(n,e),xu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,xu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&$h(n)))}function ly(n,e){return Tr(n),e=jc(n,e),xu(n.g.h,e)}function dy(n,e,t){qp(n,e),0<t.length&&(n.i=null,n.g.set(jc(n,e),Tp(t)),n.h+=t.length)}function jc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function F0(n){this.l=n||wD,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=Wh.prototype).add=function(n,e){Tr(this),this.i=null,n=jc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){Tr(this),this.g.forEach(function(t,r){Lm(t,function(o){n.call(e,o,r,this)},this)},this)},tt.T=function(){Tr(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],c=0;c<o.length;c++)t.push(e[r]);return t},tt.R=function(n){Tr(this);var e=[];if("string"==typeof n)ly(this,n)&&(e=tD(e,this.g.get(jc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=tD(e,n[t])}return e},tt.set=function(n,e){return Tr(this),this.i=null,ly(this,n=jc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var d=o;""!==r[c]&&(d+="="+encodeURIComponent(String(r[c]))),n.push(d)}}return this.i=n.join("&")};var wD=10;function L0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function hy(n){return n.h?1:n.g?n.g.size:0}function U0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function zp(n,e){n.g?n.g.add(e):n.h=e}function V0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function B0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Tp(n.i)}function j0(){}function MT(){this.g=new j0}function fy(n,e,t){const r=t||"";try{cy(n,function(o,c){let d=o;Sh(o)&&(d=Np(o)),e.push(r+c+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Kh(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(c){}}function cd(n){this.l=n.$b||null,this.j=n.ib||!1}function py(n,e){Dr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=gs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}F0.prototype.cancel=function(){if(this.i=B0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},j0.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},j0.prototype.parse=function(n){return At.JSON.parse(n,void 0)},Fr(cd,ry),cd.prototype.g=function(){return new py(this.l,this.j)},cd.prototype.i=function(n){return function(){return n}}({}),Fr(py,Dr);var gs=0;function ID(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Wp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ld(n)}function ld(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=py.prototype).open=function(n,e){if(this.readyState!=gs)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ld(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wp(this)),this.readyState=gs},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ld(this)),this.g&&(this.readyState=3,ld(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==At.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ID(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Wp(this):ld(this),3==this.readyState&&ID(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Wp(this))},tt.Ta=function(n){this.g&&(this.response=n,Wp(this))},tt.ha=function(){this.g&&Wp(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(py.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var $0=At.JSON.parse;function lr(n){Dr.call(this),this.headers=new jh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=H0,this.K=this.L=!1}Fr(lr,Dr);var H0="",RT=/^https?$/i,G0=["POST","PUT"];function DD(n){return"content-type"==n.toLowerCase()}function Kp(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,z0(n),Zp(n)}function z0(n){n.D||(n.D=!0,br(n,"complete"),br(n,"error"))}function W0(n){if(n.h&&void 0!==Pm&&(!n.C[1]||4!=Da(n)||2!=n.ba()))if(n.v&&4==Da(n))I0(n.Fa,0,n);else if(br(n,"readystatechange"),4==Da(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Hp)[1]||null;if(!o&&At.self&&At.self.location){var c=At.self.location.protocol;o=c.substr(0,c.length-1)}r=!RT.test(o?o.toLowerCase():"")}t=r}if(t)br(n,"complete"),br(n,"success");else{n.m=6;try{var d=2<Da(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.ba()+"]",z0(n)}}finally{Zp(n)}}}function Zp(n,e){if(n.g){K0(n);const t=n.g,r=n.C[0]?Ah:null;n.g=null,n.C=null,e||br(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function K0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function Da(n){return n.g?n.g.readyState:0}function Z0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case H0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Mu(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Yp(n){let e="";return Bm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):vn(n,e,t))}function Zh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function dd(n){this.za=0,this.l=[],this.h=new Up,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Zh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Zh("baseRetryDelayMs",5e3,n),this.$a=Zh("retryDelaySeedMs",1e4,n),this.Ya=Zh("forwardChannelMaxRetries",2,n),this.ra=Zh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new F0(n&&n.concurrentRequestLimit),this.Ca=new MT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function gy(n){if(Jp(n),3==n.G){var e=n.V++,t=fo(n.F);vn(t,"SID",n.J),vn(t,"RID",e),vn(t,"TYPE","terminate"),Ou(n,t),(e=new Vh(n,n.h,e,void 0)).K=2,e.v=Gp(fo(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=my(e.l,null),e.g.ea(e.v)),e.F=Date.now(),id(e)}qc(n)}function Qp(n){n.g&&(ku(n),n.g.cancel(),n.g=null)}function Jp(n){Qp(n),n.u&&(At.clearTimeout(n.u),n.u=null),ba(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function $s(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ru(n)}function Ru(n){L0(n.i)||n.m||(n.m=!0,Pp(n.Ha,n),n.C=0)}function Nu(n,e){var t;t=e?e.m:n.V++;const r=fo(n.F);vn(r,"SID",n.J),vn(r,"RID",t),vn(r,"AID",n.U),Ou(n,r),n.o&&n.s&&Mu(r,n.o,n.s),t=new Vh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ms(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),zp(n.i,t),ay(t,r,e)}function Ou(n,e){n.j&&cy({},function(t,r){vn(e,r,t)})}function ms(n,e,t){t=Math.min(n.l.length,t);var r=n.j?mr(n.j.Oa,n.j,n):null;e:{var o=n.l;let c=-1;for(;;){const d=["count="+t];-1==c?0<t?(c=o[0].h,d.push("ofs="+c)):c=0:d.push("ofs="+c);let g=!0;for(let E=0;E<t;E++){let T=o[E].h;const R=o[E].g;if(T-=c,0>T)c=Math.max(0,o[E].h-100),g=!1;else try{fy(R,d,"req"+T+"_")}catch(N){r&&r(R)}}if(g){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Xp(n){n.g||n.u||(n.Y=1,Pp(n.Ga,n),n.A=0)}function Pu(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Uh(mr(n.Ga,n),Gc(n,n.A)),n.A++,0))}function ku(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function $c(n){n.g=new Vh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=fo(n.oa);vn(e,"RID","rpc"),vn(e,"SID",n.J),vn(e,"CI",n.N?"0":"1"),vn(e,"AID",n.U),Ou(n,e),vn(e,"TYPE","xmlhttp"),n.o&&n.s&&Mu(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Gp(fo(e)),t.s=null,t.U=!0,$p(t,n)}function ba(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function Hc(n,e){var t=null;if(n.g==e){ba(n),ku(n),n.g=null;var r=2}else{if(!U0(n.i,e))return;t=e.D,V0(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;br(r=Fh(),new A0(r,t,e,o)),Ru(n)}else Xp(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function gi(n,e){return!(hy(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Uh(mr(n.Ha,n,e),Gc(n,n.C)),n.C++,0)))}(n,e)||2==r&&Pu(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Hs(n,5);break;case 4:Hs(n,10);break;case 3:Hs(n,6);break;default:Hs(n,2)}}function Gc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Hs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=mr(n.jb,n);t||(t=new Bc("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||Gh(t,"https"),Gp(t)),function ED(n,e){const t=new Up;if(At.Image){const r=new Image;r.onload=Wi(Kh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Wi(Kh,t,r,"TestLoadImage: error",!1,e),r.onabort=Wi(Kh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wi(Kh,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ii(2);n.G=0,n.j&&n.j.va(e),qc(n),Jp(n)}function qc(n){n.G=0,n.I=-1,n.j&&((0!=B0(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Tp(n.l),n.l.length=0),n.j.ua())}function zc(n,e,t){let r=function pD(n){return n instanceof Bc?fo(n):new Bc(n,void 0)}(t);if(""!=r.i)e&&qh(r,e+"."+r.i),zh(r,r.m);else{const o=At.location;r=function O0(n,e,t,r){var o=new Bc(null,void 0);return n&&Gh(o,n),e&&qh(o,e),t&&zh(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Bm(n.aa,function(o,c){vn(r,c,o)}),t=n.sa,(e=n.D)&&t&&vn(r,e,t),vn(r,"VER",n.ma),Ou(n,r),r}function my(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lr(t&&n.Ba&&!n.qa?new cd({ib:!0}):n.qa)).L=n.H,e}function yy(){}function Yh(){if(Rh&&!(10<=Number(ST)))throw Error("Environmental error: no available transport.")}function Ki(n,e){Dr.call(this),this.g=new dd(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Vm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Wc(this)}function vy(n){iy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _y(){sy.call(this),this.status=1}function Wc(n){this.g=n}(tt=lr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nd.g(),this.C=function S0(n){return n.h||(n.h=n.i())}(this.u?this.u:nd),this.g.onreadystatechange=mr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void Kp(this,c)}n=t||"";const o=new jh(this.headers);r&&cy(r,function(c,d){o.set(d,c)}),r=function Um(n){e:{var e=DD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=At.FormData&&n instanceof At.FormData,!(0<=bp(G0,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(c,d){this.g.setRequestHeader(d,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{K0(this),0<this.B&&((this.K=function q0(n){return Rh&&function AT(){return function TT(n){var e=CT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=xh(String(Hm)).split("."),t=xh("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",c=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;n=Mh(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||Mh(0==o[2].length,0==c[2].length)||Mh(o[2],c[2]),o=o[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.pa,this)):this.A=I0(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){Kp(this,c)}},tt.pa=function(){void 0!==Pm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,br(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,br(this,"complete"),br(this,"abort"),Zp(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zp(this,!0)),lr.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?W0(this):this.cb())},tt.cb=function(){W0(this)},tt.ba=function(){try{return 2<Da(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),$0(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=dd.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Vh(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=u0(c),l0(c,this.P)):c=this.P),null===this.o&&(o.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ms(this,o,e),vn(t=fo(this.F),"RID",n),vn(t,"CVER",22),this.D&&vn(t,"X-HTTP-Session-Id",this.D),Ou(this,t),this.o&&c&&Mu(t,this.o,c),zp(this.i,o),this.Ra&&vn(t,"TYPE","init"),this.ja?(vn(t,"$req",e),vn(t,"SID","null"),o.$=!0,ay(o,t,null)):ay(o,t,e),this.G=2}}else 3==this.G&&(n?Nu(this,n):0==this.l.length||L0(this.i)||Nu(this))},tt.Ga=function(){if(this.u=null,$c(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Uh(mr(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ii(10),Qp(this),$c(this))},tt.ab=function(){null!=this.v&&(this.v=null,Qp(this),Pu(this),ii(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ii(2)):(this.h.info("Failed to ping google.com"),ii(1))},(tt=yy.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},Yh.prototype.g=function(n,e){return new Ki(n,e)},Fr(Ki,Dr),Ki.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Pp(mr(n.hb,n,e))),ii(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=zc(n,null,n.W),Ru(n)},Ki.prototype.close=function(){gy(this.g)},Ki.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,$s(this.g,e)}else this.v?((e={}).__data__=Np(n),$s(this.g,e)):$s(this.g,n)},Ki.prototype.M=function(){this.g.j=null,delete this.j,gy(this.g),delete this.g,Ki.Z.M.call(this)},Fr(vy,iy),Fr(_y,sy),Fr(Wc,yy),Wc.prototype.xa=function(){br(this.g,"a")},Wc.prototype.wa=function(n){br(this.g,new vy(n))},Wc.prototype.va=function(n){br(this.g,new _y(n))},Wc.prototype.ua=function(){br(this.g,"b")},Yh.prototype.createWebChannel=Yh.prototype.g,Ki.prototype.send=Ki.prototype.u,Ki.prototype.open=Ki.prototype.m,Ki.prototype.close=Ki.prototype.close,ty.NO_ERROR=0,ty.TIMEOUT=8,ty.HTTP_ERROR=6,ny.COMPLETE="complete",x0.EventType=Vc,Vc.OPEN="a",Vc.CLOSE="b",Vc.ERROR="c",Vc.MESSAGE="d",Dr.prototype.listen=Dr.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.La,lr.prototype.getLastErrorCode=lr.prototype.Da,lr.prototype.getStatus=lr.prototype.ba,lr.prototype.getResponseJson=lr.prototype.Qa,lr.prototype.getResponseText=lr.prototype.ga,lr.prototype.send=lr.prototype.ea;var Y0=Ea.createWebChannelTransport=function(){return new Yh},Q0=Ea.getStatEventTarget=function(){return Fh()},wy=Ea.ErrorCode=ty,J0=Ea.EventType=ny,bD=Ea.Event=Uc,Ey=Ea.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},X0=Ea.FetchXmlHttpFactory=cd,eg=Ea.WebChannel=x0,TD=Ea.XhrIo=lr;const Iy="@firebase/firestore";class si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");let Kc="9.6.7";const Fu=new Po.Yd("@firebase/firestore");function Dy(){return Fu.logLevel}function Fe(n,...e){if(Fu.logLevel<=Po.in.DEBUG){const t=e.map(by);Fu.debug(`Firestore (${Kc}): ${n}`,...t)}}function tr(n,...e){if(Fu.logLevel<=Po.in.ERROR){const t=e.map(by);Fu.error(`Firestore (${Kc}): ${n}`,...t)}}function Zc(n,...e){if(Fu.logLevel<=Po.in.WARN){const t=e.map(by);Fu.warn(`Firestore (${Kc}): ${n}`,...t)}}function by(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: `+n;throw tr(e),new Error(e)}function bt(n,e){n||lt()}function Ke(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Ut.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Yc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(si.UNAUTHENTICATED))}shutdown(){}}class ew{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class AD{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const c=T=>this.i!==o?(o=this.i,t(T)):Promise.resolve();let d=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Vr,e.enqueueRetryable(()=>c(this.currentUser))};const g=()=>{const T=d;e.enqueueRetryable((0,Ee.Z)(function*(){yield T.promise,yield c(r.currentUser)}))},E=T=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(T=>E(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?E(T):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Vr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new Yc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new si(e)}}class tw{constructor(e,t,r){this.type="FirstParty",this.user=si.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class tg{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new tw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rw{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=c=>{null!=c.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.p;return this.p=c.token,Fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.g.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.g.getImmediate({optional:!0});c?o(c):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.p=t.token,new nw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ys{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function SD(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ys.A=-1;class iw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=SD(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Qc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function sw(n){return n+"\0"}class Cr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Cr.fromMillis(Date.now())}static fromDate(e){return Cr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Cr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new Cr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ng(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Qh{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Qh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=e.get(o),d=t.get(o);if(c<d)return-1;if(c>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends Qh{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const Jh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends Qh{construct(e,t,r){return new Ar(e,t,r)}static isValidIdentifier(e){return Jh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ar(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(0===r.length)throw new Oe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Oe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Oe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(c(),o++)}if(c(),d)throw new Oe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(t)}static emptyPath(){return new Ar([])}}class Lu{constructor(e){this.fields=e,e.sort(Ar.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Sr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(e);return new Sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const ig=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function po(n){if(bt(!!n),"string"==typeof n){let e=0;const t=ig.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:On(n.seconds),nanos:On(n.nanos)}}function On(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function fd(n){return"string"==typeof n?Sr.fromBase64String(n):Sr.fromUint8Array(n)}function Cy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sg(n){const e=n.mapValue.fields.__previous_value__;return Cy(e)?sg(e):e}function Jc(n){const e=po(n.mapValue.fields.__local_write_time__.timestampValue);return new Cr(e.seconds,e.nanos)}class ow{constructor(e,t,r,o,c,d,g,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=E}}class Uu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Uu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Uu&&e.projectId===this.projectId&&e.database===this.database}}function Ta(n){return null==n}function pd(n){return 0===n&&1/n==-1/0}function Ay(n){return"number"==typeof n&&Number.isInteger(n)&&!pd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(sn.fromString(e))}static fromName(e){return new Qe(sn.fromString(e).popFirst(5))}static empty(){return new Qe(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new sn(e.slice()))}}const aw={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function Xc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cy(n)?4:10:lt()}function Gs(n,e){if(n===e)return!0;const t=Xc(n);if(t!==Xc(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jc(n).isEqual(Jc(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=po(r.timestampValue),d=po(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,fd(n.bytesValue).isEqual(fd(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return On(r.geoPointValue.latitude)===On(o.geoPointValue.latitude)&&On(r.geoPointValue.longitude)===On(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return On(r.integerValue)===On(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=On(r.doubleValue),d=On(o.doubleValue);return c===d?pd(c)===pd(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Qc(n.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:return function(r,o){const c=r.mapValue.fields||{},d=o.mapValue.fields||{};if(ng(c)!==ng(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(void 0===d[g]||!Gs(c[g],d[g])))return!1;return!0}(n,e);default:return lt()}var o}function gd(n,e){return void 0!==(n.values||[]).find(t=>Gs(t,e))}function Vu(n,e){if(n===e)return 0;const t=Xc(n),r=Xc(e);if(t!==r)return Ht(t,r);switch(t){case 0:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(o,c){const d=On(o.integerValue||o.doubleValue),g=On(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return uw(n.timestampValue,e.timestampValue);case 4:return uw(Jc(n),Jc(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(o,c){const d=fd(o),g=fd(c);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const d=o.split("/"),g=c.split("/");for(let E=0;E<d.length&&E<g.length;E++){const T=Ht(d[E],g[E]);if(0!==T)return T}return Ht(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const d=Ht(On(o.latitude),On(c.latitude));return 0!==d?d:Ht(On(o.longitude),On(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,c){const d=o.values||[],g=c.values||[];for(let E=0;E<d.length&&E<g.length;++E){const T=Vu(d[E],g[E]);if(T)return T}return Ht(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,c){const d=o.fields||{},g=Object.keys(d),E=c.fields||{},T=Object.keys(E);g.sort(),T.sort();for(let R=0;R<g.length&&R<T.length;++R){const N=Ht(g[R],T[R]);if(0!==N)return N;const z=Vu(d[g[R]],E[T[R]]);if(0!==z)return z}return Ht(g.length,T.length)}(n.mapValue,e.mapValue);default:throw lt()}}function uw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=po(n),r=po(e),o=Ht(t.seconds,r.seconds);return 0!==o?o:Ht(t.nanos,r.nanos)}function md(n){return Sy(n)}function Sy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=po(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?fd(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",c=!0;for(const d of r.values||[])c?c=!1:o+=",",o+=Sy(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let c="{",d=!0;for(const g of o)d?d=!1:c+=",",c+=`${g}:${Sy(r.fields[g])}`;return c+"}"}(n.mapValue):lt();var e}function og(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xh(n){return!!n&&"integerValue"in n}function yd(n){return!!n&&"arrayValue"in n}function xy(n){return!!n&&"nullValue"in n}function My(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ef(n){return!!n&&"mapValue"in n}function vd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vd(n.arrayValue.values[t]);return e}return Object.assign({},n)}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ef(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vd(t)}setAll(e){let t=Ar.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=vd(d):o.push(g.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());ef(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];ef(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){hd(t,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new oi(vd(this.value))}}function Ry(n){const e=[];return hd(n.fields,(t,r)=>{const o=new Ar([t]);if(ef(r)){const c=Ry(r.mapValue).fields;if(0===c.length)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)}),new Lu(e)}class Pn{constructor(e,t,r,o,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Pn(e,0,vt.min(),vt.min(),oi.empty(),0)}static newFoundDocument(e,t,r){return new Pn(e,1,t,vt.min(),r,0)}static newNoDocument(e,t){return new Pn(e,2,t,vt.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,vt.min(),oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let ag=(()=>{class n{constructor(t,r,o,c){this.indexId=t,this.collectionGroup=r,this.fields=o,this.indexState=c}}return n.UNKNOWN_ID=-1,n})();class Ny{constructor(e,t){this.fieldPath=e,this.kind=t}}class tf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tf(0,ug.min())}}class ug{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ug(vt.min(),Qe.empty(),-1)}}class cw{constructor(e,t=null,r=[],o=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=d,this.endAt=g,this.P=null}}function lw(n,e=null,t=[],r=[],o=null,c=null,d=null){return new cw(n,e,t,r,o,c,d)}function Wn(n){const e=Ke(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+md(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ta(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>md(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>md(r)).join(",")),e.P=t}return e.P}function cg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!gw(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Gs(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!go(n.startAt,e.startAt)&&go(n.endAt,e.endAt)}function lg(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class mi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new xD(e,t,r):"array-contains"===t?new MD(e,r):"in"===t?new RD(e,r):"not-in"===t?new pw(e,r):"array-contains-any"===t?new ND(e,r):new mi(e,t,r)}static v(e,t,r){return"in"===t?new hw(e,r):new fw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(Vu(t,this.value)):null!==t&&Xc(this.value)===Xc(t)&&this.V(Vu(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class xD extends mi{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.V(t)}}class hw extends mi{constructor(e,t){super(e,"in",t),this.keys=el(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fw extends mi{constructor(e,t){super(e,"not-in",t),this.keys=el(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function el(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class MD extends mi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yd(t)&&gd(t.arrayValue,this.value)}}class RD extends mi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gd(this.value.arrayValue,t)}}class pw extends mi{constructor(e,t){super(e,"not-in",t)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gd(this.value.arrayValue,t)}}class ND extends mi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gd(this.value.arrayValue,r))}}class tl{constructor(e,t){this.position=e,this.inclusive=t}}class nf{constructor(e,t="asc"){this.field=e,this.dir=t}}function gw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Oy(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const c=e[o],d=n.position[o];if(r=c.field.isKeyField()?Qe.comparator(Qe.fromName(d.referenceValue),t.key):Vu(d,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function go(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gs(n.position[t],e.position[t]))return!1;return!0}class Ca{constructor(e,t=null,r=[],o=[],c=null,d="F",g=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=E,this.D=null,this.C=null}}function mw(n,e,t,r,o,c,d,g){return new Ca(n,e,t,r,o,c,d,g)}function Si(n){return new Ca(n)}function Zi(n){return!Ta(n.limit)&&"F"===n.limitType}function Yi(n){return!Ta(n.limit)&&"L"===n.limitType}function dg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function hg(n){for(const e of n.filters)if(e.S())return e.field;return null}function Py(n){return null!==n.collectionGroup}function _d(n){const e=Ke(n);if(null===e.D){e.D=[];const t=hg(e),r=dg(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new nf(t)),e.D.push(new nf(Ar.keyField(),"asc"));else{let o=!1;for(const c of e.explicitOrderBy)e.D.push(c),c.field.isKeyField()&&(o=!0);if(!o){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new nf(Ar.keyField(),c))}}}return e.D}function qs(n){const e=Ke(n);if(!e.C)if("F"===e.limitType)e.C=lw(e.path,e.collectionGroup,_d(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of _d(e))t.push(new nf(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new tl(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new tl(e.startAt.position,!e.startAt.inclusive):null;e.C=lw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function yw(n,e,t){return new Ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nl(n,e){return cg(qs(n),qs(e))&&n.limitType===e.limitType}function wd(n){return`${Wn(qs(n))}|lt:${n.limitType}`}function ky(n){return`Query(target=${function dw(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${md(r.value)}`;var r}).join(", ")}]`),Ta(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>md(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>md(t)).join(",")),`Target(${e})`}(qs(n))}; limitType=${n.limitType})`}function fg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,c,d){const g=Oy(o,c,d);return o.inclusive?g<=0:g<0}(t.startAt,_d(t),r)||t.endAt&&!function(o,c,d){const g=Oy(o,c,d);return o.inclusive?g>=0:g>0}(t.endAt,_d(t),r)));var t,r}function vw(n){return(e,t)=>{let r=!1;for(const o of _d(n)){const c=_w(o,e,t);if(0!==c)return c;r=r||o.field.isKeyField()}return 0}}function _w(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(o,c,d){const g=c.data.field(o),E=d.data.field(o);return null!==g&&null!==E?Vu(g,E):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function Fy(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pd(e)?"-0":e}}function rf(n){return{integerValue:""+n}}function ww(n,e){return Ay(e)?rf(e):Fy(n,e)}class sf{constructor(){this._=void 0}}function Ew(n,e,t){return n instanceof rl?function(r,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof Bu?Uy(n,e):n instanceof ju?Vy(n,e):function(r,o){const c=pg(r,o),d=By(c)+By(r.k);return Xh(c)&&Xh(r.k)?rf(d):Fy(r.O,d)}(n,e)}function Ly(n,e,t){return n instanceof Bu?Uy(n,e):n instanceof ju?Vy(n,e):t}function pg(n,e){return n instanceof il?Xh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class rl extends sf{}class Bu extends sf{constructor(e){super(),this.elements=e}}function Uy(n,e){const t=jy(e);for(const r of n.elements)t.some(o=>Gs(o,r))||t.push(r);return{arrayValue:{values:t}}}class ju extends sf{constructor(e){super(),this.elements=e}}function Vy(n,e){let t=jy(e);for(const r of n.elements)t=t.filter(o=>!Gs(o,r));return{arrayValue:{values:t}}}class il extends sf{constructor(e,t){super(),this.O=e,this.k=t}}function By(n){return On(n.integerValue||n.doubleValue)}function jy(n){return yd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class of{constructor(e,t){this.field=e,this.transform=t}}class PD{constructor(e,t){this.version=e,this.transformResults=t}}class yr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class mg{}function kD(n,e,t){n instanceof af?function(r,o,c){const d=r.value.clone(),g=Tw(r.fieldTransforms,o,c.transformResults);d.setAll(g),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof sl?function(r,o,c){if(!gg(r.precondition,o))return void o.convertToUnknownDocument(c.version);const d=Tw(r.fieldTransforms,o,c.transformResults),g=o.data;g.setAll(bw(r)),g.setAll(d),o.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function $y(n,e,t){var o;n instanceof af?function(r,o,c){if(!gg(r.precondition,o))return;const d=r.value.clone(),g=Cw(r.fieldTransforms,c,o);d.setAll(g),o.convertToFoundDocument(Dw(o),d).setHasLocalMutations()}(n,e,t):n instanceof sl?function(r,o,c){if(!gg(r.precondition,o))return;const d=Cw(r.fieldTransforms,c,o),g=o.data;g.setAll(bw(r)),g.setAll(d),o.convertToFoundDocument(Dw(o),g).setHasLocalMutations()}(n,e,t):gg(n.precondition,o=e)&&o.convertToNoDocument(vt.min())}function FD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),c=pg(r.transform,o||null);null!=c&&(null==t&&(t=oi.empty()),t.set(r.field,c))}return t||null}function Iw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Qc(t,r,(o,c)=>function OD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bu&&r instanceof Bu||t instanceof ju&&r instanceof ju?Qc(t.elements,r.elements,Gs):t instanceof il&&r instanceof il?Gs(t.k,r.k):t instanceof rl&&r instanceof rl);var t,r}(o,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Dw(n){return n.isFoundDocument()?n.version:vt.min()}class af extends mg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class sl extends mg{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}}function bw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Tw(n,e,t){const r=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const c=n[o],d=c.transform,g=e.data.field(c.field);r.set(c.field,Ly(d,g,t[o]))}return r}function Cw(n,e,t){const r=new Map;for(const o of n){const c=o.transform,d=t.data.field(o.field);r.set(o.field,Ew(c,d,e))}return r}class uf extends mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Hy extends mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Aw{constructor(e){this.count=e}}var dr,Kt;function Gy(n){switch(n){default:return lt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function qy(n){if(void 0===n)return tr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case dr.OK:return fe.OK;case dr.CANCELLED:return fe.CANCELLED;case dr.UNKNOWN:return fe.UNKNOWN;case dr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case dr.INTERNAL:return fe.INTERNAL;case dr.UNAVAILABLE:return fe.UNAVAILABLE;case dr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case dr.NOT_FOUND:return fe.NOT_FOUND;case dr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case dr.ABORTED:return fe.ABORTED;case dr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case dr.DATA_LOSS:return fe.DATA_LOSS;default:return lt()}}(Kt=dr||(dr={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";class nr{constructor(e,t){this.comparator=e,this.root=t||Br.EMPTY}insert(e,t){return new nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cf(this.root,e,this.comparator,!0)}}class cf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=null!=r?r:Br.RED,this.left=null!=o?o:Br.EMPTY,this.right=null!=c?c:Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Br(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===c?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Br.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1,Br.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Br(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bn{constructor(e){this.comparator=e,this.data=new nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ol(n){return n.hasNext()?n.getNext():void 0}const al=new nr(Qe.comparator);function zs(){return al}const LD=new nr(Qe.comparator);function $u(){return LD}const kT=new nr(Qe.comparator),Wy=new bn(Qe.comparator);function dn(...n){let e=Wy;for(const t of n)e=e.add(t);return e}const Sw=new bn(Ht);function lf(){return Sw}class yg{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,pt.createSynthesizedTargetChangeForCurrentChange(e,t)),new yg(vt.min(),r,lf(),zs(),dn())}}class pt{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new pt(Sr.EMPTY_BYTE_STRING,t,dn(),dn(),dn())}}class vg{constructor(e,t,r,o){this.M=e,this.removedTargetIds=t,this.key=r,this.$=o}}class xw{constructor(e,t){this.targetId=e,this.F=t}}class Mw{constructor(e,t,r=Sr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class df{constructor(){this.B=0,this.L=ff(),this.U=Sr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=dn(),t=dn(),r=dn();return this.L.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:lt()}}),new pt(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=ff()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class UD{constructor(e){this.nt=e,this.st=new Map,this.it=zs(),this.rt=hf(),this.ot=new bn(Ht)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.F.count,o=this.wt(t);if(o){const c=o.target;if(lg(c))if(0===r){const d=new Qe(c.path);this.at(t,d,Pn.newNoDocument(d,vt.min()))}else bt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((c,d)=>{const g=this.wt(d);if(g){if(c.current&&lg(g.target)){const E=new Qe(g.target.path);null!==this.it.get(E)||this.It(d,E)||this.at(d,E,Pn.newNoDocument(E,e))}c.j&&(t.set(d,c.H()),c.J())}});let r=dn();this.rt.forEach((c,d)=>{let g=!0;d.forEachWhile(E=>{const T=this.wt(E);return!T||2===T.purpose||(g=!1,!1)}),g&&(r=r.add(c))}),this.it.forEach((c,d)=>d.setReadTime(e));const o=new yg(e,t,this.ot,this.it,r);return this.it=zs(),this.rt=hf(),this.ot=new bn(Ht),o}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new df,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new bn(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new df),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function hf(){return new nr(Qe.comparator)}function ff(){return new nr(Qe.comparator)}const rr={asc:"ASCENDING",desc:"DESCENDING"},FT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Rw{constructor(e,t){this.databaseId=e,this.N=t}}function pf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nw(n,e){return n.N?e.toBase64():e.toUint8Array()}function Ow(n,e){return pf(n,e.toTimestamp())}function xr(n){return bt(!!n),vt.fromTimestamp(function(e){const t=po(e);return new Cr(t.seconds,t.nanos)}(n))}function _g(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ky(n){const e=sn.fromString(n);return bt($D(e)),e}function gf(n,e){return _g(n.databaseId,e.path)}function Fo(n,e){const t=Ky(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(Pw(t))}function Zy(n,e){return _g(n.databaseId,e)}function Ed(n){const e=Ky(n);return 4===e.length?sn.emptyPath():Pw(e)}function mf(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Pw(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kw(n,e,t){return{name:gf(n,e),fields:t.value.mapValue.fields}}function yf(n,e,t){const r=Fo(n,e.name),o=xr(e.updateTime),c=new oi({mapValue:{fields:e.fields}}),d=Pn.newFoundDocument(r,o,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Id(n,e){let t;if(e instanceof af)t={update:kw(n,e.key,e.value)};else if(e instanceof uf)t={delete:gf(n,e.key)};else if(e instanceof sl)t={update:kw(n,e.key,e.data),updateMask:LT(e.fieldMask)};else{if(!(e instanceof Hy))return lt();t={verify:gf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const d=c.transform;if(d instanceof rl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Bu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ju)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof il)return{fieldPath:c.field.canonicalString(),increment:d.k};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Ow(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:lt()),t;var o}function Yy(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?yr.updateTime(xr(o.updateTime)):void 0!==o.exists?yr.exists(o.exists):yr.none():yr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,d){let g=null;"setToServerValue"in d?(bt("REQUEST_TIME"===d.setToServerValue),g=new rl):"appendMissingElements"in d?g=new Bu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new ju(d.removeAllFromArray.values||[]):"increment"in d?g=new il(c,d.increment):lt();const E=Ar.fromServerFormat(d.fieldPath);return new of(E,g)}(n,o)):[];var o;if(e.update){const o=Fo(n,e.update.name),c=new oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Lu((e.updateMask.fieldPaths||[]).map(T=>Ar.fromServerFormat(T)));return new sl(o,c,d,t,r)}return new af(o,c,t,r)}if(e.delete){const o=Fo(n,e.delete);return new uf(o,t)}if(e.verify){const o=Fo(n,e.verify);return new Hy(o,t)}return lt()}function Dd(n,e){return{documents:[Zy(n,e.path)]}}function Uw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Zy(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Zy(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const T=E.map(R=>function(N){if("=="===N.op){if(My(N.value))return{unaryFilter:{field:bd(N.field),op:"IS_NAN"}};if(xy(N.value))return{unaryFilter:{field:bd(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(My(N.value))return{unaryFilter:{field:bd(N.field),op:"IS_NOT_NAN"}};if(xy(N.value))return{unaryFilter:{field:bd(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bd(N.field),op:jw(N.op),value:N.value}}}(R));return 1===T.length?T[0]:{compositeFilter:{op:"AND",filters:T}}}(e.filters);o&&(t.structuredQuery.where=o);const c=function(E){if(0!==E.length)return E.map(T=>{return{field:bd((R=T).field),direction:Bw(R.dir)};var R})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=(T=e.limit,n.N||Ta(T)?T:{value:T});var T,g,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function Vw(n){let e=Ed(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){bt(1===r);const R=t.from[0];R.allDescendants?o=R.collectionId:e=e.child(R.collectionId)}let c=[];t.where&&(c=Qy(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(R=>{return new nf(ul((N=R).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(R){let N;return N="object"==typeof R?R.value:R,Ta(N)?null:N}(t.limit));let E=null;var R;t.startAt&&(E=new tl((R=t.startAt).values||[],!!R.before));let T=null;return t.endAt&&(T=function(R){return new tl(R.values||[],!R.before)}(t.endAt)),mw(e,o,d,c,g,"F",E,T)}function Qy(n){return n?void 0!==n.unaryFilter?[jD(n)]:void 0!==n.fieldFilter?[BD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Qy(e)).reduce((e,t)=>e.concat(t)):lt():[]}function Bw(n){return rr[n]}function jw(n){return FT[n]}function bd(n){return{fieldPath:n.canonicalString()}}function ul(n){return Ar.fromServerFormat(n.fieldPath)}function BD(n){return mi.create(ul(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function jD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ul(n.unaryFilter.field);return mi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ul(n.unaryFilter.field);return mi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ul(n.unaryFilter.field);return mi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ul(n.unaryFilter.field);return mi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function LT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $D(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Jy(e)),e=UT(n.get(t),e);return Jy(e)}function UT(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const c=n.charAt(o);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function Jy(n){return n+"\x01\x01"}function vs(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let o="";for(let c=0;c<e;){const d=n.indexOf("\x01",c);switch((d<0||d>t)&&lt(),n.charAt(d+1)){case"\x01":const g=n.substring(c,d);let E;0===o.length?E=g:(o+=g,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(c,d),o+="\0";break;case"\x11":o+=n.substring(c,d+1);break;default:lt()}c=d+2}return new sn(r)}class HD{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class _s{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}_s.store="owner",_s.key="owner";class Aa{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Aa.store="mutationQueues",Aa.keyPath="userId";class hn{constructor(e,t,r,o,c){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=c}}hn.store="mutations",hn.keyPath="batchId",hn.userMutationsIndex="userMutationsIndex",hn.userMutationsKeyPath=["userId","batchId"];class yi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,ai(t)]}static key(e,t,r){return[e,ai(t),r]}}yi.store="documentMutations",yi.PLACEHOLDER=new yi;class GD{constructor(e,t){this.path=e,this.readTime=t}}class qD{constructor(e,t){this.path=e,this.version=t}}class ir{constructor(e,t,r,o,c,d){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=c,this.parentPath=d}}ir.store="remoteDocuments",ir.readTimeIndex="readTimeIndex",ir.readTimeIndexPath="readTime",ir.collectionReadTimeIndex="collectionReadTimeIndex",ir.collectionReadTimeIndexPath=["parentPath","readTime"];class Lo{constructor(e){this.byteSize=e}}Lo.store="remoteDocumentGlobal",Lo.key="remoteDocumentGlobalKey";class xi{constructor(e,t,r,o,c,d,g){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=d,this.query=g}}xi.store="targets",xi.keyPath="targetId",xi.queryTargetsIndexName="queryTargetsIndex",xi.queryTargetsKeyPath=["canonicalId","targetId"];class ui{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}ui.store="targetDocuments",ui.keyPath=["targetId","path"],ui.documentTargetsIndex="documentTargetsIndex",ui.documentTargetsKeyPath=["path","targetId"];class ws{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}ws.key="targetGlobalKey",ws.store="targetGlobal";class Ws{constructor(e,t){this.collectionId=e,this.parent=t}}Ws.store="collectionParents",Ws.keyPath=["collectionId","parent"];class Sa{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}Sa.store="clientMetadata",Sa.keyPath="clientId";class cl{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}cl.store="bundles",cl.keyPath="bundleId";class Td{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Td.store="namedQueries",Td.keyPath="name";class Qi{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}Qi.store="indexConfiguration",Qi.keyPath="indexId",Qi.collectionGroupIndex="collectionGroupIndex",Qi.collectionGroupIndexPath="collectionGroup";class Ks{constructor(e,t,r,o,c,d){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=o,this.documentKey=c,this.largestBatchId=d}}Ks.store="indexState",Ks.keyPath=["indexId","uid"],Ks.sequenceNumberIndex="sequenceNumberIndex",Ks.sequenceNumberIndexPath=["uid","sequenceNumber"];class Es{constructor(e,t,r,o,c){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=o,this.documentKey=c}}Es.store="indexEntries",Es.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Es.documentKeyIndex="documentKeyIndex",Es.documentKeyIndexPath=["indexId","uid","documentKey"];class jr{constructor(e,t,r,o,c,d){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=o,this.largestBatchId=c,this.overlayMutation=d}}jr.store="documentOverlays",jr.keyPath=["userId","collectionPath","documentId"],jr.collectionPathOverlayIndex="collectionPathOverlayIndex",jr.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],jr.collectionGroupOverlayIndex="collectionGroupOverlayIndex",jr.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const wg=[Aa.store,hn.store,yi.store,ir.store,xi.store,_s.store,ws.store,ui.store,Sa.store,Lo.store,Ws.store,cl.store,Td.store],$w=[...wg,jr.store],Hw=[...$w,Qi.store,Ks.store,Es.store],Xy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.reject(t)}static resolve(e){return new ve((t,r)=>{t(e)})}static reject(e){return new ve((t,r)=>{r(e)})}static waitFor(e){return new ve((t,r)=>{let o=0,c=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++c,d&&c===o&&t()},E=>r(E))}),d=!0,c===o&&t()})}static or(e){let t=ve.resolve(!1);for(const r of e)t=t.next(o=>o?ve.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,c)=>{r.push(t.call(this,o,c))}),this.waitFor(r)}}class Eg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Vr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Cd(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=ev(r.target.error);this.At.reject(new Cd(e,o))}}static open(e,t,r,o){try{return new Eg(t,e.transaction(o,r))}catch(c){throw new Cd(t,c)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new WD(t)}}class Is{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Is.vt((0,Ut.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),dl(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,Ut.hl)())return!1;if(Is.St())return!0;const e=(0,Ut.z$)(),t=Is.vt(e),r=0<t&&t<10,o=Is.Dt(e),c=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=d=>{r(d.target.result)},c.onblocked=()=>{o(new Cd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new Oe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Oe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Cd(e,g))},c.onupgradeneeded=d=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,c.transaction,d.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var c=this;return(0,Ee.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{c.db=yield c.xt(e);const E=Eg.open(c.db,e,d?"readonly":"readwrite",r),T=o(E).next(R=>(E.Pt(),R)).catch(R=>(E.abort(R),ve.reject(R))).toPromise();return T.catch(()=>{}),yield E.Rt,T}catch(E){const T="FirebaseError"!==E.name&&g<3;if(Fe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",T),c.close(),!T)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class zD{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return dl(this.$t.delete())}}class Cd extends Oe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ll(n){return"IndexedDbTransactionError"===n.name}class WD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),dl(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),dl(this.store.add(e))}get(e){return dl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),dl(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),dl(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),c=[];return this.Kt(o,(d,g)=>{c.push(g)}).next(()=>c)}{const o=this.store.getAll(r.range);return new ve((c,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{c(g.target.result)}})}}Gt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(c,d,g)=>g.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}Wt(e){const t=this.cursor({});return new ve((r,o)=>{t.onerror=c=>{const d=ev(c.target.error);o(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new ve((o,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const E=new zD(g),T=t(g.primaryKey,g.value,E);if(T instanceof ve){const R=T.catch(N=>(E.done(),ve.reject(N)));r.push(R)}E.isDone?o():null===E.Lt?g.continue():g.continue(E.Lt)}}).next(()=>ve.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function dl(n){return new ve((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=ev(r.target.error);t(o)}})}let qw=!1;function ev(n){const e=Is.vt((0,Ut.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qw||(qw=!0,setTimeout(()=>{throw r},0)),r}}return n}class zw extends Gw{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function $r(n,e){const t=Ke(n);return Is.Nt(t.zt,e)}class tv{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&kD(c,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&$y(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&$y(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(vt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&Qc(this.mutations,e.mutations,(t,r)=>Iw(t,r))&&Qc(this.baseMutations,e.baseMutations,(t,r)=>Iw(t,r))}}class Ig{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){bt(e.mutations.length===r.length);let o=kT;const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,r[d].version);return new Ig(e,t,r,o)}}class Dg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hu{constructor(e,t,r,o,c=vt.min(),d=vt.min(),g=Sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new Hu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ww{constructor(e){this.Ht=e}}function nv(n,e){let t;if(e.document)t=yf(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),o=Ma(e.noDocument.readTime);t=Pn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=Qe.fromSegments(e.unknownDocument.path),o=Ma(e.unknownDocument.version);t=Pn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(iv(e.readTime)),t}function Kw(n,e){const t=rv(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const o={name:gf(d=n.Ht,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:pf(d,g.version.toTimestamp())};return new ir(null,null,o,e.hasCommittedMutations,t,r)}var d,g;if(e.isNoDocument()){const o=e.key.path.toArray(),c=xa(e.version),d=e.hasCommittedMutations;return new ir(null,new GD(o,c),null,d,t,r)}if(e.isUnknownDocument()){const o=e.key.path.toArray(),c=xa(e.version);return new ir(new qD(o,c),null,null,!0,t,r)}return lt()}function rv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function iv(n){const e=new Cr(n[0],n[1]);return vt.fromTimestamp(e)}function xa(n){const e=n.toTimestamp();return new HD(e.seconds,e.nanoseconds)}function Ma(n){const e=new Cr(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function hl(n,e){const t=(e.baseMutations||[]).map(c=>Yy(n.Ht,c));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(d.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>Yy(n.Ht,c)),o=Cr.fromMillis(e.localWriteTimeMs);return new tv(e.batchId,o,t,r)}function fl(n){const e=Ma(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ma(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(bt(1===(o=n.query).documents.length),r=qs(Si(Ed(o.documents[0])))):r=qs(Vw(n.query)),new Hu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Sr.fromBase64String(n.resumeToken))}function Zw(n,e){const t=xa(e.snapshotVersion),r=xa(e.lastLimboFreeSnapshotVersion);let o;o=lg(e.target)?Dd(n.Ht,e.target):Uw(n.Ht,e.target);const c=e.resumeToken.toBase64();return new xi(e.targetId,Wn(e.target),t,c,e.sequenceNumber,r,o)}function sv(n){const e=Vw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yw(e,e.limit,"L"):e}function _f(n,e){return new Dg(e.largestBatchId,Yy(n.Ht,e.overlayMutation))}function Yw(n,e){const t=e.path.lastSegment();return[n,ai(e.path.popLast()),t]}class KD{getBundleMetadata(e,t){return Qw(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Ma(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Qw(e).put({bundleId:(r=t).id,createTime:xa(xr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ov(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:sv(o.bundledQuery),readTime:Ma(o.readTime)};var o})}saveNamedQuery(e,t){return ov(e).put({name:(r=t).name,readTime:xa(xr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Qw(n){return $r(n,cl.store)}function ov(n){return $r(n,Td.store)}class av{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new av(e,t.uid||"")}getOverlay(e,t){return Ad(e).get(Yw(this.userId,t)).next(r=>r?_f(this.O,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach(c=>{const d=new Dg(t,c);o.push(this.Yt(e,d))}),ve.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(ai(d.getCollectionPath())));const c=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);c.push(Ad(e).Gt(jr.collectionPathOverlayIndex,g))}),ve.waitFor(c)}getOverlaysForCollection(e,t,r){const o=new Map,c=ai(t),d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Ad(e).qt(jr.collectionPathOverlayIndex,d).next(g=>{for(const E of g){const T=_f(this.O,E);o.set(T.getKey(),T)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const c=new Map;let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ad(e).Qt({index:jr.collectionGroupOverlayIndex,range:g},(E,T,R)=>{const N=_f(this.O,T);c.size<o||N.largestBatchId===d?(c.set(N.getKey(),N),d=N.largestBatchId):R.done()}).next(()=>c)}Yt(e,t){return Ad(e).put(function(r,o,c){const[d,g,E]=Yw(o,c.mutation.key);return new jr(o,g,E,c.mutation.key.getCollectionGroup(),c.largestBatchId,Id(r.Ht,c.mutation))}(this.O,this.userId,t))}}function Ad(n){return $r(n,jr.store)}class uv{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(On(e.integerValue));else if("doubleValue"in e){const r=On(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),pd(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(fd(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?Gs(e,aw)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):lt()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const o of Object.keys(r))this.ie(o,t),this.Zt(r[o],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const o of r)this.Zt(o,t)}ce(e,t){this.ee(t,37),Qe.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function ZD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Sd(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const c=ZD(255&t[o]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}uv.le=new uv;class YD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const o=t.codePointAt(0);this.de(240|o>>>18),this.de(128|63&o>>>12),this.de(128|63&o>>>6),this.de(128|63&o)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const o=t.codePointAt(0);this.me(240|o>>>18),this.me(128|63&o>>>12),this.me(128|63&o>>>6),this.me(128|63&o)}}this.ge()}Ie(e){const t=this.Ee(e),r=Sd(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ae(e){const t=this.Ee(e),r=Sd(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class xd{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class wf{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class Jw{constructor(){this.Se=new YD,this.De=new xd(this.Se),this.Ce=new wf(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class Xw{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}}function bg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:(t=eE(n.arrayValue,e.arrayValue),0!==t?t:eE(n.directionalValue,e.directionalValue)))}function eE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class QD{constructor(){this.xe=new cv}addToCollectionParentIndex(e,t){return this.xe.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t,r){return ve.resolve(dn())}getFieldIndex(e,t){return ve.resolve(null)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}updateCollectionGroup(e,t,r){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class cv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new bn(sn.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new bn(sn.comparator)).toArray()}}class JD{constructor(e){this.user=e,this.ke=new cv,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const c={collectionId:r,parent:ai(o)};return lv(e).put(c)}return ve.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[sw(t),""],!1,!0);return lv(e).qt(o).next(c=>{for(const d of c){if(d.collectionId!==t)break;r.push(vs(d.parent))}return r})}addFieldIndex(e,t){const r=Md(e),o=new Qi((c=t).indexId,c.collectionGroup,c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind]));var c;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Md(e),o=pl(e),c=Ef(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return ve.resolve(dn())}getFieldIndex(e,t){return ve.resolve(null)}Oe(e,t){const r=new Jw;for(const o of e.fields.filter(d=>2!==d.kind)){const c=t.data.field(o.fieldPath);if(null==c)return null;const d=r.Ne(o.kind);uv.le.Xt(c,d)}return r.Ve()}Me(e){const t=new Jw;return uv.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=Md(e),o=pl(e);return(t?r.qt(Qi.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(c=>{const d=[];return ve.forEach(c,g=>o.get([g.indexId,this.uid]).next(E=>{d.push(function(T,R){const N=R?new tf(R.sequenceNumber,new ug(Ma(R.readTime),new Qe(vs(R.documentKey)),R.largestBatchId)):tf.empty(),z=T.fields.map(([ee,Ie])=>new Ny(Ar.fromServerFormat(ee),Ie));return new ag(T.indexId,T.collectionGroup,z,N)}(g,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>r.indexState.sequenceNumber-o.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Md(e),c=pl(e);return this.$e(e).next(d=>o.qt(Qi.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(g=>ve.forEach(g,E=>{return c.put(new Ks(E.indexId,this.user.uid||"",d,xa((z=r).readTime),ai(z.documentKey.path),z.largestBatchId));var z})))}updateIndexEntries(e,t){const r=new Map;return ve.forEach(t,(o,c)=>{const d=r.get(o.collectionGroup);return(d?ve.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ve.forEach(g,E=>this.Fe(e,o,E).next(T=>{const R=this.Be(c,E);return T.isEqual(R)?ve.resolve():this.Le(e,c,T,R)}))))})}Ue(e,t,r){return Ef(e).put(new Es(r.indexId,this.uid,r.arrayValue,r.directionalValue,ai(t.key.path)))}qe(e,t,r){return Ef(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,ai(t.key.path)])}Fe(e,t,r){const o=Ef(e);let c=new bn(bg);return o.Qt({index:Es.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,ai(t.path)])},(d,g)=>{c=c.add(new Xw(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>c)}Be(e,t){let r=new bn(bg);const o=this.Oe(t,e);if(null==o)return r;const c=t.fields.find(g=>2===g.kind);if(null!=c){const d=e.data.field(c.fieldPath);if(yd(d))for(const g of d.arrayValue.values||[])r=r.add(new Xw(t.indexId,e.key,this.Me(g),o))}else r=r.add(new Xw(t.indexId,e.key,new Uint8Array,o));return r}Le(e,t,r,o){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(d,g,E,T,R){const N=d.getIterator(),z=g.getIterator();let ee=ol(N),Ie=ol(z);for(;ee||Ie;){let je=!1,nt=!1;if(ee&&Ie){const Lt=E(ee,Ie);Lt<0?nt=!0:Lt>0&&(je=!0)}else null!=ee?nt=!0:je=!0;je?(T(Ie),Ie=ol(z)):nt?(R(ee),ee=ol(N)):(ee=ol(N),Ie=ol(z))}}(r,o,bg,d=>{c.push(this.Ue(e,t,d))},d=>{c.push(this.qe(e,t,d))}),ve.waitFor(c)}$e(e){let t=1;return pl(e).Qt({index:Ks.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,c)=>{c.done(),t=o.sequenceNumber+1}).next(()=>t)}}function lv(n){return $r(n,Ws.store)}function Ef(n){return $r(n,Es.store)}function Md(n){return $r(n,Qi.store)}function pl(n){return $r(n,Ks.store)}const Rd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ji{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ji(e,Ji.DEFAULT_COLLECTION_PERCENTILE,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dv(n,e,t){const r=n.store(hn.store),o=n.store(yi.store),c=[],d=IDBKeyRange.only(t.batchId);let g=0;const E=r.Qt({range:d},(R,N,z)=>(g++,z.delete()));c.push(E.next(()=>{bt(1===g)}));const T=[];for(const R of t.mutations){const N=yi.key(e,R.key.path,t.batchId);c.push(o.delete(N)),T.push(R.key)}return ve.waitFor(c).next(()=>T)}function If(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}Ji.DEFAULT_COLLECTION_PERCENTILE=10,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ji.DEFAULT=new Ji(41943040,Ji.DEFAULT_COLLECTION_PERCENTILE,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ji.DISABLED=new Ji(-1,0,0);class hv{constructor(e,t,r,o){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=o,this.Ke={}}static Jt(e,t,r,o){bt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new hv(c,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gu(e).Qt({index:hn.userMutationsIndex,range:r},(o,c,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const c=qu(e),d=Gu(e);return d.add({}).next(g=>{bt("number"==typeof g);const E=new tv(g,t,r,o),T=function(z,ee,Ie){const je=Ie.baseMutations.map(Lt=>Id(z.Ht,Lt)),nt=Ie.mutations.map(Lt=>Id(z.Ht,Lt));return new hn(ee,Ie.batchId,Ie.localWriteTime.toMillis(),je,nt)}(this.O,this.userId,E),R=[];let N=new bn((z,ee)=>Ht(z.canonicalString(),ee.canonicalString()));for(const z of o){const ee=yi.key(this.userId,z.key.path,g);N=N.add(z.key.path.popLast()),R.push(d.put(T)),R.push(c.put(ee,yi.PLACEHOLDER))}return N.forEach(z=>{R.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.Ke[g]=E.keys()}),ve.waitFor(R).next(()=>E)})}lookupMutationBatch(e,t){return Gu(e).get(t).next(r=>r?(bt(r.userId===this.userId),hl(this.O,r)):null)}Ge(e,t){return this.Ke[t]?ve.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Ke[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Gu(e).Qt({index:hn.userMutationsIndex,range:o},(d,g,E)=>{g.userId===this.userId&&(bt(g.batchId>=r),c=hl(this.O,g)),E.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Gu(e).Qt({index:hn.userMutationsIndex,range:t,reverse:!0},(o,c,d)=>{r=c.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gu(e).qt(hn.userMutationsIndex,t).next(r=>r.map(o=>hl(this.O,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=yi.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),c=[];return qu(e).Qt({range:o},(d,g,E)=>{const[T,R,N]=d,z=vs(R);if(T===this.userId&&t.path.isEqual(z))return Gu(e).get(N).next(ee=>{if(!ee)throw lt();bt(ee.userId===this.userId),c.push(hl(this.O,ee))});E.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Ht);const o=[];return t.forEach(c=>{const d=yi.prefixForPath(this.userId,c.path),g=IDBKeyRange.lowerBound(d),E=qu(e).Qt({range:g},(T,R,N)=>{const[z,ee,Ie]=T,je=vs(ee);z===this.userId&&c.path.isEqual(je)?r=r.add(Ie):N.done()});o.push(E)}),ve.waitFor(o).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,c=yi.prefixForPath(this.userId,r),d=IDBKeyRange.lowerBound(c);let g=new bn(Ht);return qu(e).Qt({range:d},(E,T,R)=>{const[N,z,ee]=E,Ie=vs(z);N===this.userId&&r.isPrefixOf(Ie)?Ie.length===o&&(g=g.add(ee)):R.done()}).next(()=>this.je(e,g))}je(e,t){const r=[],o=[];return t.forEach(c=>{o.push(Gu(e).get(c).next(d=>{if(null===d)throw lt();bt(d.userId===this.userId),r.push(hl(this.O,d))}))}),ve.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return dv(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),ve.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ve.resolve();const r=IDBKeyRange.lowerBound(yi.prefixForUser(this.userId)),o=[];return qu(e).Qt({range:r},(c,d,g)=>{if(c[0]===this.userId){const E=vs(c[1]);o.push(E)}else g.done()}).next(()=>{bt(0===o.length)})})}containsKey(e,t){return tE(e,this.userId,t)}We(e){return nE(e).get(this.userId).next(t=>t||new Aa(this.userId,-1,""))}}function tE(n,e,t){const r=yi.prefixForPath(e,t.path),o=r[1],c=IDBKeyRange.lowerBound(r);let d=!1;return qu(n).Qt({range:c,jt:!0},(g,E,T)=>{const[R,N,z]=g;R===e&&N===o&&(d=!0),T.done()}).next(()=>d)}function Gu(n){return $r(n,hn.store)}function qu(n){return $r(n,yi.store)}function nE(n){return $r(n,Aa.store)}class Nd{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new Nd(0)}static Je(){return new Nd(-1)}}class XD{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new Nd(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>vt.fromTimestamp(new Cr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Xe(e,o)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Od(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let o=0;const c=[];return Od(e).Qt((d,g)=>{const E=fl(g);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,c.push(this.removeTargetData(e,E)))}).next(()=>ve.waitFor(c)).next(()=>o)}forEachTarget(e,t){return Od(e).Qt((r,o)=>{const c=fl(o);t(c)})}Ye(e){return gl(e).get(ws.key).next(t=>(bt(null!==t),t))}Xe(e,t){return gl(e).put(ws.key,t)}Ze(e,t){return Od(e).put(Zw(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Wn(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Od(e).Qt({range:o,index:xi.queryTargetsIndexName},(d,g,E)=>{const T=fl(g);cg(t,T.target)&&(c=T,E.done())}).next(()=>c)}addMatchingKeys(e,t,r){const o=[],c=Ra(e);return t.forEach(d=>{const g=ai(d.path);o.push(c.put(new ui(r,g))),o.push(this.referenceDelegate.addReference(e,r,d))}),ve.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ra(e);return ve.forEach(t,c=>{const d=ai(c.path);return ve.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Ra(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ra(e);let c=dn();return o.Qt({range:r,jt:!0},(d,g,E)=>{const T=vs(d[1]),R=new Qe(T);c=c.add(R)}).next(()=>c)}containsKey(e,t){const r=ai(t.path),o=IDBKeyRange.bound([r],[sw(r)],!1,!0);let c=0;return Ra(e).Qt({index:ui.documentTargetsIndex,jt:!0,range:o},([d,g],E,T)=>{0!==d&&(c++,T.done())}).next(()=>c>0)}Tt(e,t){return Od(e).get(t).next(r=>r?fl(r):null)}}function Od(n){return $r(n,xi.store)}function gl(n){return $r(n,ws.store)}function Ra(n){return $r(n,ui.store)}function Zs(n){return rE.apply(this,arguments)}function rE(){return rE=(0,Ee.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==Xy)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),rE.apply(this,arguments)}function fv([n,e],[t,r]){const o=Ht(n,t);return 0===o?Ht(e,r):o}class eb{constructor(e){this.en=e,this.buffer=new bn(fv),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VT{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ee.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){ll(o)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Zs(o)}yield t.un(e)}))}}class iE{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ve.resolve(ys.A);const r=new eb(t);return this.an.forEachTarget(e,o=>r.rn(o.sequenceNumber)).next(()=>this.an.ln(e,o=>r.rn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(Rd)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rd):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,o,c,d,g,E,T;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(c=N,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(T=Date.now(),Dy()<=Po.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-R}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${c} targets in `+(E-g)+`ms\n\tRemoved ${N} documents in `+(T-E)+`ms\nTotal Duration: ${T-R}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:N})))}}class BT{constructor(e,t){this.db=e,this.garbageCollector=new iE(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,o)=>t(o))}addReference(e,t,r){return Df(e,r)}removeReference(e,t,r){return Df(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Df(e,t)}wn(e,t){return function(r,o){let c=!1;return nE(r).Wt(d=>tE(r,d,o).next(g=>(g&&(c=!0),ve.resolve(!g)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this._n(e,(d,g)=>{if(g<=t){const E=this.wn(e,d).next(T=>{if(!T)return c++,r.getEntry(e,d).next(()=>(r.removeEntry(d,vt.min()),Ra(e).delete([0,ai(d.path)])))});o.push(E)}}).next(()=>ve.waitFor(o)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Df(e,t)}_n(e,t){const r=Ra(e);let o,c=ys.A;return r.Qt({index:ui.documentTargetsIndex},([d,g],{path:E,sequenceNumber:T})=>{0===d?(c!==ys.A&&t(new Qe(vs(o)),c),c=T,o=E):c=ys.A}).next(()=>{c!==ys.A&&t(new Qe(vs(o)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Df(n,e){return Ra(n).put((r=n.currentSequenceNumber,new ui(0,ai(e.path),r)));var r}class zu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,c]of r)if(this.equalsFn(o,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){hd(this.inner,(t,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return rg(this.inner)}}class sE{constructor(){this.changes=new zu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ve.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tb{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wu(e).put(Tg(t),r)}removeEntry(e,t){const r=Wu(e),o=Tg(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return Wu(e).get(Tg(t)).next(r=>this.gn(t,r))}yn(e,t){return Wu(e).get(Tg(t)).next(r=>({document:this.gn(t,r),size:If(r)}))}getEntries(e,t){let r=zs();return this.pn(e,t,(o,c)=>{const d=this.gn(o,c);r=r.insert(o,d)}).next(()=>r)}In(e,t){let r=zs(),o=new nr(Qe.comparator);return this.pn(e,t,(c,d)=>{const g=this.gn(c,d);r=r.insert(c,g),o=o.insert(c,If(d))}).next(()=>({documents:r,En:o}))}pn(e,t,r){if(t.isEmpty())return ve.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),c=t.getIterator();let d=c.getNext();return Wu(e).Qt({range:o},(g,E,T)=>{const R=Qe.fromSegments(g);for(;d&&Qe.comparator(d,R)<0;)r(d,null),d=c.getNext();d&&d.isEqual(R)&&(r(d,E),d=c.hasNext()?c.getNext():null),d?T.Ut(d.path.toArray()):T.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getAll(e,t,r){let o=zs();const c=t.length+1,d={};if(r.isEqual(vt.min())){const g=t.toArray();d.range=IDBKeyRange.lowerBound(g)}else{const g=t.toArray(),E=rv(r);d.range=IDBKeyRange.lowerBound([g,E],!0),d.index=ir.collectionReadTimeIndex}return Wu(e).Qt(d,(g,E,T)=>{if(g.length!==c)return;const R=this.gn(Qe.fromSegments(g),E);t.isPrefixOf(R.key.path)?o=o.insert(R.key,R):T.done()}).next(()=>o)}newChangeBuffer(e){return new nb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oE(e).get(Lo.key).next(t=>(bt(!!t),t))}mn(e,t){return oE(e).put(Lo.key,t)}gn(e,t){if(t){const r=nv(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Pn.newInvalidDocument(e)}}class nb extends sE{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new zu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new bn((c,d)=>Ht(c.canonicalString(),d.canonicalString()));return this.changes.forEach((c,d)=>{const g=this.An.get(c);if(d.isValidDocument()){const E=Kw(this.Tn.O,d);o=o.add(c.path.popLast()),r+=If(E)-g,t.push(this.Tn.addEntry(e,c,E))}else if(r-=g,this.trackRemovals){const E=Kw(this.Tn.O,d.convertToNoDocument(vt.min()));t.push(this.Tn.addEntry(e,c,E))}else t.push(this.Tn.removeEntry(e,c))}),o.forEach(c=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Tn.updateMetadata(e,r)),ve.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:o})=>(o.forEach((c,d)=>{this.An.set(c,d)}),r))}}function oE(n){return $r(n,Lo.store)}function Wu(n){return $r(n,ir.store)}function Tg(n){return n.path.toArray()}class rb{constructor(e){this.O=e}kt(e,t,r,o){const c=new Eg("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore(_s.store),(g=e).createObjectStore(Aa.store,{keyPath:Aa.keyPath}),g.createObjectStore(hn.store,{keyPath:hn.keyPath,autoIncrement:!0}).createIndex(hn.userMutationsIndex,hn.userMutationsKeyPath,{unique:!0}),g.createObjectStore(yi.store),aE(e),function(g){g.createObjectStore(ir.store)}(e));let d=ve.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore(ui.store),g.deleteObjectStore(xi.store),g.deleteObjectStore(ws.store)}(e),aE(e)),d=d.next(()=>function(g){const E=g.store(ws.store),T=new ws(0,0,vt.min().toTimestamp(),0);return E.put(ws.key,T)}(c))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,E){return E.store(hn.store).qt().next(T=>{g.deleteObjectStore(hn.store),g.createObjectStore(hn.store,{keyPath:hn.keyPath,autoIncrement:!0}).createIndex(hn.userMutationsIndex,hn.userMutationsKeyPath,{unique:!0});const R=E.store(hn.store),N=T.map(z=>R.put(z));return ve.waitFor(N)})}(e,c))),d=d.next(()=>{!function(g){g.createObjectStore(Sa.store,{keyPath:Sa.keyPath})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Rn(c))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore(Lo.store)}(e),this.Pn(c)))),r<7&&o>=7&&(d=d.next(()=>this.bn(c))),r<8&&o>=8&&(d=d.next(()=>this.vn(e,c))),r<9&&o>=9&&(d=d.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e),function(g){const E=g.objectStore(ir.store);E.createIndex(ir.readTimeIndex,ir.readTimeIndexPath,{unique:!1}),E.createIndex(ir.collectionReadTimeIndex,ir.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(d=d.next(()=>this.Vn(c))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore(cl.store,{keyPath:cl.keyPath})})(e),function(g){g.createObjectStore(Td.store,{keyPath:Td.keyPath})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const E=g.createObjectStore(jr.store,{keyPath:jr.keyPath});E.createIndex(jr.collectionPathOverlayIndex,jr.collectionPathOverlayIndexPath,{unique:!1}),E.createIndex(jr.collectionGroupOverlayIndex,jr.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>{!function(g){g.createObjectStore(Qi.store,{keyPath:Qi.keyPath,autoIncrement:!0}).createIndex(Qi.collectionGroupIndex,Qi.collectionGroupIndexPath,{unique:!1}),g.createObjectStore(Ks.store,{keyPath:Ks.keyPath}).createIndex(Ks.sequenceNumberIndex,Ks.sequenceNumberIndexPath,{unique:!1}),g.createObjectStore(Es.store,{keyPath:Es.keyPath}).createIndex(Es.documentKeyIndex,Es.documentKeyIndexPath,{unique:!1})}(e)})),d}Pn(e){let t=0;return e.store(ir.store).Qt((r,o)=>{t+=If(o)}).next(()=>{const r=new Lo(t);return e.store(Lo.store).put(Lo.key,r)})}Rn(e){const t=e.store(Aa.store),r=e.store(hn.store);return t.qt().next(o=>ve.forEach(o,c=>{const d=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.qt(hn.userMutationsIndex,d).next(g=>ve.forEach(g,E=>{bt(E.userId===c.userId);const T=hl(this.O,E);return dv(e,c.userId,T).next(()=>{})}))}))}bn(e){const t=e.store(ui.store),r=e.store(ir.store);return e.store(ws.store).get(ws.key).next(o=>{const c=[];return r.Qt((d,g)=>{const E=new sn(d),T=[0,ai(E)];c.push(t.get(T).next(R=>R?ve.resolve():t.put(new ui(0,ai(E),o.highestListenSequenceNumber))))}).next(()=>ve.waitFor(c))})}vn(e,t){e.createObjectStore(Ws.store,{keyPath:Ws.keyPath});const r=t.store(Ws.store),o=new cv,c=d=>{if(o.add(d)){const g=d.lastSegment(),E=d.popLast();return r.put({collectionId:g,parent:ai(E)})}};return t.store(ir.store).Qt({jt:!0},(d,g)=>{const E=new sn(d);return c(E.popLast())}).next(()=>t.store(yi.store).Qt({jt:!0},([d,g,E],T)=>{const R=vs(g);return c(R.popLast())}))}Vn(e){const t=e.store(xi.store);return t.Qt((r,o)=>{const c=fl(o),d=Zw(this.O,c);return t.put(d)})}}function aE(n){n.createObjectStore(ui.store,{keyPath:ui.keyPath}).createIndex(ui.documentTargetsIndex,ui.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(xi.store,{keyPath:xi.keyPath}).createIndex(xi.queryTargetsIndexName,xi.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(ws.store)}const pv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gv{constructor(e,t,r,o,c,d,g,E,T,R,N=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=c,this.window=d,this.document=g,this.Dn=T,this.Cn=R,this.schemaVersion=N,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=z=>Promise.resolve(),!gv.Vt())throw new Oe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new BT(this,o),this.Bn=t+"main",this.O=new Ww(E),this.Ln=new Is(this.Bn,this.schemaVersion,new rb(this.O)),this.Un=new XD(this.referenceDelegate,this.O),this.qn=new tb(this.O),this.Kn=new KD,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===R&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(fe.FAILED_PRECONDITION,pv);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new ys(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,Ee.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bf(e).put(new Sa(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(ll(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return Na(e).get(_s.key).next(t=>ve.resolve(this.ts(t)))}es(e){return bf(e).delete(this.clientId)}ns(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=$r(r,Sa.store);return o.qt().next(c=>{const d=e.rs(c,18e5),g=c.filter(E=>-1===d.indexOf(E));return ve.forEach(g,E=>o.delete(E.clientId)).next(()=>g)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?ve.resolve(!0):Na(e).get(_s.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Oe(fe.FAILED_PRECONDITION,pv);return!1}}return!(!this.networkEnabled||!this.inForeground)||bf(e).qt().next(r=>void 0===this.rs(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[_s.store,Sa.store],t=>{const r=new zw(t,ys.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>bf(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return hv.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new JD(e)}getDocumentOverlayCache(e){return av.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",c=13===(d=this.schemaVersion)?Hw:12===d?$w:11===d?wg:void lt();var d;let g;return this.Ln.runTransaction(e,o,c,E=>(g=new zw(E,this.Nn?this.Nn.next():ys.A),"readwrite-primary"===t?this.Jn(g).next(T=>!!T||this.Yn(g)).next(T=>{if(!T)throw tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Oe(fe.FAILED_PRECONDITION,Xy);return r(g)}).next(T=>this.Zn(g).next(()=>T)):this._s(g).next(()=>r(g)))).then(E=>(g.raiseOnCommittedEvent(),E))}_s(e){return Na(e).get(_s.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(fe.FAILED_PRECONDITION,pv)})}Zn(e){const t=new _s(this.clientId,this.allowTabSynchronization,Date.now());return Na(e).put(_s.key,t)}static Vt(){return Is.Vt()}Xn(e){const t=Na(e);return t.get(_s.key).next(r=>this.ts(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete(_s.key)):ve.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,Ut.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){tr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Na(n){return $r(n,_s.store)}function bf(n){return $r(n,Sa.store)}function Cg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class uE{constructor(e,t){this.progress=e,this.ws=t}}class cE{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(o=>{for(const c of r)c.applyToLocalView(o);return o})}Is(e,t){e.forEach((r,o)=>{for(const c of t)c.applyToLocalView(o)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return Qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Rs(e,t.path):Py(t)?this.Ps(e,t,r):this.bs(e,t,r);var o}Rs(e,t){return this.ys(e,new Qe(t)).next(r=>{let o=$u();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ps(e,t,r){const o=t.collectionGroup;let c=$u();return this.indexManager.getCollectionParents(e,o).next(d=>ve.forEach(d,g=>{const E=(T=t,R=g.child(o),new Ca(R,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,R;return this.bs(e,E,r).next(T=>{T.forEach((R,N)=>{c=c.insert(R,N)})})}).next(()=>c))}bs(e,t,r){let o;return this.qn.getAll(e,t.path,r).next(c=>(o=c,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(c=>{for(const d of c)for(const g of d.mutations){const E=g.key;let T=o.get(E);null==T&&(T=Pn.newInvalidDocument(E),o=o.insert(E,T)),$y(g,T,d.localWriteTime),T.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((c,d)=>{fg(t,d)||(o=o.remove(c))}),o))}}class Ag{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=o}static Ss(e,t){let r=dn(),o=dn();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Ag(e,t.fromCache,r,o)}}class lE{Ds(e){this.Cs=e}As(e,t,r,o){return 0===(c=t).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||r.isEqual(vt.min())?this.Ns(e,t):this.Cs.Es(e,o).next(c=>{const d=this.xs(t,c);return(Zi(t)||Yi(t))&&this.ks(t.limitType,d,o,r)?this.Ns(e,t):(Dy()<=Po.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ky(t)),this.Cs.As(e,t,r).next(g=>(d.forEach(E=>{g=g.insert(E.key,E)}),g)))});var c}xs(e,t){let r=new bn(vw(e));return t.forEach((o,c)=>{fg(e,c)&&(r=r.add(c))}),r}ks(e,t,r,o){if(r.size!==t.size)return!0;const c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ns(e,t){return Dy()<=Po.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",ky(t)),this.Cs.As(e,t,vt.min())}}class ib{constructor(e,t,r,o){this.persistence=e,this.Os=t,this.O=o,this.Ms=new nr(Ht),this.$s=new zu(c=>Wn(c),cg),this.Fs=vt.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new cE(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function dE(n,e,t,r){return new ib(n,e,t,r)}function hE(n,e){return mv.apply(this,arguments)}function mv(){return mv=(0,Ee.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.gs.getAllMutationBatches(r).next(c=>(o=c,t.Ls(e),t.gs.getAllMutationBatches(r))).next(c=>{const d=[],g=[];let E=dn();for(const T of o){d.push(T.batchId);for(const R of T.mutations)E=E.add(R.key)}for(const T of c){g.push(T.batchId);for(const R of T.mutations)E=E.add(R.key)}return t.Us.Es(r,E).next(T=>({qs:T,removedBatchIds:d,addedBatchIds:g}))})})}),mv.apply(this,arguments)}function sb(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,g,E,T){const R=E.batch,N=R.keys();let z=ve.resolve();return N.forEach(ee=>{z=z.next(()=>T.getEntry(g,ee)).next(Ie=>{const je=E.docVersions.get(ee);bt(null!==je),Ie.version.compareTo(je)<0&&(R.applyToRemoteDocument(Ie,E),Ie.isValidDocument()&&(Ie.setReadTime(E.commitVersion),T.addEntry(Ie)))})}),z.next(()=>d.gs.removeMutationBatch(g,R))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,o))})}function fE(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function Tf(n,e){const t=Ke(n),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.Ms;const g=[];e.targetChanges.forEach((T,R)=>{const N=o.get(R);if(!N)return;g.push(t.Un.removeMatchingKeys(c,T.removedDocuments,R).next(()=>t.Un.addMatchingKeys(c,T.addedDocuments,R)));let z=N.withSequenceNumber(c.currentSequenceNumber);var ee,Ie,je;e.targetMismatches.has(R)?z=z.withResumeToken(Sr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):T.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(T.resumeToken,r)),o=o.insert(R,z),Ie=z,je=T,(0===(ee=N).resumeToken.approximateByteSize()||Ie.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0)&&g.push(t.Un.updateTargetData(c,z))});let E=zs();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,T))}),g.push(pE(c,d,e.documentUpdates).next(T=>{E=T})),!r.isEqual(vt.min())){const T=t.Un.getLastRemoteSnapshotVersion(c).next(R=>t.Un.setTargetsMetadata(c,c.currentSequenceNumber,r));g.push(T)}return ve.waitFor(g).next(()=>d.apply(c)).next(()=>t.Us.Ts(c,E)).next(()=>E)}).then(c=>(t.Ms=o,c))}function pE(n,e,t){let r=dn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=zs();return t.forEach((d,g)=>{const E=o.get(d);g.isNoDocument()&&g.version.isEqual(vt.min())?(e.removeEntry(d,g.readTime),c=c.insert(d,g)):!E.isValidDocument()||g.version.compareTo(E.version)>0||0===g.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(g),c=c.insert(d,g)):Fe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",E.version," Watch version:",g.version)}),c})}function yv(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function Mi(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Un.getTargetData(r,e).next(c=>c?(o=c,ve.resolve(o)):t.Un.allocateTargetId(r).next(d=>(o=new Hu(e,d,0,r.currentSequenceNumber),t.Un.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ms.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function Pd(n,e,t){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,Ee.Z)(function*(n,e,t){const r=Ke(n),o=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ll(d))throw d;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.$s.delete(o.target)}),Cf.apply(this,arguments)}function Ku(n,e,t){const r=Ke(n);let o=vt.min(),c=dn();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,E,T){const R=Ke(g),N=R.$s.get(T);return void 0!==N?ve.resolve(R.Ms.get(N)):R.Un.getTargetData(E,T)}(r,d,qs(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(d,g.targetId).next(E=>{c=E})}).next(()=>r.Os.As(d,e,t?o:vt.min(),t?c:dn())).next(g=>({documents:g,Ks:c})))}function gE(n,e){const t=Ke(n),r=Ke(t.Un),o=t.Ms.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",c=>r.Tt(c,e).next(d=>d?d.target:null))}function mE(n){const e=Ke(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,c){const d=Ke(r);let g=zs(),E=rv(c);const T=Wu(o),R=IDBKeyRange.lowerBound(E,!0);return T.Qt({index:ir.readTimeIndex,range:R},(N,z)=>{const ee=nv(d.O,z);g=g.insert(ee.key,ee),E=z.readTime}).next(()=>({ws:g,readTime:iv(E)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function kd(){return kd=(0,Ee.Z)(function*(n){const e=Ke(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=Wu(r);let c=vt.min();return o.Qt({index:ir.readTimeIndex,reverse:!0},(d,g,E)=>{g.readTime&&(c=iv(g.readTime)),E.done()}).next(()=>c)}(t)).then(t=>{e.Fs=t})}),kd.apply(this,arguments)}function vv(){return vv=(0,Ee.Z)(function*(n,e,t,r){const o=Ke(n);let c=dn(),d=zs();for(const T of t){const R=e.Gs(T.metadata.name);T.document&&(c=c.add(R));const N=e.js(T);N.setReadTime(e.Qs(T.metadata.readTime)),d=d.insert(R,N)}const g=o.Bs.newChangeBuffer({trackRemovals:!0}),E=yield Mi(o,(T=r,qs(Si(sn.fromString(`__bundle__/docs/${T}`)))));var T;return o.persistence.runTransaction("Apply bundle documents","readwrite",T=>pE(T,g,d).next(R=>(g.apply(T),R)).next(R=>o.Un.removeMatchingKeysForTargetId(T,E.targetId).next(()=>o.Un.addMatchingKeys(T,c,E.targetId)).next(()=>o.Us.Ts(T,R)).next(()=>R)))}),vv.apply(this,arguments)}function ab(n,e){return xg.apply(this,arguments)}function xg(){return xg=(0,Ee.Z)(function*(n,e,t=dn()){const r=yield Mi(n,qs(sv(e.bundledQuery))),o=Ke(n);return o.persistence.runTransaction("Save named query","readwrite",c=>{const d=xr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Kn.saveNamedQuery(c,e);const g=r.withResumeToken(Sr.EMPTY_BYTE_STRING,d);return o.Ms=o.Ms.insert(g.targetId,g),o.Un.updateTargetData(c,g).next(()=>o.Un.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>o.Un.addMatchingKeys(c,t,r.targetId)).next(()=>o.Kn.saveNamedQuery(c,e))})}),xg.apply(this,arguments)}class yE{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return ve.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:xr(r.createTime)}),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:sv(r.bundledQuery),readTime:xr(r.readTime)}),ve.resolve();var r}}class _v{constructor(){this.overlays=new nr(Qe.comparator),this.Hs=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(o=>{this.Yt(e,t,o)}),ve.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Hs.get(r);return void 0!==o&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Hs.delete(r)),ve.resolve()}getOverlaysForCollection(e,t,r){const o=new Map,c=t.length+1,d=new Qe(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const E=g.getNext().value,T=E.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&E.largestBatchId>r&&o.set(E.getKey(),E)}return ve.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new nr((T,R)=>T-R);const d=this.overlays.getIterator();for(;d.hasNext();){const T=d.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>r){let R=c.get(T.largestBatchId);null===R&&(R=new Map,c=c.insert(T.largestBatchId,R)),R.set(T.getKey(),T)}}const g=new Map,E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((T,R)=>g.set(R,T)),!(g.size>=o)););return ve.resolve(g)}Yt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);null!==o&&this.Hs.get(o.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new Dg(t,r));let c=this.Hs.get(t);void 0===c&&(c=new Set,this.Hs.set(t,c)),c.add(r.key)}}class Mg{constructor(){this.Js=new bn(Hr.Ys),this.Xs=new bn(Hr.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new Hr(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new Hr(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new Qe(new sn([])),r=new Hr(t,e),o=new Hr(t,e+1),c=[];return this.Xs.forEachInRange([r,o],d=>{this.ei(d),c.push(d.key)}),c}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Qe(new sn([])),r=new Hr(t,e),o=new Hr(t,e+1);let c=dn();return this.Xs.forEachInRange([r,o],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new Hr(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Hr{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Qe.comparator(e.key,t.key)||Ht(e.oi,t.oi)}static Zs(e,t){return Ht(e.oi,t.oi)||Qe.comparator(e.key,t.key)}}class ub{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new bn(Hr.Ys)}checkEmpty(e){return ve.resolve(0===this.gs.length)}addMutationBatch(e,t,r,o){const c=this.ci;this.ci++;const d=new tv(c,t,r,o);this.gs.push(d);for(const g of o)this.ui=this.ui.add(new Hr(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ve.resolve(d)}lookupMutationBatch(e,t){return ve.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.hi(t+1),c=o<0?0:o;return ve.resolve(this.gs.length>c?this.gs[c]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return ve.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Hr(t,0),o=new Hr(t,Number.POSITIVE_INFINITY),c=[];return this.ui.forEachInRange([r,o],d=>{const g=this.ai(d.oi);c.push(g)}),ve.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Ht);return t.forEach(o=>{const c=new Hr(o,0),d=new Hr(o,Number.POSITIVE_INFINITY);this.ui.forEachInRange([c,d],g=>{r=r.add(g.oi)})}),ve.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;Qe.isDocumentKey(c)||(c=c.child(""));const d=new Hr(new Qe(c),0);let g=new bn(Ht);return this.ui.forEachWhile(E=>{const T=E.key.path;return!!r.isPrefixOf(T)&&(T.length===o&&(g=g.add(E.oi)),!0)},d),ve.resolve(this.li(g))}li(e){const t=[];return e.forEach(r=>{const o=this.ai(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){bt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return ve.forEach(t.mutations,o=>{const c=new Hr(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new Hr(t,0),o=this.ui.firstAfterOrEqual(r);return ve.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ve.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class jT{constructor(e){this.di=e,this.docs=new nr(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,d=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ve.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=zs();return t.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Pn.newInvalidDocument(o))}),ve.resolve(r)}getAll(e,t,r){let o=zs();const c=new Qe(t.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:g,value:{document:E}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||E.readTime.compareTo(r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return ve.resolve(o)}_i(e,t){return ve.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new wv(this)}getSize(e){return ve.resolve(this.size)}}class wv extends sE{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Tn.addEntry(e,o)):this.Tn.removeEntry(r)}),ve.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class Ev{constructor(e){this.persistence=e,this.wi=new zu(t=>Wn(t),cg),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.mi=0,this.gi=new Mg,this.targetCount=0,this.yi=Nd.He()}forEachTarget(e,t){return this.wi.forEach((r,o)=>t(o)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),ve.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new Nd(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Ze(t),ve.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.wi.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.wi.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ve.waitFor(c).next(()=>o)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return ve.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),ve.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(d=>{c.push(o.markPotentiallyOrphaned(e,d))}),ve.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return ve.resolve(r)}containsKey(e,t){return ve.resolve(this.gi.containsKey(t))}}class vE{constructor(e,t){this.pi={},this.overlays={},this.Nn=new ys(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new Ev(this),this.indexManager=new QD,this.qn=new jT(r=>this.referenceDelegate.Ii(r)),this.O=new Ww(t),this.Kn=new yE(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _v,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new ub(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const o=new Iv(this.Nn.next());return this.referenceDelegate.Ei(),r(o).next(c=>this.referenceDelegate.Ti(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ai(e,t){return ve.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class Iv extends Gw{constructor(e){super(),this.currentSequenceNumber=e}}class Af{constructor(e){this.persistence=e,this.Ri=new Mg,this.Pi=null}static bi(e){return new Af(e)}get vi(){if(this.Pi)return this.Pi;throw lt()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),ve.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(o=>this.vi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.vi.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.vi,r=>{const o=Qe.fromPath(r);return this.Vi(e,o).next(c=>{c||t.removeEntry(o,vt.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return ve.or([()=>ve.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function _E(n,e){return`firestore_clients_${n}_${e}`}function wE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Dv(n,e){return`firestore_targets_${n}_${e}`}class Rg{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Si(e,t,r){const o=JSON.parse(r);let c,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(c=new Oe(o.error.code,o.error.message))),d?new Rg(e,t,o.state,c):(tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let o,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(o=new Oe(r.error.code,r.error.message))),c?new Fd(e,r.state,o):(tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ld{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,c=lf();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Ay(r.activeTargetIds[d]),c=c.add(r.activeTargetIds[d]);return o?new Ld(e,c):(tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ng{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ng(t.clientId,t.onlineState):(tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bv{constructor(){this.activeTargetIds=lf()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Og{constructor(e,t,r,o,c){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new nr(Ht),this.started=!1,this.$i=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Fi=_E(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new bv),this.Li=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(g){return`firestore_bundle_loaded_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.ds();for(const o of t){if(o===e.xi)continue;const c=e.getItem(_E(e.persistenceKey,o));if(c){const d=Ld.Si(o,c);d&&(e.Mi=e.Mi.insert(d.clientId,d))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const o=e.Qi(r);o&&e.Wi(o)}for(const o of e.$i)e.Oi(o);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Dv(this.persistenceKey,e));if(r){const o=Fd.Si(e,r);o&&(t=o.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ji(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const o=t.er(r.key);return t.nr(o,null)}{const o=t.sr(r.key,r.newValue);if(o)return t.nr(o.clientId,o)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const o=t.ir(r.key,r.newValue);if(o)return t.rr(o)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const o=t.cr(r.key,r.newValue);if(o)return t.ur(o)}}else if(r.key===t.Ki){if(null!==r.newValue){const o=t.Qi(r.newValue);if(o)return t.Wi(o)}}else if(r.key===t.Bi){const o=function(c){let d=ys.A;if(null!=c)try{const g=JSON.parse(c);bt("number"==typeof g),d=g}catch(g){tr("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==ys.A&&t.sequenceNumberHandler(o)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const o=new Rg(this.currentUser,e,t,r),c=wE(this.persistenceKey,this.currentUser,e);this.setItem(c,o.Di())}Ji(e){const t=wE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const o=Dv(this.persistenceKey,e),c=new Fd(e,t,r);this.setItem(o,c.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return Ld.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),o=Number(r[1]);return Rg.Si(new si(void 0!==r[2]?r[2]:null),o,t)}cr(e,t){const r=this.qi.exec(e),o=Number(r[1]);return Fd.Si(o,t)}Qi(e){return Ng.Si(e)}rr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),o=this.zi(this.Mi),c=this.zi(r),d=[],g=[];return c.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{c.has(E)||g.push(E)}),this.syncEngine.dr(d,g).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=lf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Tv{constructor(){this._r=new bv,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new bv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class cb{mr(e){}shutdown(){}}class Cv{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const EE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class lb{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class IE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,o,c){const d=this.$r(e,t);Fe("RestConnection","Sending: ",d,r);const g={};return this.Fr(g,o,c),this.Br(e,d,g,r).then(E=>(Fe("RestConnection","Received: ",E),E),E=>{throw Zc("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}Lr(e,t,r,o,c){return this.Mr(e,t,r,o,c)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Kc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}$r(e,t){return`${this.kr}/v1/${t}:${EE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,o){return new Promise((c,d)=>{const g=new TD;g.listenOnce(J0.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case wy.NO_ERROR:const T=g.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(T)),c(T);break;case wy.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),d(new Oe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case wy.HTTP_ERROR:const R=g.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',R,"response text:",g.getResponseText()),R>0){const N=g.getResponseJson().error;if(N&&N.status&&N.message){const z=function(ee){const Ie=ee.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(Ie)>=0?Ie:fe.UNKNOWN}(N.status);d(new Oe(z,N.message))}else d(new Oe(fe.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Oe(fe.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);g.send(t,"POST",E,r,15)})}Ur(e,t,r){const o=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Y0(),d=Q0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new X0({})),this.Fr(g.initMessageHeaders,t,r),(0,Ut.uI)()||(0,Ut.b$)()||(0,Ut.d)()||(0,Ut.w1)()||(0,Ut.Mn)()||(0,Ut.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Fe("Connection","Creating WebChannel: "+E,g);const T=c.createWebChannel(E,g);let R=!1,N=!1;const z=new lb({Ar:Ie=>{N?Fe("Connection","Not sending because WebChannel is closed:",Ie):(R||(Fe("Connection","Opening WebChannel transport."),T.open(),R=!0),Fe("Connection","WebChannel sending:",Ie),T.send(Ie))},Rr:()=>T.close()}),ee=(Ie,je,nt)=>{Ie.listen(je,Lt=>{try{nt(Lt)}catch(cn){setTimeout(()=>{throw cn},0)}})};return ee(T,eg.EventType.OPEN,()=>{N||Fe("Connection","WebChannel transport opened.")}),ee(T,eg.EventType.CLOSE,()=>{N||(N=!0,Fe("Connection","WebChannel transport closed"),z.Cr())}),ee(T,eg.EventType.ERROR,Ie=>{N||(N=!0,Zc("Connection","WebChannel transport errored:",Ie),z.Cr(new Oe(fe.UNAVAILABLE,"The operation could not be completed")))}),ee(T,eg.EventType.MESSAGE,Ie=>{var je;if(!N){const nt=Ie.data[0];bt(!!nt);const Lt=nt,cn=Lt.error||(null===(je=Lt[0])||void 0===je?void 0:je.error);if(cn){Fe("Connection","WebChannel received error:",cn);const Fn=cn.status;let Vt=function(Ua){const CI=dr[Ua];if(void 0!==CI)return qy(CI)}(Fn),Kn=cn.message;void 0===Vt&&(Vt=fe.INTERNAL,Kn="Unknown error status: "+Fn+" with message "+cn.message),N=!0,z.Cr(new Oe(Vt,Kn)),T.close()}else Fe("Connection","WebChannel received:",nt),z.Nr(nt)}}),ee(d,bD.STAT_EVENT,Ie=>{Ie.stat===Ey.PROXY?Fe("Connection","Detected buffering proxy"):Ie.stat===Ey.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.Dr()},0),z}}function DE(){return"undefined"!=typeof window?window:null}function Gr(){return"undefined"!=typeof document?document:null}function Uo(n){return new Rw(n,!0)}class Av{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=o,this.Gr=c,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),o=Math.max(0,t-r);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,o,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class bE{constructor(e,t,r,o,c,d,g,E){this.Sn=e,this.Xr=r,this.Zr=o,this.eo=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=E,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new Av(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,Ee.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.no===t&&this.po(r,o)},r=>{e(()=>{const o=new Oe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(o)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(o=>{r(()=>this.Io(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}uo(){var e=this;this.state=5,this.ro.Hr((0,Ee.Z)(function*(){e.state=0,e.start()}))}Io(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $T extends bE{constructor(e,t,r,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.O=c}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function Lw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:lt(),o=e.targetChange.targetIds||[],c=function(E,T){return E.N?(bt(void 0===T||"string"==typeof T),Sr.fromBase64String(T||"")):(bt(void 0===T||T instanceof Uint8Array),Sr.fromUint8Array(T||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(E){const T=void 0===E.code?fe.UNKNOWN:qy(E.code);return new Oe(T,E.message||"")}(d);t=new Mw(r,o,c,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Fo(n,r.document.name),c=xr(r.document.updateTime),d=new oi({mapValue:{fields:r.document.fields}}),g=Pn.newFoundDocument(o,c,d);t=new vg(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Fo(n,r.document),c=r.readTime?xr(r.readTime):vt.min(),d=Pn.newNoDocument(o,c);t=new vg([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Fo(n,r.document);t=new vg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return lt();{const r=e.filter,c=new Aw(r.count||0);t=new xw(r.targetId,c)}}var E;return t}(this.O,e),r=function(o){if(!("targetChange"in o))return vt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?vt.min():c.readTime?xr(c.readTime):vt.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=mf(this.O),t.addTarget=function(o,c){let d;const g=c.target;return d=lg(g)?{documents:Dd(o,g)}:{query:Uw(o,g)},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?d.resumeToken=Nw(o,c.resumeToken):c.snapshotVersion.compareTo(vt.min())>0&&(d.readTime=pf(o,c.snapshotVersion.toTimestamp())),d}(this.O,e);const r=function VD(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=mf(this.O),t.removeTarget=e,this.fo(t)}}class Sf extends bE{constructor(e,t,r,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.O=c,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function vf(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,o){let c=xr(r.updateTime?r.updateTime:o);return c.isEqual(vt.min())&&(c=xr(o)),new PD(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.Vo(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=mf(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Id(this.O,r))};this.fo(t)}}class db extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=o,this.Co=!1}No(){if(this.Co)throw new Oe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.eo.Mr(e,t,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(fe.UNKNOWN,o.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.eo.Lr(e,t,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(fe.UNKNOWN,o.toString())})}terminate(){this.Co=!0}}class Sv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(tr(t),this.Oo=!1):Fe("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class hb{constructor(e,t,r,o,c){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=c,this.jo.mr(g=>{r.enqueueAndForget((0,Ee.Z)(function*(){var E;Zu(d)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,Ee.Z)(function*(T){const R=Ke(T);R.Ko.add(4),yield Vd(R),R.Qo.set("Unknown"),R.Ko.delete(4),yield Ud(R)}),function(T){return E.apply(this,arguments)})(d))}))}),this.Qo=new Sv(r,o)}}function Ud(n){return xv.apply(this,arguments)}function xv(){return xv=(0,Ee.Z)(function*(n){if(Zu(n))for(const e of n.Go)yield e(!0)}),xv.apply(this,arguments)}function Vd(n){return xf.apply(this,arguments)}function xf(){return xf=(0,Ee.Z)(function*(n){for(const e of n.Go)yield e(!1)}),xf.apply(this,arguments)}function Mf(n,e){const t=Ke(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),kg(t)?TE(t):Nf(t).co()&&jd(t,e))}function Bd(n,e){const t=Ke(n),r=Nf(t);t.qo.delete(e),r.co()&&Pg(t,e),0===t.qo.size&&(r.co()?r.ho():Zu(t)&&t.Qo.set("Unknown"))}function jd(n,e){n.Wo.Z(e.targetId),Nf(n).Ao(e)}function Pg(n,e){n.Wo.Z(e),Nf(n).Ro(e)}function TE(n){n.Wo=new UD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),Nf(n).start(),n.Qo.Mo()}function kg(n){return Zu(n)&&!Nf(n).oo()&&n.qo.size>0}function Zu(n){return 0===Ke(n).Ko.size}function Mv(n){n.Wo=void 0}function Fg(n){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,Ee.Z)(function*(n){n.qo.forEach((e,t)=>{jd(n,e)})}),Lg.apply(this,arguments)}function fb(n,e){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,Ee.Z)(function*(n,e){Mv(n),kg(n)?(n.Qo.Bo(e),TE(n)):n.Qo.set("Unknown")}),Rf.apply(this,arguments)}function Rv(n,e,t){return CE.apply(this,arguments)}function CE(){return CE=(0,Ee.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof Mw&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(o,c){const d=c.cause;for(const g of c.targetIds)o.qo.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.qo.delete(g),o.Wo.removeTarget(g))}),function(o,c){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ug(n,r)}else if(e instanceof vg?n.Wo.ct(e):e instanceof xw?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(vt.min()))try{const r=yield fE(n.localStore);t.compareTo(r)>=0&&(yield function(o,c){const d=o.Wo.yt(c);return d.targetChanges.forEach((g,E)=>{if(g.resumeToken.approximateByteSize()>0){const T=o.qo.get(E);T&&o.qo.set(E,T.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach(g=>{const E=o.qo.get(g);if(!E)return;o.qo.set(g,E.withResumeToken(Sr.EMPTY_BYTE_STRING,E.snapshotVersion)),Pg(o,g);const T=new Hu(E.target,g,1,E.sequenceNumber);jd(o,T)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield Ug(n,r)}var r}),CE.apply(this,arguments)}function Ug(n,e,t){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,Ee.Z)(function*(n,e,t){if(!ll(e))throw e;n.Ko.add(1),yield Vd(n),n.Qo.set("Offline"),t||(t=()=>fE(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield Ud(n)}))}),Nv.apply(this,arguments)}function Ov(n,e){return e().catch(t=>Ug(n,t,e))}function ml(n){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,Ee.Z)(function*(n){const e=Ke(n),t=yl(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;AE(e);)try{const o=yield yv(e.localStore,r);if(null===o){0===e.Uo.length&&t.ho();break}r=o.batchId,SE(e,o)}catch(o){yield Ug(e,o)}xE(e)&&ME(e)}),Pv.apply(this,arguments)}function AE(n){return Zu(n)&&n.Uo.length<10}function SE(n,e){n.Uo.push(e);const t=yl(n);t.co()&&t.bo&&t.vo(e.mutations)}function xE(n){return Zu(n)&&!yl(n).oo()&&n.Uo.length>0}function ME(n){yl(n).start()}function RE(n){return kv.apply(this,arguments)}function kv(){return kv=(0,Ee.Z)(function*(n){yl(n).Do()}),kv.apply(this,arguments)}function NE(n){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,Ee.Z)(function*(n){const e=yl(n);for(const t of n.Uo)e.vo(t.mutations)}),Vg.apply(this,arguments)}function OE(n,e,t){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,Ee.Z)(function*(n,e,t){const r=n.Uo.shift(),o=Ig.from(r,e,t);yield Ov(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield ml(n)}),Bg.apply(this,arguments)}function pb(n,e){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,Ee.Z)(function*(n,e){var t;e&&yl(n).bo&&(yield(t=(0,Ee.Z)(function*(r,o){if(Gy(c=o.code)&&c!==fe.ABORTED){const d=r.Uo.shift();yl(r).ao(),yield Ov(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield ml(r)}var c}),function(r,o){return t.apply(this,arguments)})(n,e)),xE(n)&&ME(n)}),Fv.apply(this,arguments)}function gb(n,e){return jg.apply(this,arguments)}function jg(){return jg=(0,Ee.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Zu(t);t.Ko.add(3),yield Vd(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield Ud(t)}),jg.apply(this,arguments)}function PE(n,e){return kE.apply(this,arguments)}function kE(){return kE=(0,Ee.Z)(function*(n,e){const t=Ke(n);e?(t.Ko.delete(2),yield Ud(t)):e||(t.Ko.add(2),yield Vd(t),t.Qo.set("Unknown"))}),kE.apply(this,arguments)}function Nf(n){return n.zo||(n.zo=function(e,t,r){const o=Ke(e);return o.No(),new $T(t,o.eo,o.authCredentials,o.appCheckCredentials,o.O,r)}(n.datastore,n.asyncQueue,{Pr:Fg.bind(null,n),vr:fb.bind(null,n),To:Rv.bind(null,n)}),n.Go.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.zo.ao(),kg(n)?TE(n):n.Qo.set("Unknown")):(yield n.zo.stop(),Mv(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function yl(n){return n.Ho||(n.Ho=function(e,t,r){const o=Ke(e);return o.No(),new Sf(t,o.eo,o.authCredentials,o.appCheckCredentials,o.O,r)}(n.datastore,n.asyncQueue,{Pr:RE.bind(null,n),vr:pb.bind(null,n),So:NE.bind(null,n),Vo:OE.bind(null,n)}),n.Go.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Ho.ao(),yield ml(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class FE{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,c){const d=Date.now()+r,g=new FE(e,t,d,o,c);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Of(n,e){if(tr("AsyncQueue",`${e}: ${n}`),ll(n))return new Oe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Pf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=$u(),this.sortedSet=new nr(this.comparator)}static emptySet(e){return new Pf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Pf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mb{constructor(){this.Jo=new nr(Qe.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):lt():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Oa{constructor(e,t,r,o,c,d,g,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Oa(e,t,Pf.emptySet(t),c,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class HT{constructor(){this.Xo=void 0,this.listeners=[]}}class Lv{constructor(){this.queries=new zu(e=>wd(e),nl),this.onlineState="Unknown",this.Zo=new Set}}function Yu(n,e){return $g.apply(this,arguments)}function $g(){return $g=(0,Ee.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1,c=t.queries.get(r);if(c||(o=!0,c=new HT),o)try{c.Xo=yield t.onListen(r)}catch(d){const g=Of(d,`Initialization of query '${ky(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,c),c.listeners.push(e),e.tc(t.onlineState),c.Xo&&e.ec(c.Xo)&&Hg(t)}),$g.apply(this,arguments)}function Uv(n,e){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,Ee.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1;const c=t.queries.get(r);if(c){const d=c.listeners.indexOf(e);d>=0&&(c.listeners.splice(d,1),o=0===c.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Vv.apply(this,arguments)}function Bv(n,e){const t=Ke(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.ec(o)&&(r=!0);d.Xo=o}}r&&Hg(t)}function LE(n,e,t){const r=Ke(n),o=r.queries.get(e);if(o)for(const c of o.listeners)c.onError(t);r.queries.delete(e)}function Hg(n){n.Zo.forEach(e=>{e.next()})}class Gg{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=Oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class GT{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class jv{constructor(e){this.O=e}Gs(e){return Fo(this.O,e)}js(e){return e.metadata.exists?yf(this.O,e.document,!1):Pn.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return xr(e)}}class qg{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=$v(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new jv(this.O);for(const o of e)if(o.metadata.queries){const c=r.Gs(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||dn()).add(c);t.set(d,g)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function Sg(n,e,t,r){return vv.apply(this,arguments)}(e.localStore,new jv(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const o of e.queries)yield ab(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new uE(Object.assign({},e.progress),t)})()}}function $v(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yb{constructor(e){this.key=e}}class vb{constructor(e){this.key=e}}class _b{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=dn(),this.mutatedKeys=dn(),this.mc=vw(e),this.gc=new Pf(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new mb,o=t?t.gc:this.gc;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const E=Zi(this.query)&&o.size===this.query.limit?o.last():null,T=Yi(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((R,N)=>{const z=o.get(R),ee=fg(this.query,N)?N:null,Ie=!!z&&this.mutatedKeys.has(z.key),je=!!ee&&(ee.hasLocalMutations||this.mutatedKeys.has(ee.key)&&ee.hasCommittedMutations);let nt=!1;z&&ee?z.data.isEqual(ee.data)?Ie!==je&&(r.track({type:3,doc:ee}),nt=!0):this.Tc(z,ee)||(r.track({type:2,doc:ee}),nt=!0,(E&&this.mc(ee,E)>0||T&&this.mc(ee,T)<0)&&(g=!0)):!z&&ee?(r.track({type:0,doc:ee}),nt=!0):z&&!ee&&(r.track({type:1,doc:z}),nt=!0,(E||T)&&(g=!0)),nt&&(ee?(d=d.add(ee),c=je?c.add(R):c.delete(R)):(d=d.delete(R),c=c.delete(R)))}),Zi(this.query)||Yi(this.query))for(;d.size>this.query.limit;){const R=Zi(this.query)?d.last():d.first();d=d.delete(R.key),c=c.delete(R.key),r.track({type:1,doc:R})}return{gc:d,Ec:r,ks:g,mutatedKeys:c}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const c=e.Ec.Yo();c.sort((T,R)=>function(N,z){const ee=Ie=>{switch(Ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return ee(N)-ee(z)}(T.type,R.type)||this.mc(T.doc,R.doc)),this.Ac(r);const d=t?this.Rc():[],g=0===this.wc.size&&this.current?1:0,E=g!==this._c;return this._c=g,0!==c.length||E?{snapshot:new Oa(this.query,e.gc,o,c,e.mutatedKeys,0===g,E,!1),Pc:d}:{Pc:d}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new mb,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=dn(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new vb(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new yb(r))}),t}vc(e){this.dc=e.Ks,this.wc=dn();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return Oa.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class wb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Hv{constructor(e){this.key=e,this.Sc=!1}}class Eb{constructor(e,t,r,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Dc={},this.Cc=new zu(g=>wd(g),nl),this.Nc=new Map,this.xc=new Set,this.kc=new nr(Qe.comparator),this.Oc=new Map,this.Mc=new Mg,this.$c={},this.Fc=new Map,this.Bc=Nd.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function qT(n,e){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,Ee.Z)(function*(n,e){const t=KE(n);let r,o;const c=t.Cc.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),o=c.view.Vc();else{const d=yield Mi(t.localStore,qs(e));t.isPrimaryClient&&Mf(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield kf(t,e,r,"current"===g)}return o}),Gv.apply(this,arguments)}function kf(n,e,t,r){return qv.apply(this,arguments)}function qv(){return qv=(0,Ee.Z)(function*(n,e,t,r){n.Uc=(R,N,z)=>{return(ee=(0,Ee.Z)(function*(Ie,je,nt,Lt){let cn=je.view.Ic(nt);cn.ks&&(cn=yield Ku(Ie.localStore,je.query,!1).then(({documents:Kn})=>je.view.Ic(Kn,cn)));const Fn=Lt&&Lt.targetChanges.get(je.targetId),Vt=je.view.applyChanges(cn,Ie.isPrimaryClient,Fn);return t_(Ie,je.targetId,Vt.Pc),Vt.snapshot}),function(Ie,je,nt,Lt){return ee.apply(this,arguments)})(n,R,N,z);var ee};const o=yield Ku(n.localStore,e,!0),c=new _b(e,o.Ks),d=c.Ic(o.documents),g=pt.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=c.applyChanges(d,n.isPrimaryClient,g);t_(n,t,E.Pc);const T=new wb(e,t,c);return n.Cc.set(e,T),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),E.snapshot}),qv.apply(this,arguments)}function Ds(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,Ee.Z)(function*(n,e){const t=Ke(n),r=t.Cc.get(e),o=t.Nc.get(r.targetId);if(o.length>1)return t.Nc.set(r.targetId,o.filter(c=>!nl(c,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Pd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Bd(t.remoteStore,r.targetId),$d(t,r.targetId)}).catch(Zs))):($d(t,r.targetId),yield Pd(t.localStore,r.targetId,!0))}),zv.apply(this,arguments)}function Kv(){return Kv=(0,Ee.Z)(function*(n,e,t){const r=ZE(n);try{const o=yield function(c,d){const g=Ke(c),E=Cr.now(),T=d.reduce((N,z)=>N.add(z.key),dn());let R;return g.persistence.runTransaction("Locally write mutations","readwrite",N=>g.Us.Es(N,T).next(z=>{R=z;const ee=[];for(const Ie of d){const je=FD(Ie,R.get(Ie.key));null!=je&&ee.push(new sl(Ie.key,je,Ry(je.value.mapValue),yr.exists(!0)))}return g.gs.addMutationBatch(N,E,ee,d)})).then(N=>(N.applyToLocalDocumentSet(R),{batchId:N.batchId,changes:R}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,g){let E=c.$c[c.currentUser.toKey()];E||(E=new nr(Ht)),E=E.insert(d,g),c.$c[c.currentUser.toKey()]=E}(r,o.batchId,t),yield Pa(r,o.changes),yield ml(r.remoteStore)}catch(o){const c=Of(o,"Failed to persist write");t.reject(c)}}),Kv.apply(this,arguments)}function UE(n,e){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,Ee.Z)(function*(n,e){const t=Ke(n);try{const r=yield Tf(t.localStore,e);e.targetChanges.forEach((o,c)=>{const d=t.Oc.get(c);d&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Sc=!0:o.modifiedDocuments.size>0?bt(d.Sc):o.removedDocuments.size>0&&(bt(d.Sc),d.Sc=!1))}),yield Pa(t,r,e)}catch(r){yield Zs(r)}}),Ff.apply(this,arguments)}function Zv(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Cc.forEach((c,d)=>{const g=d.view.tc(e);g.snapshot&&o.push(g.snapshot)}),function(c,d){const g=Ke(c);g.onlineState=d;let E=!1;g.queries.forEach((T,R)=>{for(const N of R.listeners)N.tc(d)&&(E=!0)}),E&&Hg(g)}(r.eventManager,e),o.length&&r.Dc.To(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function VE(n,e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,Ee.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Oc.get(e),c=o&&o.key;if(c){let d=new nr(Qe.comparator);d=d.insert(c,Pn.newNoDocument(c,vt.min()));const g=dn().add(c),E=new yg(vt.min(),new Map,new bn(Ht),d,g);yield UE(r,E),r.kc=r.kc.remove(c),r.Oc.delete(e),Wg(r)}else yield Pd(r.localStore,e,!1).then(()=>$d(r,e,t)).catch(Zs)}),Yv.apply(this,arguments)}function BE(n,e){return zg.apply(this,arguments)}function zg(){return zg=(0,Ee.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const o=yield sb(t.localStore,e);jE(t,r,null),Xv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pa(t,o)}catch(o){yield Zs(o)}}),zg.apply(this,arguments)}function Ib(n,e,t){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,Ee.Z)(function*(n,e,t){const r=Ke(n);try{const o=yield function(c,d){const g=Ke(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let T;return g.gs.lookupMutationBatch(E,d).next(R=>(bt(null!==R),T=R.keys(),g.gs.removeMutationBatch(E,R))).next(()=>g.gs.performConsistencyCheck(E)).next(()=>g.Us.Es(E,T))})}(r.localStore,e);jE(r,e,t),Xv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pa(r,o)}catch(o){yield Zs(o)}}),Qv.apply(this,arguments)}function bs(){return bs=(0,Ee.Z)(function*(n,e){const t=Ke(n);Zu(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const d=Ke(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.gs.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Fc.get(r)||[];o.push(e),t.Fc.set(r,o)}catch(r){const o=Of(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),bs.apply(this,arguments)}function Xv(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function jE(n,e,t){const r=Ke(n);let o=r.$c[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.$c[r.currentUser.toKey()]=o}}function $d(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||e_(n,r)})}function e_(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(Bd(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),Wg(n))}function t_(n,e,t){for(const r of t)r instanceof yb?(n.Mc.addReference(r.key,e),Db(n,r)):r instanceof vb?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||e_(n,r.key)):lt()}function Db(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.xc.add(r),Wg(n))}function Wg(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Qe(sn.fromString(e)),r=n.Bc.next();n.Oc.set(r,new Hv(t)),n.kc=n.kc.insert(t,r),Mf(n.remoteStore,new Hu(qs(Si(t.path)),r,2,ys.A))}}function Pa(n,e,t){return $E.apply(this,arguments)}function $E(){return $E=(0,Ee.Z)(function*(n,e,t){const r=Ke(n),o=[],c=[],d=[];var g;r.Cc.isEmpty()||(r.Cc.forEach((g,E)=>{d.push(r.Uc(E,e,t).then(T=>{if(T){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,T.fromCache?"not-current":"current"),o.push(T);const R=Ag.Ss(E.targetId,T);c.push(R)}}))}),yield Promise.all(d),r.Dc.To(o),yield(g=(0,Ee.Z)(function*(E,T){const R=Ke(E);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ve.forEach(T,z=>ve.forEach(z.vs,ee=>R.persistence.referenceDelegate.addReference(N,z.targetId,ee)).next(()=>ve.forEach(z.Vs,ee=>R.persistence.referenceDelegate.removeReference(N,z.targetId,ee)))))}catch(N){if(!ll(N))throw N;Fe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of T){const z=N.targetId;if(!N.fromCache){const ee=R.Ms.get(z),je=ee.withLastLimboFreeSnapshotVersion(ee.snapshotVersion);R.Ms=R.Ms.insert(z,je)}}}),function(E,T){return g.apply(this,arguments)})(r.localStore,c))}),$E.apply(this,arguments)}function HE(n,e){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,Ee.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield hE(t.localStore,e);t.currentUser=e,(o=t).Fc.forEach(d=>{d.forEach(g=>{g.reject(new Oe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pa(t,r.qs)}var o}),Kg.apply(this,arguments)}function bb(n,e){const t=Ke(n),r=t.Oc.get(e);if(r&&r.Sc)return dn().add(r.key);{let o=dn();const c=t.Nc.get(e);if(!c)return o;for(const d of c){const g=t.Cc.get(d);o=o.unionWith(g.view.yc)}return o}}function Tb(n,e){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,Ee.Z)(function*(n,e){const t=Ke(n),r=yield Ku(t.localStore,e.query,!0),o=e.view.vc(r);return t.isPrimaryClient&&t_(t,e.targetId,o.Pc),o}),Zg.apply(this,arguments)}function Lf(n){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,Ee.Z)(function*(n){const e=Ke(n);return mE(e.localStore).then(t=>Pa(e,t))}),Uf.apply(this,arguments)}function GE(n,e,t,r){return n_.apply(this,arguments)}function n_(){return n_=(0,Ee.Z)(function*(n,e,t,r){const o=Ke(n),c=yield function(d,g){const E=Ke(d),T=Ke(E.gs);return E.persistence.runTransaction("Lookup mutation documents","readonly",R=>T.Ge(R,g).next(N=>N?E.Us.Es(R,N):ve.resolve(null)))}(o.localStore,e);var g;null!==c?("pending"===t?yield ml(o.remoteStore):"acknowledged"===t||"rejected"===t?(jE(o,e,r||null),Xv(o,e),g=e,Ke(Ke(o.localStore).gs).Qe(g)):lt(),yield Pa(o,c)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),n_.apply(this,arguments)}function Yg(){return Yg=(0,Ee.Z)(function*(n,e){const t=Ke(n);if(KE(t),ZE(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield zE(t,r.toArray());t.Lc=!0,yield PE(t.remoteStore,!0);for(const c of o)Mf(t.remoteStore,c)}else if(!1===e&&!1!==t.Lc){const r=[];let o=Promise.resolve();t.Nc.forEach((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>($d(t,d),Pd(t.localStore,d,!0))),Bd(t.remoteStore,d)}),yield o,yield zE(t,r),function(c){const d=Ke(c);d.Oc.forEach((g,E)=>{Bd(d.remoteStore,E)}),d.Mc.ii(),d.Oc=new Map,d.kc=new nr(Qe.comparator)}(t),t.Lc=!1,yield PE(t.remoteStore,!1)}}),Yg.apply(this,arguments)}function zE(n,e,t){return r_.apply(this,arguments)}function r_(){return r_=(0,Ee.Z)(function*(n,e,t){const r=Ke(n),o=[],c=[];for(const d of e){let g;const E=r.Nc.get(d);if(E&&0!==E.length){g=yield Mi(r.localStore,qs(E[0]));for(const T of E){const R=r.Cc.get(T),N=yield Tb(r,R);N.snapshot&&c.push(N.snapshot)}}else{const T=yield gE(r.localStore,d);g=yield Mi(r.localStore,T),yield kf(r,Cb(T),d,!1)}o.push(g)}return r.Dc.To(c),o}),r_.apply(this,arguments)}function Cb(n){return mw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zT(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).ds()}function WE(n,e,t,r){return i_.apply(this,arguments)}function i_(){return i_=(0,Ee.Z)(function*(n,e,t,r){const o=Ke(n);if(o.Lc)Fe("SyncEngine","Ignoring unexpected query state notification.");else if(o.Nc.has(e))switch(t){case"current":case"not-current":{const c=yield mE(o.localStore),d=yg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Pa(o,c,d);break}case"rejected":yield Pd(o.localStore,e,!0),$d(o,e,r);break;default:lt()}}),i_.apply(this,arguments)}function Ab(n,e,t){return s_.apply(this,arguments)}function s_(){return s_=(0,Ee.Z)(function*(n,e,t){const r=KE(n);if(r.Lc){for(const o of e){if(r.Nc.has(o)){Fe("SyncEngine","Adding an already active target "+o);continue}const c=yield gE(r.localStore,o),d=yield Mi(r.localStore,c);yield kf(r,Cb(c),d.targetId,!1),Mf(r.remoteStore,d)}for(const o of t)r.Nc.has(o)&&(yield Pd(r.localStore,o,!1).then(()=>{Bd(r.remoteStore,o),$d(r,o)}).catch(Zs))}}),s_.apply(this,arguments)}function KE(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VE.bind(null,e),e.Dc.To=Bv.bind(null,e.eventManager),e.Dc.qc=LE.bind(null,e.eventManager),e}function ZE(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ib.bind(null,e),e}class Sb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.O=Uo(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return dE(this.persistence,new lE,e.initialUser,this.O)}jc(e){return new vE(Af.bi,this.O)}Gc(e){return new Tv}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xb extends Sb{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield function ob(n){return kd.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield ZE(r.zc.syncEngine),yield ml(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return dE(this.persistence,new lE,e.initialUser,this.O)}Qc(e){return new VT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=Cg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ji.withCacheSize(this.cacheSizeBytes):Ji.DEFAULT;return new gv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DE(),Gr(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new Tv}}class Mb extends xb{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const o=r.zc.syncEngine;r.sharedClientState instanceof Og&&(r.sharedClientState.syncEngine={hr:GE.bind(null,o),lr:WE.bind(null,o),dr:Ab.bind(null,o),ds:zT.bind(null,o),ar:Lf.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var c=(0,Ee.Z)(function*(d){yield function qE(n,e){return Yg.apply(this,arguments)}(r.zc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return c.apply(this,arguments)}}())})()}Gc(e){const t=DE();if(!Og.Vt(t))throw new Oe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Cg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Og(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Hd{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Zv(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=HE.bind(null,r.syncEngine),yield PE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Lv}createDatastore(e){const t=Uo(e.databaseInfo.databaseId),r=new IE(e.databaseInfo);return new db(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,c=g=>Zv(this.syncEngine,g,0),d=Cv.Vt()?new Cv:new cb,new hb(t,r,o,c,d);var t,r,o,c,d}createSyncEngine(e,t){return function(r,o,c,d,g,E,T){const R=new Eb(r,o,c,d,g,E);return T&&(R.Lc=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Ke(t);Fe("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield Vd(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YE(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Qg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QE{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Vr,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),o=Number(r);isNaN(o)&&e.eu(`length string (${r}) is not valid number`);const c=yield e.nu(o);return new GT(JSON.parse(c),t.length+o)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,Ee.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class vl{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ee.Z)(function*(c,d){const g=Ke(c),E=mf(g.O)+"/documents",T={documents:d.map(ee=>gf(g.O,ee))},R=yield g.Lr("BatchGetDocuments",E,T),N=new Map;R.forEach(ee=>{const Ie=function Fw(n,e){return"found"in e?function(t,r){bt(!!r.found);const o=Fo(t,r.found.name),c=xr(r.found.updateTime),d=new oi({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(o,c,d)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const o=Fo(t,r.missing),c=xr(r.readTime);return Pn.newNoDocument(o,c)}(n,e):lt()}(g.O,ee);N.set(Ie.key.toString(),Ie)});const z=[];return d.forEach(ee=>{const Ie=N.get(ee.toString());bt(!!Ie),z.push(Ie)}),z}),function(c,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const c=Qe.fromPath(o);e.mutations.push(new Hy(c,e.precondition(c)))}),yield(r=(0,Ee.Z)(function*(o,c){const d=Ke(o),g=mf(d.O)+"/documents",E={writes:c.map(T=>Id(d.O,T))};yield d.Mr("Commit",g,E)}),function(o,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?yr.updateTime(t):yr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Oe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yr.updateTime(t)}return yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JE{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.ru=5,this.ro=new Av(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,Ee.Z)(function*(){const t=new vl(e.datastore),r=e.cu(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(c=>{e.uu(c)}))}).catch(o=>{e.uu(o)})}))}cu(e){try{const t=this.updateFunction(e);return!Ta(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Gy(t)}return!1}}class o_{constructor(e,t,r,o){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=si.UNAUTHENTICATED,this.clientId=iw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ee.Z)(function*(g){Fe("FirestoreClient","Received user=",g.uid),yield c.authCredentialListener(g),c.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Fe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Of(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Jg(n,e){return a_.apply(this,arguments)}function a_(){return a_=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ee.Z)(function*(c){r.isEqual(c)||(yield hE(e.localStore,c),r=c)});return function(c){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),a_.apply(this,arguments)}function Xg(n,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Gd(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>gb(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,c)=>gb(e.remoteStore,c)),n.onlineComponents=e}),Vf.apply(this,arguments)}function Gd(n){return XE.apply(this,arguments)}function XE(){return XE=(0,Ee.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield Jg(n,new Sb)),n.offlineComponents}),XE.apply(this,arguments)}function u_(n){return eI.apply(this,arguments)}function eI(){return eI=(0,Ee.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield Xg(n,new Hd)),n.onlineComponents}),eI.apply(this,arguments)}function Rb(n){return Gd(n).then(e=>e.persistence)}function em(n){return Gd(n).then(e=>e.localStore)}function tI(n){return u_(n).then(e=>e.remoteStore)}function c_(n){return u_(n).then(e=>e.syncEngine)}function qd(n){return l_.apply(this,arguments)}function l_(){return l_=(0,Ee.Z)(function*(n){const e=yield u_(n),t=e.eventManager;return t.onListen=qT.bind(null,e.syncEngine),t.onUnlisten=Ds.bind(null,e.syncEngine),t}),l_.apply(this,arguments)}function sI(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(o,c,d,g,E){const T=new Qg({next:N=>{c.enqueueAndForget(()=>Uv(o,R));const z=N.docs.has(d);!z&&N.fromCache?E.reject(new Oe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&N.fromCache&&g&&"server"===g.source?E.reject(new Oe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(N)},error:N=>E.reject(N)}),R=new Gg(Si(d.path),T,{includeMetadataChanges:!0,uc:!0});return Yu(o,R)}(yield qd(n),n.asyncQueue,e,t,r)})),r.promise}function d_(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(o,c,d,g,E){const T=new Qg({next:N=>{c.enqueueAndForget(()=>Uv(o,R)),N.fromCache&&"server"===g.source?E.reject(new Oe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(N)},error:N=>E.reject(N)}),R=new Gg(d,T,{includeMetadataChanges:!0,uc:!0});return Yu(o,R)}(yield qd(n),n.asyncQueue,e,t,r)})),r.promise}const aI=new Map;function p_(n,e,t){if(!t)throw new Oe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ob(n,e,t,r){if(!0===e&&!0===r)throw new Oe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Pb(n){if(!Qe.isDocumentKey(n))throw new Oe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kb(n){if(Qe.isDocumentKey(n))throw new Oe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function Zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tm(n);throw new Oe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uI(n,e){if(e<=0)throw new Oe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class cI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ob("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bf{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cI({}),this._settingsFrozen=!1,e instanceof Uu?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Oe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(o.options.projectId)}(e))}get app(){if(!this._app)throw new Oe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new CD;switch(t.type){case"gapi":const r=t.client;return bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new tg(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Oe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aI.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),aI.delete(e),t.terminate())}(this),Promise.resolve()}}class kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class Ri{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ri(this.firestore,e,this._query)}}class ka extends Ri{constructor(e,t,r){super(e,t,Si(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new Qe(e))}withConverter(e){return new ka(this.firestore,e,this._path)}}function Lb(n,e,...t){if(n=(0,Ut.m9)(n),p_("collection","path",e),n instanceof Bf){const r=sn.fromString(e,...t);return kb(r),new ka(n,null,r)}{if(!(n instanceof kn||n instanceof ka))throw new Oe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return kb(r),new ka(n.firestore,null,r)}}function nm(n,e,...t){if(n=(0,Ut.m9)(n),1===arguments.length&&(e=iw.R()),p_("doc","path",e),n instanceof Bf){const r=sn.fromString(e,...t);return Pb(r),new kn(n,null,new Qe(r))}{if(!(n instanceof kn||n instanceof ka))throw new Oe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return Pb(r),new kn(n.firestore,n instanceof ka?n.converter:null,new Qe(r))}}function Ub(n,e){return n=(0,Ut.m9)(n),e=(0,Ut.m9)(e),(n instanceof kn||n instanceof ka)&&(e instanceof kn||e instanceof ka)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Vb(n,e){return n=(0,Ut.m9)(n),e=(0,Ut.m9)(e),n instanceof Ri&&e instanceof Ri&&n.firestore===e.firestore&&nl(n._query,e._query)&&n.converter===e.converter}class YT{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new Av(this,"async_queue_retry"),this.yu=()=>{const t=Gr();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=Gr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=Gr();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new Vr;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!ll(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,tr("INTERNAL UNHANDLED ERROR: ",function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),d}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const o=FE.createAndSchedule(this,e,t,r,c=>this.Tu(c));return this.du.push(o),o}pu(){this._u&&lt()}verifyOperationInProgress(){}Au(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function lI(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class i{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class a extends Bf{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new YT,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||y(this),this._firestoreClient.terminate()}}function h(n){return n._firestoreClient||y(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function y(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ow(n._databaseId,c,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var c,g;n._firestoreClient=new o_(n._authCredentials,n._appCheckCredentials,n._queue,r)}function C(n,e,t){const r=new Vr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield Jg(n,t),yield Xg(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(c=o).name?c.code===fe.FAILED_PRECONDITION||c.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function Xe(n){if(n._initialized||n._terminated)throw new Oe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class be{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tt(Sr.fromBase64String(e))}catch(t){throw new Oe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tt(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gt{constructor(e){this._methodName=e}}class vi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const _l=/^__.*__$/;class g_{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new af(e,this.data,t,this.fieldTransforms)}}class rm{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function im(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class zd{constructor(e,t,r,o,c,d){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=o,void 0===c&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new zd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Su({path:r,Cu:!1});return o.Nu(e),o}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Su({path:r,Cu:!1});return o.vu(),o}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return hI(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(im(this.Vu)&&_l.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class m_{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||Uo(e)}Fu(e,t,r,o=!1){return new zd({Vu:e,methodName:t,$u:r,path:Ar.emptyPath(),Cu:!1,Mu:o},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Fa(n){const e=n._freezeSettings(),t=Uo(n._databaseId);return new m_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Wd(n,e,t,r,o,c={}){const d=n.Fu(c.merge||c.mergeFields?2:0,e,t,o);Hb("Data must be an object, but it was:",d,r);const g=JT(r,d);let E,T;if(c.merge)E=new Lu(d.fieldMask),T=d.fieldTransforms;else if(c.mergeFields){const R=[];for(const N of c.mergeFields){const z=Gb(e,N,t);if(!d.contains(z))throw new Oe(fe.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);eC(R,z)||R.push(z)}E=new Lu(R),T=d.fieldTransforms.filter(N=>E.covers(N.field))}else E=null,T=d.fieldTransforms;return new g_(new oi(g),E,T)}class wl extends Gt{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wl}}function sm(n,e,t){return new zd({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class Bb extends Gt{_toFieldTransform(e){return new of(e.path,new rl)}isEqual(e){return e instanceof Bb}}class oA extends Gt{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=sm(this,e,!0),r=this.Bu.map(c=>jf(c,t)),o=new Bu(r);return new of(e.path,o)}isEqual(e){return this===e}}class aA extends Gt{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=sm(this,e,!0),r=this.Bu.map(c=>jf(c,t)),o=new ju(r);return new of(e.path,o)}isEqual(e){return this===e}}class uA extends Gt{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new il(e.O,ww(e.O,this.Lu));return new of(e.path,t)}isEqual(e){return this===e}}function jb(n,e,t,r){const o=n.Fu(1,e,t);Hb("Data must be an object, but it was:",o,r);const c=[],d=oi.empty();hd(r,(E,T)=>{const R=dI(e,E,t);T=(0,Ut.m9)(T);const N=o.xu(R);if(T instanceof wl)c.push(R);else{const z=jf(T,N);null!=z&&(c.push(R),d.set(R,z))}});const g=new Lu(c);return new rm(d,g,o.fieldTransforms)}function $b(n,e,t,r,o,c){const d=n.Fu(1,e,t),g=[Gb(e,r,t)],E=[o];if(c.length%2!=0)throw new Oe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<c.length;z+=2)g.push(Gb(e,c[z])),E.push(c[z+1]);const T=[],R=oi.empty();for(let z=g.length-1;z>=0;--z)if(!eC(T,g[z])){const ee=g[z];let Ie=E[z];Ie=(0,Ut.m9)(Ie);const je=d.xu(ee);if(Ie instanceof wl)T.push(ee);else{const nt=jf(Ie,je);null!=nt&&(T.push(ee),R.set(ee,nt))}}const N=new Lu(T);return new rm(R,N,d.fieldTransforms)}function QT(n,e,t,r=!1){return jf(t,n.Fu(r?4:3,e))}function jf(n,e){if(XT(n=(0,Ut.m9)(n)))return Hb("Unsupported field value:",e,n),JT(n,e);if(n instanceof Gt)return function(t,r){if(!im(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const o=[];let c=0;for(const d of t){let g=jf(d,r.ku(c));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),c++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Ut.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ww(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Cr.fromDate(t);return{timestampValue:pf(r.O,o)}}if(t instanceof Cr){const o=new Cr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:pf(r.O,o)}}if(t instanceof vi)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tt)return{bytesValue:Nw(r.O,t._byteString)};if(t instanceof kn){const o=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(o))throw r.Ou(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_g(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${tm(t)}`)}(n,e)}function JT(n,e){const t={};return rg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hd(n,(r,o)=>{const c=jf(o,e.Du(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function XT(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Cr||n instanceof vi||n instanceof Tt||n instanceof kn||n instanceof Gt)}function Hb(n,e,t){if(!XT(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=tm(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function Gb(n,e,t){if((e=(0,Ut.m9)(e))instanceof be)return e._internalPath;if("string"==typeof e)return dI(n,e);throw hI("Field path arguments must be of type string or ",n,!1,void 0,t)}const cA=new RegExp("[~\\*/\\[\\]]");function dI(n,e,t){if(e.search(cA)>=0)throw hI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new be(...e.split("."))._internalPath}catch(r){throw hI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hI(n,e,t,r,o){const c=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let E="";return(c||d)&&(E+=" (found",c&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new Oe(fe.INVALID_ARGUMENT,g+n+E)}function eC(n,e){return n.some(t=>t.isEqual(e))}class y_{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lA extends y_{data(){return super.data()}}function fI(n,e){return"string"==typeof e?dI(n,e):e instanceof be?e._internalPath:e._delegate._internalPath}class $f{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class El extends y_{constructor(e,t,r,o,c,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new v_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class v_ extends El{data(e={}){return super.data(e)}}class Kd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new $f(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new v_(this._firestore,this._userDataWriter,r.key,r,new $f(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new v_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new $f(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new v_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new $f(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,T=-1;return 0!==d.type&&(E=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),1!==d.type&&(c=c.add(d.doc),T=c.indexOf(d.doc.key)),{type:dA(d.type),doc:g,oldIndex:E,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function tC(n,e){return n instanceof El&&e instanceof El?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kd&&e instanceof Kd&&n._firestore===e._firestore&&Vb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function nC(n){if(Yi(n)&&0===n.explicitOrderBy.length)throw new Oe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class __{}function Zd(n,...e){for(const t of e)n=t._apply(n);return n}class hA extends __{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=Fa(e.firestore),r=function(o,c,d,g,E,T,R){let N;if(E.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if("in"===T||"not-in"===T){uC(R,T);const ee=[];for(const Ie of R)ee.push(aC(g,o,Ie));N={arrayValue:{values:ee}}}else N=aC(g,o,R)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||uC(R,T),N=QT(d,"where",R,"in"===T||"not-in"===T);const z=mi.create(E,T,N);return function(ee,Ie){if(Ie.S()){const nt=hg(ee);if(null!==nt&&!nt.isEqual(Ie.field))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${nt.toString()}' and '${Ie.field.toString()}'`);const Lt=dg(ee);null!==Lt&&cC(0,Ie.field,Lt)}const je=function(nt,Lt){for(const cn of nt.filters)if(Lt.indexOf(cn.op)>=0)return cn.op;return null}(ee,function(nt){switch(nt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ie.op));if(null!==je)throw new Oe(fe.INVALID_ARGUMENT,je===Ie.op?`Invalid query. You cannot use more than one '${Ie.op.toString()}' filter.`:`Invalid query. You cannot use '${Ie.op.toString()}' filters with '${je.toString()}' filters.`)}(o,z),z}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new Ri(e.firestore,e.converter,function(o,c){const d=o.filters.concat([c]);return new Ca(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class pA extends __{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,o,c){if(null!==r.startAt)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new nf(o,c);return function(g,E){if(null===dg(g)){const T=hg(g);null!==T&&cC(0,T,E.field)}}(r,d),d}(e._query,this.Uu,this.Gu);return new Ri(e.firestore,e.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new Ca(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class rC extends __{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new Ri(e.firestore,e.converter,yw(e._query,this.ju,this.Qu))}}class iC extends __{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=oC(e,this.type,this.Wu,this.zu);return new Ri(e.firestore,e.converter,(o=t,new Ca((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class sC extends __{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=oC(e,this.type,this.Wu,this.zu);return new Ri(e.firestore,e.converter,(o=t,new Ca((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function oC(n,e,t,r){if(t[0]=(0,Ut.m9)(t[0]),t[0]instanceof y_)return function(o,c,d,g,E){if(!g)throw new Oe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const T=[];for(const R of _d(o))if(R.field.isKeyField())T.push(og(c,g.key));else{const N=g.data.field(R.field);if(Cy(N))throw new Oe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const z=R.field.canonicalString();throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}T.push(N)}return new tl(T,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Fa(n.firestore);return function(c,d,g,E,T,R){const N=c.explicitOrderBy;if(T.length>N.length)throw new Oe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let ee=0;ee<T.length;ee++){const Ie=T[ee];if(N[ee].field.isKeyField()){if("string"!=typeof Ie)throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof Ie}`);if(!Py(c)&&-1!==Ie.indexOf("/"))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${Ie}' contains a slash.`);const je=c.path.child(sn.fromString(Ie));if(!Qe.isDocumentKey(je))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${je}' is not because it contains an odd number of segments.`);const nt=new Qe(je);z.push(og(d,nt))}else{const je=QT(g,E,Ie);z.push(je)}}return new tl(z,R)}(n._query,n.firestore._databaseId,o,e,t,r)}}function aC(n,e,t){if("string"==typeof(t=(0,Ut.m9)(t))){if(""===t)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Py(e)&&-1!==t.indexOf("/"))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Qe.isDocumentKey(r))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return og(n,new Qe(r))}if(t instanceof kn)return og(n,t._key);throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tm(t)}.`)}function uC(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function cC(n,e,t){if(!t.isEqual(e))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class qb{convertValue(e,t="none"){switch(Xc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return hd(e.fields,(o,c)=>{r[o]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new vi(On(e.latitude),On(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=sg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jc(e));default:return null}}convertTimestamp(e){const t=po(e);return new Cr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);bt($D(r));const o=new Uu(r.get(1),r.get(3)),c=new Qe(r.popFirst(5));return o.isEqual(t)||tr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function pI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class IA extends qb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}class lC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fa(e)}set(e,t,r){this._verifyNotCommitted();const o=Yd(e,this._firestore),c=pI(o.converter,t,r),d=Wd(this._dataReader,"WriteBatch.set",o._key,c,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,yr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const c=Yd(e,this._firestore);let d;return d="string"==typeof(t=(0,Ut.m9)(t))||t instanceof be?$b(this._dataReader,"WriteBatch.update",c._key,t,r,o):jb(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yd(e,this._firestore);return this._mutations=this._mutations.concat(new uf(t._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yd(n,e){if((n=(0,Ut.m9)(n)).firestore!==e)throw new Oe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Hf extends qb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function dC(n,e,t){n=Zt(n,kn);const r=Zt(n.firestore,a),o=pI(n.converter,e,t);return om(r,[Wd(Fa(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,yr.none())])}function hC(n,e,t,...r){n=Zt(n,kn);const o=Zt(n.firestore,a),c=Fa(o);let d;return d="string"==typeof(e=(0,Ut.m9)(e))||e instanceof be?$b(c,"updateDoc",n._key,e,t,r):jb(c,"updateDoc",n._key,e),om(o,[d.toMutation(n._key,yr.exists(!0))])}function fC(n,...e){var t,r,o;n=(0,Ut.m9)(n);let c={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||lI(e[d])||(c=e[d],d++);const g={includeMetadataChanges:c.includeMetadataChanges};if(lI(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let E,T,R;if(n instanceof kn)T=Zt(n.firestore,a),R=Si(n._key.path),E={next:N=>{e[d]&&e[d](zb(T,n,N))},error:e[d+1],complete:e[d+2]};else{const N=Zt(n,Ri);T=Zt(N.firestore,a),R=N._query;const z=new Hf(T);E={next:ee=>{e[d]&&e[d](new Kd(T,z,N,ee))},error:e[d+1],complete:e[d+2]},nC(n._query)}return function(N,z,ee,Ie){const je=new Qg(Ie),nt=new Gg(z,je,ee);return N.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Yu(yield qd(N),nt)})),()=>{je.Jc(),N.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Uv(yield qd(N),nt)}))}}(h(T),R,g,E)}function om(n,e){return function(t,r){const o=new Vr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function Wv(n,e,t){return Kv.apply(this,arguments)}(yield c_(t),r,o)})),o.promise}(h(n),e)}function zb(n,e,t){const r=t.docs.get(e._key),o=new Hf(n);return new El(n,o,e._key,r,new $f(t.hasPendingWrites,t.fromCache),e.converter)}class NA extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fa(e)}get(e){const t=Yd(e,this._firestore),r=new IA(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return lt();const c=o[0];if(c.isFoundDocument())return new y_(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new y_(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const o=Yd(e,this._firestore),c=pI(o.converter,t,r),d=Wd(this._dataReader,"Transaction.set",o._key,c,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const c=Yd(e,this._firestore);let d;return d="string"==typeof(t=(0,Ut.m9)(t))||t instanceof be?$b(this._dataReader,"Transaction.update",c._key,t,r,o):jb(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=Yd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yd(e,this._firestore),r=new Hf(this._firestore);return super.get(e).then(o=>new El(this._firestore,r,t._key,o._document,new $f(!1,!1),t.converter))}}function Wb(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function gC(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function mC(){if(!function Ty(){return"undefined"!=typeof atob}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Kc=Tu.SDK_VERSION,(0,Tu._registerComponent)(new Ch.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),c=new a(o,new AD(t.getProvider("auth-internal")),new rw(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC")),(0,Tu.registerVersion)(Iy,"3.4.5",n),(0,Tu.registerVersion)(Iy,"3.4.5","esm2017")}();class w_{constructor(e){this._delegate=e}static fromBase64String(e){return mC(),new w_(Tt.fromBase64String(e))}static fromUint8Array(e){return gC(),new w_(Tt.fromUint8Array(e))}toBase64(){return mC(),this._delegate.toBase64()}toUint8Array(){return gC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Kb(n){return function jA(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class $A{enableIndexedDbPersistence(e,t){return function _(n,e){Xe(n=Zt(n,a));const t=h(n),r=n._freezeSettings(),o=new Hd;return C(t,o,new xb(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function I(n){Xe(n=Zt(n,a));const e=h(n),t=n._freezeSettings(),r=new Hd;return C(e,r,new Mb(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function S(n){if(n._initialized&&!n._terminated)throw new Oe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Is.Vt())return Promise.resolve();const o=r+"main";yield Is.delete(o)}),function(r){return t.apply(this,arguments)})(Cg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class yC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Uu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Fb(n,e,t,r={}){var o;const c=(n=Zt(n,Bf))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Zc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=si.MOCK_USER;else{d=(0,Ut.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Oe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new si(E)}n._authCredentials=new ew(new Yc(d,g))}}(this._delegate,e,t,r)}enableNetwork(){return function B(n){return function nI(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Rb(n),t=yield tI(n);return e.setNetworkEnabled(!0),function(r){const o=Ke(r);return o.Ko.delete(0),Ud(o)}(t)}))}(h(n=Zt(n,a)))}(this._delegate)}disableNetwork(){return function Q(n){return function rI(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Rb(n),t=yield tI(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(o){const c=Ke(o);c.Ko.add(0),yield Vd(c),c.Qo.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(h(n=Zt(n,a)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ob("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function k(n){return function(e){const t=new Vr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function Jv(n,e){return bs.apply(this,arguments)}(yield c_(e),t)})),t.promise}(h(n=Zt(n,a)))}(this._delegate)}onSnapshotsInSync(e){return function RA(n,e){return function h_(n,e){const t=new Qg(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield qd(n),o=t,Ke(r).Zo.add(o),void o.next();var r,o})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield qd(n),o=t,void Ke(r).Zo.delete(o);var r,o}))}}(h(n=Zt(n,a)),lI(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new am(this,Lb(this._delegate,e))}catch(t){throw Ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vo(this,nm(this._delegate,e))}catch(t){throw Ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Cs(this,function ZT(n,e){if(n=Zt(n,Bf),p_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ri(n,null,(t=e,new Ca(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function OA(n,e){return function KT(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const r=yield(o=n,u_(o).then(c=>c.datastore));var o;new JE(n.asyncQueue,r,e,t).run()})),t.promise}(h(n=Zt(n,a)),t=>e(new NA(n,t)))}(this._delegate,t=>e(new vC(this,t)))}batch(){return h(this._delegate),new _C(new lC(this._delegate,e=>om(this._delegate,e)))}loadBundle(e){return function Le(n,e){const t=h(n=Zt(n,a)),r=new i;return function oI(n,e,t,r){const o=function(c,d){let g;return g="string"==typeof c?(new TextEncoder).encode(c):c,E=function(E,T){if(E instanceof Uint8Array)return YE(E,T);if(E instanceof ArrayBuffer)return YE(new Uint8Array(E),T);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new QE(E,d);var E}(t,Uo(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function WT(n,e,t){const r=Ke(n);var o;(o=(0,Ee.Z)(function*(c,d,g){try{const E=yield d.getMetadata();if(yield function(z,ee){const Ie=Ke(z),je=xr(ee.createTime);return Ie.persistence.runTransaction("hasNewerBundle","readonly",nt=>Ie.Kn.getBundleMetadata(nt,ee.id)).then(nt=>!!nt&&nt.createTime.compareTo(je)>=0)}(c.localStore,E))return yield d.close(),void g._completeWith((z=E,{taskState:"Success",documentsLoaded:z.totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}));g._updateProgress($v(E));const T=new qg(E,c.localStore,d.O);let R=yield d.Kc();for(;R;){const z=yield T.lc(R);z&&g._updateProgress(z),R=yield d.Kc()}const N=yield T.complete();yield Pa(c,N.ws,void 0),yield function(z,ee){const Ie=Ke(z);return Ie.persistence.runTransaction("Save bundle","readwrite",je=>Ie.Kn.saveBundleMetadata(je,ee))}(c.localStore,E),g._completeWith(N.progress)}catch(E){Zc("SyncEngine",`Loading bundle failed with ${E}`),g._failWith(E)}var z}),function(c,d,g){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield c_(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function He(n,e){return function f_(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const o=Ke(t);return o.persistence.runTransaction("Get named query","readonly",c=>o.Kn.getNamedQuery(c,r))}(yield em(n),e)}))}(h(n=Zt(n,a)),e).then(t=>t?new Ri(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Cs(this,t):null)}}class gI extends qb{constructor(e){super(),this.firestore=e}convertBytes(e){return new w_(new Tt(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Vo.forKey(t,this.firestore,null)}}class vC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gI(e)}get(e){const t=qf(e);return this._delegate.get(t).then(r=>new E_(this._firestore,new El(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=qf(e);return r?(Wb("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=qf(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=qf(e);return this._delegate.delete(t),this}}class _C{constructor(e){this._delegate=e}set(e,t,r){const o=qf(e);return r?(Wb("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=qf(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=qf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new v_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new I_(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Gf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let c=o.get(t);return c||(c=new Gf(e,new gI(e),t),o.set(t,c)),c}}Gf.INSTANCES=new WeakMap;class Vo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vo(t,new kn(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new Vo(t,new kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new am(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new am(this.firestore,Lb(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ut.m9)(e))instanceof kn&&Ub(this._delegate,e)}set(e,t){t=Wb("DocumentReference.set",t);try{return t?dC(this._delegate,e,t):dC(this._delegate,e)}catch(r){throw Ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?hC(this._delegate,e):hC(this._delegate,e,t,...r)}catch(o){throw Ts(o,"updateDoc()","DocumentReference.update()")}}delete(){return function xA(n){return om(Zt(n.firestore,a),[new uf(n._key,yr.none())])}(this._delegate)}onSnapshot(...e){const t=wC(e),r=EC(e,o=>new E_(this.firestore,new El(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return fC(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function bA(n){n=Zt(n,kn);const e=Zt(n.firestore,a),t=h(e),r=new Hf(e);return function iI(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(o,c,d){try{const g=yield function(E,T){const R=Ke(E);return R.persistence.runTransaction("read document","readonly",N=>R.Us.ys(N,T))}(o,c);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new Oe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const E=Of(g,`Failed to get document '${c} from cache`);d.reject(E)}}),function(o,c,d){return r.apply(this,arguments)})(yield em(n),e,t);var r})),t.promise}(t,n._key).then(o=>new El(e,r,n._key,o,new $f(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function TA(n){n=Zt(n,kn);const e=Zt(n.firestore,a);return sI(h(e),n._key,{source:"server"}).then(t=>zb(e,n,t))}(this._delegate):function DA(n){n=Zt(n,kn);const e=Zt(n.firestore,a);return sI(h(e),n._key).then(t=>zb(e,n,t))}(this._delegate),t.then(r=>new E_(this.firestore,new El(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Vo(this.firestore,this._delegate.withConverter(e?Gf.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function wC(n){for(const e of n)if("object"==typeof e&&!Kb(e))return e;return{}}function EC(n,e){var t,r;let o;return o=Kb(n[0])?n[0]:Kb(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{o.next&&o.next(e(c))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class E_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return tC(this._delegate,e._delegate)}}class I_ extends E_{data(e){const t=this._delegate.data(e);return function OT(n,e){n||lt()}(void 0!==t),t}}class Cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gI(e)}where(e,t,r){try{return new Cs(this.firestore,Zd(this._delegate,function fA(n,e,t){const r=e,o=fI("where",n);return new hA(o,r,t)}(e,t,r)))}catch(o){throw Ts(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Cs(this.firestore,Zd(this._delegate,function gA(n,e="asc"){const t=e,r=fI("orderBy",n);return new pA(r,t)}(e,t)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Cs(this.firestore,Zd(this._delegate,function mA(n){return uI("limit",n),new rC("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Cs(this.firestore,Zd(this._delegate,function yA(n){return uI("limitToLast",n),new rC("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Cs(this.firestore,Zd(this._delegate,function vA(...n){return new iC("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Cs(this.firestore,Zd(this._delegate,function _A(...n){return new iC("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Cs(this.firestore,Zd(this._delegate,function wA(...n){return new sC("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Cs(this.firestore,Zd(this._delegate,function EA(...n){return new sC("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return Vb(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function AA(n){n=Zt(n,Ri);const e=Zt(n.firestore,a),t=h(e),r=new Hf(e);return function Nb(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(o,c,d){try{const g=yield Ku(o,c,!0),E=new _b(c,g.Ks),T=E.Ic(g.documents),R=E.applyChanges(T,!1);d.resolve(R.snapshot)}catch(g){const E=Of(g,`Failed to execute query '${c} against cache`);d.reject(E)}}),function(o,c,d){return r.apply(this,arguments)})(yield em(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Kd(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function SA(n){n=Zt(n,Ri);const e=Zt(n.firestore,a),t=h(e),r=new Hf(e);return d_(t,n._query,{source:"server"}).then(o=>new Kd(e,r,n,o))}(this._delegate):function CA(n){n=Zt(n,Ri);const e=Zt(n.firestore,a),t=h(e),r=new Hf(e);return nC(n._query),d_(t,n._query).then(o=>new Kd(e,r,n,o))}(this._delegate),t.then(r=>new Zb(this.firestore,new Kd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=wC(e),r=EC(e,o=>new Zb(this.firestore,new Kd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return fC(this._delegate,t,r)}withConverter(e){return new Cs(this.firestore,this._delegate.withConverter(e?Gf.getInstance(this.firestore,e):null))}}class GA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new I_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Zb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new I_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new GA(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new I_(this._firestore,r))})}isEqual(e){return tC(this._delegate,e._delegate)}}class am extends Cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vo(this.firestore,e):null}doc(e){try{return new Vo(this.firestore,void 0===e?nm(this._delegate):nm(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function MA(n,e){const t=Zt(n.firestore,a),r=nm(n),o=pI(n.converter,e);return om(t,[Wd(Fa(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,yr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Vo(this.firestore,t))}isEqual(e){return Ub(this._delegate,e._delegate)}withConverter(e){return new am(this.firestore,this._delegate.withConverter(e?Gf.getInstance(this.firestore,e):null))}}function qf(n){return Zt(n,kn)}class Yb{constructor(...e){this._delegate=new be(...e)}static documentId(){return new Yb(Ar.keyField().canonicalString())}isEqual(e){return(e=(0,Ut.m9)(e))instanceof be&&this._delegate._internalPath.isEqual(e._internalPath)}}class zf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function kA(){return new Bb("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new zf(e)}static delete(){const e=function PA(){return new wl("deleteField")}();return e._methodName="FieldValue.delete",new zf(e)}static arrayUnion(...e){const t=function FA(...n){return new oA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new zf(t)}static arrayRemove(...e){const t=function LA(...n){return new aA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new zf(t)}static increment(e){const t=function UA(n){return new uA("increment",n)}(e);return t._methodName="FieldValue.increment",new zf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const qA={Firestore:yC,GeoPoint:vi,Timestamp:Cr,Blob:w_,Transaction:vC,WriteBatch:_C,DocumentReference:Vo,DocumentSnapshot:E_,Query:Cs,QueryDocumentSnapshot:I_,QuerySnapshot:Zb,CollectionReference:am,FieldPath:Yb,FieldValue:zf,setLogLevel:function HA(n){!function NT(n){Fu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function WA(n){(function zA(n,e){n.INTERNAL.registerComponent(new Ch.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},qA)))})(n,(e,t)=>new yC(e,t,new $A)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(co.Z);var KA=O(6451),mI=O(5363),ZA=O(6063);class YA extends ss.x{constructor(e=1/0,t=1/0,r=ZA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:c,_windowTime:d}=this;t||(r.push(e),!o&&r.push(c.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,c=o.slice();for(let d=0;d<c.length&&!e.closed;d+=r?1:2)e.next(c[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,c=(o?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!o){const d=t.now();let g=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)g=E;g&&r.splice(0,g+1)}}}var QA=O(3099);function IC(n,e,t){var r,o;let c,d=!1;return n&&"object"==typeof n?(c=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,d=!!n.refCount,t=n.scheduler):c=null!=n?n:1/0,(0,QA.B)({connector:()=>new YA(c,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}function DC(n,e){return(0,Ic.m)(e)?Rn(()=>n,e):Rn(()=>n)}var Qb=O(9468);O(5867);const TC=new Map,nS={activated:!1,tokenObservers:[]},rS={initialized:!1,enabled:!1};function _i(n){return TC.get(n)||nS}function La(n,e){TC.set(n,e)}function vI(){return rS}class uS{constructor(e,t,r,o,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=o,o>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new Ut.BH,yield function cS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ut.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const As=new Ut.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function AC(n){if(!_i(n).activated)throw As.create("use-before-activation",{appName:n.name})}function tT(n,e){return nT.apply(this,arguments)}function nT(){return nT=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const c={method:"POST",body:JSON.stringify(e),headers:r};let d,g;try{d=yield fetch(n,c)}catch(N){throw As.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw As.create("fetch-status-error",{httpStatus:d.status});try{g=yield d.json()}catch(N){throw As.create("fetch-parse-error",{originalErrorMessage:N.message})}const E=g.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw As.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const T=1e3*Number(E[1]),R=Date.now();return{token:g.attestationToken,expireTimeMillis:R+T,issuedAtTimeMillis:R}}),nT.apply(this,arguments)}function pS(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const D_="firebase-app-check-store";let EI=null;function xC(){return EI||(EI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(As.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(D_,{keyPath:"compositeKey"})}}catch(t){e(As.create("storage-open",{originalErrorMessage:t.message}))}}),EI)}function rT(){return rT=(0,Ee.Z)(function*(n,e){const r=(yield xC()).transaction(D_,"readwrite"),c=r.objectStore(D_).put({compositeKey:n,value:e});return new Promise((d,g)=>{c.onsuccess=E=>{d()},r.onerror=E=>{var T;g(As.create("storage-set",{originalErrorMessage:null===(T=E.target.error)||void 0===T?void 0:T.message}))}})}),rT.apply(this,arguments)}const b_=new Po.Yd("@firebase/app-check");function OC(n,e){return(0,Ut.hl)()?function vS(n,e){return function MC(n,e){return rT.apply(this,arguments)}(function NC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{b_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PC(){return vI().enabled}function kC(){return aT.apply(this,arguments)}function aT(){return aT=(0,Ee.Z)(function*(){const n=vI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),aT.apply(this,arguments)}const bS={error:"UNKNOWN_ERROR"};function TS(n){return Ut.US.encodeString(JSON.stringify(n),!1)}function II(n){return uT.apply(this,arguments)}function uT(){return uT=(0,Ee.Z)(function*(n,e=!1){const t=n.app;AC(t);const r=_i(t);let c,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&DI(E)&&(o=E)}if(!e&&o&&DI(o))return{token:o.token};let g,d=!1;if(PC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=tT(pS(t,yield kC()),n.platformLoggerProvider).then(T=>(r.exchangeTokenPromise=void 0,T)),d=!0);const E=yield r.exchangeTokenPromise;return yield OC(t,E),La(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?b_.warn(E.message):b_.error(E),c=E}return o?(g={token:o.token},La(t,Object.assign(Object.assign({},r),{token:o})),yield OC(t,o)):g=AS(c),d&&LC(t,g),g}),uT.apply(this,arguments)}function lT(n,e){const t=_i(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),La(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function FC(n){const{app:e}=n,t=_i(e);let r=t.tokenRefresher;r||(r=function CS(n){const{app:e}=n;return new uS((0,Ee.Z)(function*(){let r;if(r=_i(e).token?yield II(n,!0):yield II(n),r.error)throw r.error}),()=>!0,()=>{const t=_i(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),La(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function LC(n,e){const t=_i(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function DI(n){return n.expireTimeMillis-Date.now()>0}function AS(n){return{token:TS(bS),error:n}}class SS{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=_i(this.app);for(const t of e)lT(this.app,t.next);return Promise.resolve()}}const qC="app-check-internal";!function $S(){(0,Tu._registerComponent)(new Ch.wA("app-check",n=>function xS(n,e){return new SS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qC).initialize()})),(0,Tu._registerComponent)(new Ch.wA(qC,n=>function MS(n){return{getToken:e=>II(n,e),addTokenListener:e=>function cT(n,e,t,r){const{app:o}=n,c=_i(o),d={next:t,error:r,type:e};if(La(o,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,d]})),c.token&&DI(c.token)){const g=c.token;Promise.resolve().then(()=>{t({token:g.token}),FC(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>FC(n))}(n,"INTERNAL",e),removeTokenListener:e=>lT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Tu.registerVersion)("@firebase/app-check","0.5.3")}();class pT{constructor(){return(0,ni.vb)("app-check")}}"undefined"!=typeof window&&window,O(127);const WC=new m.OlP("angularfire2.auth.use-emulator"),KC=new m.OlP("angularfire2.auth.settings"),ZC=new m.OlP("angularfire2.auth.tenant-id"),YC=new m.OlP("angularfire2.auth.langugage-code"),QC=new m.OlP("angularfire2.auth.use-device-language"),JC=new m.OlP("angularfire.auth.persistence"),XC=(n,e,t,r,o,c,d,g)=>(0,uo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,c&&E.useDeviceLanguage(),d)for(const[T,R]of Object.entries(d))E.settings[T]=R;return g&&E.setPersistence(g),E},[t,r,o,c,d,g]);let mT=(()=>{class n{constructor(t,r,o,c,d,g,E,T,R,N,z,ee){const Ie=new ss.x,je=Je(void 0).pipe((0,mI.Q)(d.outsideAngular),Rn(()=>c.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,Pt.U)(()=>(0,uo.on)(t,c,r)),(0,Pt.U)(nt=>XC(nt,c,g,T,R,N,E,z)),IC({bufferSize:1,refCount:!1}));if(Zo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{je.pipe(Mo()).subscribe();const Lt=je.pipe(Rn(Vt=>Vt.getRedirectResult().then(Kn=>Kn,()=>null)),ni.iC,IC({bufferSize:1,refCount:!1})),cn=je.pipe(Rn(Vt=>new Jn.y(Kn=>({unsubscribe:c.runOutsideAngular(()=>Vt.onAuthStateChanged(Ua=>Kn.next(Ua),Ua=>Kn.error(Ua),()=>Kn.complete()))})))),Fn=je.pipe(Rn(Vt=>new Jn.y(Kn=>({unsubscribe:c.runOutsideAngular(()=>Vt.onIdTokenChanged(Ua=>Kn.next(Ua),Ua=>Kn.error(Ua),()=>Kn.complete()))}))));this.authState=Lt.pipe(DC(cn),(0,Qb.R)(d.outsideAngular),(0,mI.Q)(d.insideAngular)),this.user=Lt.pipe(DC(Fn),(0,Qb.R)(d.outsideAngular),(0,mI.Q)(d.insideAngular)),this.idToken=this.user.pipe(Rn(Vt=>Vt?(0,wn.D)(Vt.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(Rn(Vt=>Vt?(0,wn.D)(Vt.getIdTokenResult()):Je(null))),this.credential=(0,KA.T)(Lt,Ie,this.authState.pipe(Gn(Vt=>!Vt))).pipe((0,Pt.U)(Vt=>(null==Vt?void 0:Vt.user)?Vt:null),(0,Qb.R)(d.outsideAngular),(0,mI.Q)(d.insideAngular))}return(0,uo.pX)(this,je,c,{spy:{apply:(nt,Lt,cn)=>{(nt.startsWith("signIn")||nt.startsWith("createUser"))&&cn.then(Fn=>Ie.next(Fn))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(uo.Dh),m.LFG(uo.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ni.HU),m.LFG(WC,8),m.LFG(KC,8),m.LFG(ZC,8),m.LFG(YC,8),m.LFG(QC,8),m.LFG(JC,8),m.LFG(pT,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function eA(n,e){return function KS(n,e=DT.z){return new Jn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function yT(n,e){return eA(n,e).pipe((0,Pt.U)(t=>({payload:t,type:"query"})))}function TI(n,e){return yT(n,e).pipe(io(void 0),Om(),(0,Pt.U)(([t,r])=>{const o=r.payload.docChanges(),c=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const E=o.find(R=>R.doc.ref.isEqual(d.ref)),T=null==t?void 0:t.payload.docs.find(R=>R.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&T&&JSON.stringify(T.metadata)===JSON.stringify(d.metadata)||c.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),c}))}function tA(n,e,t){return TI(n,t).pipe(Gi((r,o)=>function YS(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function QS(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(c=>c.payload),e),[]),function n0(n,e=os.y){return n=null!=n?n:XI,(0,Yr.e)((t,r)=>{let o,c=!0;t.subscribe((0,mn.x)(r,d=>{const g=e(d);(c||!n(o,g))&&(c=!1,o=g,r.next(d))}))})}(),(0,Pt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function vT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function nA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class rA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=TI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Pt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(io(void 0),Om(),Gn(([r,o])=>o.length>0||!r),(0,Pt.U)(([r,o])=>o),ni.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nA(e);return tA(this.query,t,this.afs.schedulers.outsideAngular).pipe(ni.iC)}valueChanges(e={}){return yT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ni.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(ni.iC)}add(e){return this.ref.add(e)}doc(e){return new iA(this.ref.doc(e),this.afs)}}class iA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:c}=sA(r,t);return new rA(o,c,this.afs)}snapshotChanges(){return function ZS(n,e){return eA(n,e).pipe(io(void 0),Om(),(0,Pt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ni.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(ni.iC)}}class JS{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?TI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Gn(t=>t.length>0),ni.iC):TI(this.query,this.afs.schedulers.outsideAngular).pipe(ni.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nA(e);return tA(this.query,t,this.afs.schedulers.outsideAngular).pipe(ni.iC)}valueChanges(e={}){return yT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),ni.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(ni.iC)}}const XS=new m.OlP("angularfire2.enableFirestorePersistence"),ex=new m.OlP("angularfire2.firestore.persistenceSettings"),tx=new m.OlP("angularfire2.firestore.settings"),nx=new m.OlP("angularfire2.firestore.use-emulator");function sA(n,e=(t=>t)){return{query:e(n),ref:n}}let rx=(()=>{class n{constructor(t,r,o,c,d,g,E,T,R,N,z,ee,Ie,je,nt,Lt,cn){this.schedulers=E;const Fn=(0,uo.on)(t,g,r),Vt=R;N&&XC(Fn,g,z,Ie,je,nt,ee,Lt),[this.firestore,this.persistenceEnabled$]=(0,uo.cc)(`${Fn.name}.firestore`,"AngularFirestore",Fn.name,()=>{const Kn=g.runOutsideAngular(()=>Fn.firestore());if(c&&Kn.settings(c),Vt&&Kn.useEmulator(...Vt),o&&!Zo(d)){const Ua=()=>{try{return(0,wn.D)(Kn.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(CI){return"undefined"!=typeof console&&console.warn(CI),Je(!1)}};return[Kn,g.runOutsideAngular(Ua)]}return[Kn,Je(!1)]},[c,Vt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:d}=sA(o,r),g=this.schedulers.ngZone.run(()=>c);return new rA(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),c=this.firestore.collectionGroup(t);return new JS(o(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new iA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(uo.Dh),m.LFG(uo.xv,8),m.LFG(XS,8),m.LFG(tx,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ni.HU),m.LFG(ex,8),m.LFG(nx,8),m.LFG(mT,8),m.LFG(WC,8),m.LFG(KC,8),m.LFG(ZC,8),m.LFG(YC,8),m.LFG(QC,8),m.LFG(JC,8),m.LFG(pT,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Wf=(()=>{class n{constructor(t,r,o,c){this.afs=t,this.afAuth=r,this.router=o,this.ngZone=c,this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(o=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(o=>{this.SendVerificationMail(),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new JI.N).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(rx),m.LFG(mT),m.LFG(ti),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ix(n,e){if(1&n&&(m.TgZ(0,"div",3)(1,"div",17)(2,"div",18),m._UZ(3,"img",19),m.TgZ(4,"div",20)(5,"h1"),m._uU(6," Hello: "),m.TgZ(7,"strong"),m._uU(8),m.qZA()(),m.TgZ(9,"p"),m._uU(10," User ID: "),m.TgZ(11,"strong"),m._uU(12),m.qZA()(),m.TgZ(13,"p"),m._uU(14," Email: "),m.TgZ(15,"strong"),m._uU(16),m.qZA()(),m.TgZ(17,"p"),m._uU(18," Email Verified: "),m.TgZ(19,"strong"),m._uU(20),m.qZA()()()()()()),2&n){const t=e.ngIf;m.xp6(3),m.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",m.LSH),m.s9C("alt",t.displayName),m.xp6(5),m.Oqu(t.displayName?t.displayName:"User"),m.xp6(4),m.Oqu(t.uid),m.xp6(4),m.Oqu(t.email),m.xp6(4),m.Oqu(t.emailVerified)}}let sx=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Wf))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-dashboard"]],decls:23,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-3","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item","my-3"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],[1,"col-md-9","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(m.TgZ(0,"nav",0)(1,"a",1)(2,"h4"),m._uU(3,"Shyto Website"),m.qZA()()(),m.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"ul",6)(9,"li",7)(10,"a",8),m._UZ(11,"i",9),m._uU(12,"User Profile "),m.qZA()(),m.TgZ(13,"li",7)(14,"a",10),m.NdJ("click",function(){return r.authService.SignOut()}),m._UZ(15,"i",11),m._uU(16,"Log out "),m.qZA()()()()(),m.TgZ(17,"div",12)(18,"div",13)(19,"div",14)(20,"h1",15),m._uU(21,"User Profile"),m.qZA()(),m.YNc(22,ix,21,6,"div",16),m.qZA()()()()),2&t&&(m.xp6(22),m.Q6J("ngIf",r.authService.userData))},directives:[ar],styles:[""]}),n})(),ox=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Wf))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const o=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Reset Password"),m.qZA(),m.TgZ(5,"p",3),m._uU(6," Please enter your email address to request a password reset. "),m.qZA(),m.TgZ(7,"div",4),m._UZ(8,"input",5,6),m.qZA(),m.TgZ(10,"div",4)(11,"input",7),m.NdJ("click",function(){m.CHM(o);const d=m.MAs(9);return r.authService.ForgotPassword(d.value)}),m.qZA()()(),m.TgZ(12,"div",8)(13,"span"),m._uU(14,"Go back to ? "),m.TgZ(15,"span",9),m._uU(16,"Log In"),m.qZA()()()()()}},directives:[Oc],styles:[""]}),n})(),ax=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Wf))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-sign-in"]],decls:30,vars:0,consts:[[1,"col-md-12"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const o=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),m._uU(5,"Sign In"),m.qZA(),m.TgZ(6,"div",4),m._UZ(7,"input",5,6),m.qZA(),m.TgZ(9,"div",4),m._UZ(10,"input",7,8),m.qZA(),m.TgZ(12,"div",4)(13,"input",9),m.NdJ("click",function(){m.CHM(o);const d=m.MAs(8),g=m.MAs(11);return r.authService.SignIn(d.value,g.value)}),m.qZA()(),m.TgZ(14,"div",4)(15,"span",10)(16,"span",11),m._uU(17,"Or"),m.qZA()()(),m.TgZ(18,"div",4)(19,"button",12),m.NdJ("click",function(){return r.authService.GoogleAuth()}),m._UZ(20,"i",13),m._uU(21," Log in with Google "),m.qZA()(),m.TgZ(22,"div",14)(23,"span",15),m._uU(24,"Forgot Password?"),m.qZA()()(),m.TgZ(25,"div",16)(26,"span"),m._uU(27,"Don't have an account?"),m.TgZ(28,"span",17),m._uU(29," Sign Up"),m.qZA()()()()()()}},directives:[Oc],styles:[""]}),n})(),ux=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Wf))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-sign-up"]],decls:29,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Register",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const o=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Sign Up"),m.qZA(),m.TgZ(5,"div",3),m._UZ(6,"input",4,5),m.qZA(),m.TgZ(8,"div",3),m._UZ(9,"input",6,7),m.qZA(),m.TgZ(11,"div",3)(12,"input",8),m.NdJ("click",function(){m.CHM(o);const d=m.MAs(7),g=m.MAs(10);return r.authService.SignUp(d.value,g.value)}),m.qZA()(),m.TgZ(13,"div",3)(14,"span",9)(15,"span",10),m._uU(16,"Or"),m.qZA()()(),m.TgZ(17,"div",3)(18,"button",11),m.NdJ("click",function(){return r.authService.GoogleAuth()}),m._UZ(19,"i",12),m._uU(20," Log in with Google "),m.qZA()(),m.TgZ(21,"div",13)(22,"span",14),m._uU(23,"Forgot Password?"),m.qZA()()(),m.TgZ(24,"div",15)(25,"span"),m._uU(26,"Already have an account?"),m.TgZ(27,"span",16),m._uU(28," Sign In"),m.qZA()()()()()}},directives:[Oc],styles:[""]}),n})();function cx(n,e){if(1&n&&(m.TgZ(0,"div",4)(1,"p",9),m._uU(2," We have sent a confirmation email to "),m.TgZ(3,"strong"),m._uU(4),m.qZA(),m._uU(5,". "),m.qZA(),m.TgZ(6,"p",9),m._uU(7," Please check your email and click on the link to verfiy your email address. "),m.qZA()()),2&n){const t=e.ngIf;m.xp6(4),m.Oqu(t.email)}}const lx=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:ax},{path:"register-user",component:ux},{path:"dashboard",component:sx,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Wf),m.LFG(ti))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"forgot-password",component:ox},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Wf))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Thank You for Registering"),m.qZA(),m.YNc(5,cx,8,1,"div",3),m.TgZ(6,"div",4)(7,"button",5),m.NdJ("click",function(){return r.authService.SendVerificationMail()}),m._UZ(8,"i",6),m._uU(9," Resend Verification Email "),m.qZA()()(),m.TgZ(10,"div",7)(11,"span"),m._uU(12,"Go back to?"),m.TgZ(13,"span",8),m._uU(14," Sign in"),m.qZA()()()()()),2&t&&(m.xp6(5),m.Q6J("ngIf",r.authService.userData))},directives:[ar,Oc],styles:[""]}),n})()}];let dx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[Z_.forRoot(lx)],Z_]}),n})(),hx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[Th]}),n.\u0275inj=m.cJS({providers:[Wf],imports:[[dx,ra,uo.hO.initializeApp(Nm_firebaseConfig,"shyto-login")]]}),n})();(0,m.G48)(),Qa().bootstrapModule(hx).catch(n=>console.error(n))},5867:(at,Ae,O)=>{"use strict";O.d(Ae,{Mq:()=>m.getApp,C6:()=>m.getApps});var m=O(9681);(0,m.registerVersion)("firebase","9.6.7","app")},127:(at,Ae,O)=>{"use strict";O.d(Ae,{Z:()=>m.Z});var m=O(3942);m.Z.registerVersion("firebase","9.6.7","app-compat")},5881:(at,Ae,O)=>{"use strict";O.r(Ae);var m=O(5861),L=O(3942),M=O(4929),se=O(2090),ce=(O(9681),O(1877),O(4859));function oe(){return window}function V(){return(V=(0,m.Z)(function*(ie,q,H){var Te;const{BuildInfo:$e}=oe();(0,M.ap)(q.sessionId,"AuthEvent did not contain a session ID");const st=yield ae(q.sessionId),Et={};return(0,M.aq)()?Et.ibi=$e.packageName:(0,M.ar)()?Et.apn=$e.packageName:(0,M.as)(ie,"operation-not-supported-in-this-environment"),$e.displayName&&(Et.appDisplayName=$e.displayName),Et.sessionId=st,(0,M.at)(ie,H,q.type,void 0,null!==(Te=q.eventId)&&void 0!==Te?Te:void 0,Et)})).apply(this,arguments)}function Ve(){return(Ve=(0,m.Z)(function*(ie){const{BuildInfo:q}=oe(),H={};(0,M.aq)()?H.iosBundleId=q.packageName:(0,M.ar)()?H.androidPackageName=q.packageName:(0,M.as)(ie,"operation-not-supported-in-this-environment"),yield(0,M.au)(ie,H)})).apply(this,arguments)}function Ue(){return(Ue=(0,m.Z)(function*(ie,q,H){const{cordova:Te}=oe();let $e=()=>{};try{yield new Promise((st,Et)=>{let kt=null;function Mt(){var Rt;st();const wr=null===(Rt=Te.plugins.browsertab)||void 0===Rt?void 0:Rt.close;"function"==typeof wr&&wr(),"function"==typeof(null==H?void 0:H.close)&&H.close()}function Cn(){kt||(kt=window.setTimeout(()=>{Et((0,M.av)(ie,"redirect-cancelled-by-user"))},2e3))}function qr(){"visible"===(null==document?void 0:document.visibilityState)&&Cn()}q.addPassiveListener(Mt),document.addEventListener("resume",Cn,!1),(0,M.ar)()&&document.addEventListener("visibilitychange",qr,!1),$e=()=>{q.removePassiveListener(Mt),document.removeEventListener("resume",Cn,!1),document.removeEventListener("visibilitychange",qr,!1),kt&&window.clearTimeout(kt)}})}finally{$e()}})).apply(this,arguments)}function ae(ie){return xe.apply(this,arguments)}function xe(){return(xe=(0,m.Z)(function*(ie){const q=Me(ie),H=yield crypto.subtle.digest("SHA-256",q);return Array.from(new Uint8Array(H)).map($e=>$e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Me(ie){if((0,M.ap)(/[0-9a-zA-Z]+/.test(ie),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ie);const q=new ArrayBuffer(ie.length),H=new Uint8Array(q);for(let Te=0;Te<ie.length;Te++)H[Te]=ie.charCodeAt(Te);return H}class De extends M.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(q=>{this.resolveInialized=q})}addPassiveListener(q){this.passiveListeners.add(q)}removePassiveListener(q){this.passiveListeners.delete(q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(q){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(q)),super.onEvent(q)}initialized(){var q=this;return(0,m.Z)(function*(){yield q.initPromise})()}}function te(ie){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,m.Z)(function*(ie){const q=yield de()._get(me(ie));return q&&(yield de()._remove(me(ie))),q})).apply(this,arguments)}function he(){const ie=[],q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const Te=Math.floor(Math.random()*q.length);ie.push(q.charAt(Te))}return ie.join("")}function de(){return(0,M.ax)(M.b)}function me(ie){return(0,M.ay)("authEvent",ie.config.apiKey,ie.name)}function yt(ie){if(!(null==ie?void 0:ie.includes("?")))return{};const[q,...H]=ie.split("?");return(0,se.zd)(H.join("?"))}function rt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,M.av)("no-auth-event")}}function Bt(){var ie;return(null===(ie=null==self?void 0:self.location)||void 0===ie?void 0:ie.protocol)||null}function fn(ie=(0,se.z$)()){return!("file:"!==Bt()&&"ionic:"!==Bt()||!ie.toLowerCase().match(/iphone|ipad|ipod|android/))}function ci(){try{const ie=self.localStorage,q=M.aG();if(ie)return ie.setItem(q,"1"),ie.removeItem(q),!function Oi(ie=(0,se.z$)()){return function Ln(){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)}()||function fr(ie=(0,se.z$)()){return/Edge\/\d+/.test(ie)}(ie)}()||(0,se.hl)()}catch(ie){return wi()&&(0,se.hl)()}return!1}function wi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Un(){return(function Jt(){return"http:"===Bt()||"https:"===Bt()}()||(0,se.ru)()||fn())&&!function Ni(){return(0,se.b$)()||(0,se.UG)()}()&&ci()&&!wi()}function Pi(){return fn()&&"undefined"!=typeof document}function vr(){return(vr=(0,m.Z)(function*(){return!!Pi()&&new Promise(ie=>{const q=setTimeout(()=>{ie(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(q),ie(!0)})})})).apply(this,arguments)}const jt={LOCAL:"local",NONE:"none",SESSION:"session"},_r=M.aw,ht="persistence";function wt(ie){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,m.Z)(function*(ie){yield ie._initializationPromise;const q=Ct(),H=M.ay(ht,ie.config.apiKey,ie.name);q&&q.setItem(H,ie._getPersistence())})).apply(this,arguments)}function Ct(){var ie;try{return(null===(ie=function yn(){return"undefined"!=typeof window?window:null}())||void 0===ie?void 0:ie.sessionStorage)||null}catch(q){return null}}const it=M.aw;class Ye{constructor(){this.browserResolver=M.ax(M.k),this.cordovaResolver=M.ax(class Tn{constructor(){this._redirectPersistence=M.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=M.aA}_initialize(q){var H=this;return(0,m.Z)(function*(){const Te=q._key();let $e=H.eventManagers.get(Te);return $e||($e=new De(q),H.eventManagers.set(Te,$e),H.attachCallbackListeners(q,$e)),$e})()}_openPopup(q){(0,M.as)(q,"operation-not-supported-in-this-environment")}_openRedirect(q,H,Te,$e){var st=this;return(0,m.Z)(function*(){!function K(ie){var q,H,Te,$e,st,Et,kt,Mt,Cn,qr;const Rt=oe();(0,M.aw)("function"==typeof(null===(q=null==Rt?void 0:Rt.universalLinks)||void 0===q?void 0:q.subscribe),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,M.aw)(void 0!==(null===(H=null==Rt?void 0:Rt.BuildInfo)||void 0===H?void 0:H.packageName),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,M.aw)("function"==typeof(null===(st=null===($e=null===(Te=null==Rt?void 0:Rt.cordova)||void 0===Te?void 0:Te.plugins)||void 0===$e?void 0:$e.browsertab)||void 0===st?void 0:st.openUrl),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aw)("function"==typeof(null===(Mt=null===(kt=null===(Et=null==Rt?void 0:Rt.cordova)||void 0===Et?void 0:Et.plugins)||void 0===kt?void 0:kt.browsertab)||void 0===Mt?void 0:Mt.isAvailable),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aw)("function"==typeof(null===(qr=null===(Cn=null==Rt?void 0:Rt.cordova)||void 0===Cn?void 0:Cn.InAppBrowser)||void 0===qr?void 0:qr.open),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(q);const Et=yield st._initialize(q);yield Et.initialized(),Et.resetRedirect(),(0,M.aB)(),yield st._originValidation(q);const kt=function ye(ie,q,H=null){return{type:q,eventId:H,urlResponse:null,sessionId:he(),postBody:null,tenantId:ie.tenantId,error:(0,M.av)(ie,"no-auth-event")}}(q,Te,$e);yield function ze(ie,q){return de()._set(me(ie),q)}(q,kt);const Mt=yield function j(ie,q,H){return V.apply(this,arguments)}(q,kt,H),Cn=yield function Se(ie){const{cordova:q}=oe();return new Promise(H=>{q.plugins.browsertab.isAvailable(Te=>{let $e=null;Te?q.plugins.browsertab.openUrl(ie):$e=q.InAppBrowser.open(ie,(0,M.ao)()?"_blank":"_system","location=yes"),H($e)})})}(Mt);return function Pe(ie,q,H){return Ue.apply(this,arguments)}(q,Et,Cn)})()}_isIframeWebStorageSupported(q,H){throw new Error("Method not implemented.")}_originValidation(q){const H=q._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function X(ie){return Ve.apply(this,arguments)}(q)),this.originValidationPromises[H]}attachCallbackListeners(q,H){const{universalLinks:Te,handleOpenURL:$e,BuildInfo:st}=oe(),Et=setTimeout((0,m.Z)(function*(){yield te(q),H.onEvent(rt())}),500),kt=function(){var qr=(0,m.Z)(function*(Rt){clearTimeout(Et);const wr=yield te(q);let ki=null;wr&&(null==Rt?void 0:Rt.url)&&(ki=function Y(ie,q){var H,Te;const $e=function ue(ie){const q=yt(ie),H=q.link?decodeURIComponent(q.link):void 0,Te=yt(H).link,$e=q.deep_link_id?decodeURIComponent(q.deep_link_id):void 0;return yt($e).link||$e||Te||H||ie}(q);if($e.includes("/__/auth/callback")){const st=yt($e),Et=st.firebaseError?function ke(ie){try{return JSON.parse(ie)}catch(q){return null}}(decodeURIComponent(st.firebaseError)):null,kt=null===(Te=null===(H=null==Et?void 0:Et.code)||void 0===H?void 0:H.split("auth/"))||void 0===Te?void 0:Te[1],Mt=kt?(0,M.av)(kt):null;return Mt?{type:ie.type,eventId:ie.eventId,tenantId:ie.tenantId,error:Mt,urlResponse:null,sessionId:null,postBody:null}:{type:ie.type,eventId:ie.eventId,tenantId:ie.tenantId,sessionId:ie.sessionId,urlResponse:$e,postBody:null}}return null}(wr,Rt.url)),H.onEvent(ki||rt())});return function(wr){return qr.apply(this,arguments)}}();void 0!==Te&&"function"==typeof Te.subscribe&&Te.subscribe(null,kt);const Mt=$e,Cn=`${st.packageName.toLowerCase()}://`;oe().handleOpenURL=function(){var qr=(0,m.Z)(function*(Rt){if(Rt.toLowerCase().startsWith(Cn)&&kt({url:Rt}),"function"==typeof Mt)try{Mt(Rt)}catch(wr){console.error(wr)}});return function(Rt){return qr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=M.a,this._completeRedirectFn=M.aA}_initialize(q){var H=this;return(0,m.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(q)})()}_openPopup(q,H,Te,$e){var st=this;return(0,m.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(q,H,Te,$e)})()}_openRedirect(q,H,Te,$e){var st=this;return(0,m.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(q,H,Te,$e)})()}_isIframeWebStorageSupported(q,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(q,H)}_originValidation(q){return this.assertedUnderlyingResolver._originValidation(q)}get _shouldInitProactively(){return Pi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return it(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var q=this;return(0,m.Z)(function*(){if(q.underlyingResolver)return;const H=yield function dt(){return vr.apply(this,arguments)}();q.underlyingResolver=H?q.cordovaResolver:q.browserResolver})()}}function Ss(ie){return ie.unwrap()}function Ft(ie){return Vn(ie)}function Vn(ie){const{_tokenResponse:q}=ie instanceof se.ZR?ie.customData:ie;if(!q)return null;if(!(ie instanceof se.ZR)&&"temporaryProof"in q&&"phoneNumber"in q)return M.P.credentialFromResult(ie);const H=q.providerId;if(!H||H===M.o.PASSWORD)return null;let Te;switch(H){case M.o.GOOGLE:Te=M.N;break;case M.o.FACEBOOK:Te=M.M;break;case M.o.GITHUB:Te=M.Q;break;case M.o.TWITTER:Te=M.V;break;default:const{oauthIdToken:$e,oauthAccessToken:st,oauthTokenSecret:Et,pendingToken:kt,nonce:Mt}=q;return st||Et||$e||kt?kt?H.startsWith("saml.")?M.aJ._create(H,kt):M.I._fromParams({providerId:H,signInMethod:H,pendingToken:kt,idToken:$e,accessToken:st}):new M.T(H).credential({idToken:$e,accessToken:st,rawNonce:Mt}):null}return ie instanceof se.ZR?Te.credentialFromError(ie):Te.credentialFromResult(ie)}function ln(ie,q){return q.catch(H=>{throw H instanceof se.ZR&&function xs(ie,q){var H;const Te=null===(H=q.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===q.code)q.resolver=new G(ie,M.am(ie,q));else if(Te){const $e=Vn(q),st=q;$e&&(st.credential=$e,st.tenantId=Te.tenantId||void 0,st.email=Te.email||void 0,st.phoneNumber=Te.phoneNumber||void 0)}}(ie,H),H}).then(H=>{const $e=H.user;return{operationType:H.operationType,credential:Ft(H),additionalUserInfo:M.ak(H),user:_e.getOrCreate($e)}})}function U(ie,q){return $.apply(this,arguments)}function $(){return($=(0,m.Z)(function*(ie,q){const H=yield q;return{verificationId:H.verificationId,confirm:Te=>ln(ie,H.confirm(Te))}})).apply(this,arguments)}class G{constructor(q,H){this.resolver=H,this.auth=function Xi(ie){return ie.wrapped()}(q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(q){return ln(Ss(this.auth),this.resolver.resolveSignIn(q))}}class _e{constructor(q){this._delegate=q,this.multiFactor=M.an(q)}static getOrCreate(q){return _e.USER_MAP.has(q)||_e.USER_MAP.set(q,new _e(q)),_e.USER_MAP.get(q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(q){return this._delegate.getIdTokenResult(q)}getIdToken(q){return this._delegate.getIdToken(q)}linkAndRetrieveDataWithCredential(q){return this.linkWithCredential(q)}linkWithCredential(q){var H=this;return(0,m.Z)(function*(){return ln(H.auth,M.Y(H._delegate,q))})()}linkWithPhoneNumber(q,H){var Te=this;return(0,m.Z)(function*(){return U(Te.auth,M.l(Te._delegate,q,H))})()}linkWithPopup(q){var H=this;return(0,m.Z)(function*(){return ln(H.auth,M.d(H._delegate,q,Ye))})()}linkWithRedirect(q){var H=this;return(0,m.Z)(function*(){return yield wt(M.aC(H.auth)),M.g(H._delegate,q,Ye)})()}reauthenticateAndRetrieveDataWithCredential(q){return this.reauthenticateWithCredential(q)}reauthenticateWithCredential(q){var H=this;return(0,m.Z)(function*(){return ln(H.auth,M.Z(H._delegate,q))})()}reauthenticateWithPhoneNumber(q,H){return U(this.auth,M.r(this._delegate,q,H))}reauthenticateWithPopup(q){return ln(this.auth,M.e(this._delegate,q,Ye))}reauthenticateWithRedirect(q){var H=this;return(0,m.Z)(function*(){return yield wt(M.aC(H.auth)),M.h(H._delegate,q,Ye)})()}sendEmailVerification(q){return M.aa(this._delegate,q)}unlink(q){var H=this;return(0,m.Z)(function*(){return yield M.aj(H._delegate,q),H})()}updateEmail(q){return M.af(this._delegate,q)}updatePassword(q){return M.ag(this._delegate,q)}updatePhoneNumber(q){return M.u(this._delegate,q)}updateProfile(q){return M.ae(this._delegate,q)}verifyBeforeUpdateEmail(q,H){return M.ab(this._delegate,q,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_e.USER_MAP=new WeakMap;const ne=M.aw;let Ge=(()=>{class ie{constructor(H,Te){if(this.app=H,Te.isInitialized())return this._delegate=Te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:$e}=H.options;ne($e,"invalid-api-key",{appName:H.name}),ne($e,"invalid-api-key",{appName:H.name});const st="undefined"!=typeof window?Ye:void 0;this._delegate=Te.initialize({options:{persistence:$t($e,H.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(M.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_e.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,Te){M.E(this._delegate,H,Te)}applyActionCode(H){return M.a1(this._delegate,H)}checkActionCode(H){return M.a2(this._delegate,H)}confirmPasswordReset(H,Te){return M.a0(this._delegate,H,Te)}createUserWithEmailAndPassword(H,Te){var $e=this;return(0,m.Z)(function*(){return ln($e._delegate,M.a4($e._delegate,H,Te))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return M.a9(this._delegate,H)}isSignInWithEmailLink(H){return M.a7(this._delegate,H)}getRedirectResult(){var H=this;return(0,m.Z)(function*(){ne(Un(),H._delegate,"operation-not-supported-in-this-environment");const Te=yield M.j(H._delegate,Ye);return Te?ln(H._delegate,Promise.resolve(Te)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function Zn(ie,q){(0,M.aC)(ie)._logFramework(q)}(this._delegate,H)}onAuthStateChanged(H,Te,$e){const{next:st,error:Et,complete:kt}=ct(H,Te,$e);return this._delegate.onAuthStateChanged(st,Et,kt)}onIdTokenChanged(H,Te,$e){const{next:st,error:Et,complete:kt}=ct(H,Te,$e);return this._delegate.onIdTokenChanged(st,Et,kt)}sendSignInLinkToEmail(H,Te){return M.a6(this._delegate,H,Te)}sendPasswordResetEmail(H,Te){return M.$(this._delegate,H,Te||void 0)}setPersistence(H){var Te=this;return(0,m.Z)(function*(){let $e;switch(function ot(ie,q){_r(Object.values(jt).includes(q),ie,"invalid-persistence-type"),(0,se.b$)()?_r(q!==jt.SESSION,ie,"unsupported-persistence-type"):(0,se.UG)()?_r(q===jt.NONE,ie,"unsupported-persistence-type"):wi()?_r(q===jt.NONE||q===jt.LOCAL&&(0,se.hl)(),ie,"unsupported-persistence-type"):_r(q===jt.NONE||ci(),ie,"unsupported-persistence-type")}(Te._delegate,H),H){case jt.SESSION:$e=M.a;break;case jt.LOCAL:$e=(yield M.ax(M.i)._isAvailable())?M.i:M.b;break;case jt.NONE:$e=M.K;break;default:return M.as("argument-error",{appName:Te._delegate.name})}return Te._delegate.setPersistence($e)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return ln(this._delegate,M.W(this._delegate))}signInWithCredential(H){return ln(this._delegate,M.X(this._delegate,H))}signInWithCustomToken(H){return ln(this._delegate,M._(this._delegate,H))}signInWithEmailAndPassword(H,Te){return ln(this._delegate,M.a5(this._delegate,H,Te))}signInWithEmailLink(H,Te){return ln(this._delegate,M.a8(this._delegate,H,Te))}signInWithPhoneNumber(H,Te){return U(this._delegate,M.s(this._delegate,H,Te))}signInWithPopup(H){var Te=this;return(0,m.Z)(function*(){return ne(Un(),Te._delegate,"operation-not-supported-in-this-environment"),ln(Te._delegate,M.c(Te._delegate,H,Ye))})()}signInWithRedirect(H){var Te=this;return(0,m.Z)(function*(){return ne(Un(),Te._delegate,"operation-not-supported-in-this-environment"),yield wt(Te._delegate),M.f(Te._delegate,H,Ye)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return M.a3(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ie.Persistence=jt,ie})();function ct(ie,q,H){let Te=ie;"function"!=typeof ie&&({next:Te,error:q,complete:H}=ie);const $e=Te;return{next:Et=>$e(Et&&_e.getOrCreate(Et)),error:q,complete:H}}function $t(ie,q){const H=function sr(ie,q){const H=Ct();if(!H)return[];const Te=M.ay(ht,ie,q);switch(H.getItem(Te)){case jt.NONE:return[M.K];case jt.LOCAL:return[M.i,M.a];case jt.SESSION:return[M.a];default:return[]}}(ie,q);if("undefined"!=typeof self&&!H.includes(M.i)&&H.push(M.i),"undefined"!=typeof window)for(const Te of[M.b,M.a])H.includes(Te)||H.push(Te);return H.includes(M.K)||H.push(M.K),H}class en{constructor(){this.providerId="phone",this._delegate=new M.P(Ss(L.Z.auth()))}static credential(q,H){return M.P.credential(q,H)}verifyPhoneNumber(q,H){return this._delegate.verifyPhoneNumber(q,H)}unwrap(){return this._delegate}}en.PHONE_SIGN_IN_METHOD=M.P.PHONE_SIGN_IN_METHOD,en.PROVIDER_ID=M.P.PROVIDER_ID;const Bn=M.aw;class Yn{constructor(q,H,Te=L.Z.app()){var $e;Bn(null===($e=Te.options)||void 0===$e?void 0:$e.apiKey,"invalid-api-key",{appName:Te.name}),this._delegate=new M.R(q,H,Te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function jn(ie){ie.INTERNAL.registerComponent(new ce.wA("auth-compat",q=>{const H=q.getProvider("app-compat").getImmediate(),Te=q.getProvider("auth");return new Ge(H,Te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:M.A.EMAIL_SIGNIN,PASSWORD_RESET:M.A.PASSWORD_RESET,RECOVER_EMAIL:M.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:M.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:M.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:M.A.VERIFY_EMAIL}},EmailAuthProvider:M.L,FacebookAuthProvider:M.M,GithubAuthProvider:M.Q,GoogleAuthProvider:M.N,OAuthProvider:M.T,SAMLAuthProvider:M.U,PhoneAuthProvider:en,PhoneMultiFactorGenerator:M.m,RecaptchaVerifier:Yn,TwitterAuthProvider:M.V,Auth:Ge,AuthCredential:M.G,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ie.registerVersion("@firebase/auth-compat","0.2.9")}(L.Z)},2940:function(at,Ae){!function(O){"use strict";function m(K){return Array.prototype.slice.call(K)}function L(K){return new Promise(function(ae,xe){K.onsuccess=function(){ae(K.result)},K.onerror=function(){xe(K.error)}})}function M(K,ae,xe){var Me,le=new Promise(function(De,ye){L(Me=K[ae].apply(K,xe)).then(De,ye)});return le.request=Me,le}function se(K,ae,xe){var Me=M(K,ae,xe);return Me.then(function(le){if(le)return new j(le,Me.request)})}function re(K,ae,xe){xe.forEach(function(Me){Object.defineProperty(K.prototype,Me,{get:function(){return this[ae][Me]},set:function(le){this[ae][Me]=le}})})}function pe(K,ae,xe,Me){Me.forEach(function(le){le in xe.prototype&&(K.prototype[le]=function(){return M(this[ae],le,arguments)})})}function ce(K,ae,xe,Me){Me.forEach(function(le){le in xe.prototype&&(K.prototype[le]=function(){return this[ae][le].apply(this[ae],arguments)})})}function oe(K,ae,xe,Me){Me.forEach(function(le){le in xe.prototype&&(K.prototype[le]=function(){return se(this[ae],le,arguments)})})}function ge(K){this._index=K}function j(K,ae){this._cursor=K,this._request=ae}function V(K){this._store=K}function X(K){this._tx=K,this.complete=new Promise(function(ae,xe){K.oncomplete=function(){ae()},K.onerror=function(){xe(K.error)},K.onabort=function(){xe(K.error)}})}function Ve(K,ae,xe){this._db=K,this.oldVersion=ae,this.transaction=new X(xe)}function Se(K){this._db=K}re(ge,"_index",["name","keyPath","multiEntry","unique"]),pe(ge,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),oe(ge,"_index",IDBIndex,["openCursor","openKeyCursor"]),re(j,"_cursor",["direction","key","primaryKey","value"]),pe(j,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(K){K in IDBCursor.prototype&&(j.prototype[K]=function(){var ae=this,xe=arguments;return Promise.resolve().then(function(){return ae._cursor[K].apply(ae._cursor,xe),L(ae._request).then(function(Me){if(Me)return new j(Me,ae._request)})})})}),V.prototype.createIndex=function(){return new ge(this._store.createIndex.apply(this._store,arguments))},V.prototype.index=function(){return new ge(this._store.index.apply(this._store,arguments))},re(V,"_store",["name","keyPath","indexNames","autoIncrement"]),pe(V,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),oe(V,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ce(V,"_store",IDBObjectStore,["deleteIndex"]),X.prototype.objectStore=function(){return new V(this._tx.objectStore.apply(this._tx,arguments))},re(X,"_tx",["objectStoreNames","mode"]),ce(X,"_tx",IDBTransaction,["abort"]),Ve.prototype.createObjectStore=function(){return new V(this._db.createObjectStore.apply(this._db,arguments))},re(Ve,"_db",["name","version","objectStoreNames"]),ce(Ve,"_db",IDBDatabase,["deleteObjectStore","close"]),Se.prototype.transaction=function(){return new X(this._db.transaction.apply(this._db,arguments))},re(Se,"_db",["name","version","objectStoreNames"]),ce(Se,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(K){[V,ge].forEach(function(ae){K in ae.prototype&&(ae.prototype[K.replace("open","iterate")]=function(){var xe=m(arguments),Me=xe[xe.length-1],le=this._store||this._index,De=le[K].apply(le,xe.slice(0,-1));De.onsuccess=function(){Me(De.result)}})})}),[ge,V].forEach(function(K){K.prototype.getAll||(K.prototype.getAll=function(ae,xe){var Me=this,le=[];return new Promise(function(De){Me.iterateCursor(ae,function(ye){ye?(le.push(ye.value),void 0===xe||le.length!=xe?ye.continue():De(le)):De(le)})})})}),O.openDb=function Pe(K,ae,xe){var Me=M(indexedDB,"open",[K,ae]),le=Me.request;return le&&(le.onupgradeneeded=function(De){xe&&xe(new Ve(le.result,De.oldVersion,le.transaction))}),Me.then(function(De){return new Se(De)})},O.deleteDb=function Ue(K){return M(indexedDB,"deleteDatabase",[K])},Object.defineProperty(O,"__esModule",{value:!0})}(Ae)},8306:(at,Ae,O)=>{"use strict";O.d(Ae,{y:()=>j});var m=O(2961),L=O(727),M=O(8822),se=O(4671);var ce=O(2416),oe=O(576),ge=O(2806);let j=(()=>{class Se{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const K=new Se;return K.source=this,K.operator=Ue,K}subscribe(Ue,K,ae){const xe=function Ve(Se){return Se&&Se instanceof m.Lv||function X(Se){return Se&&(0,oe.m)(Se.next)&&(0,oe.m)(Se.error)&&(0,oe.m)(Se.complete)}(Se)&&(0,L.Nn)(Se)}(Ue)?Ue:new m.Hp(Ue,K,ae);return(0,ge.x)(()=>{const{operator:Me,source:le}=this;xe.add(Me?Me.call(xe,le):le?this._subscribe(xe):this._trySubscribe(xe))}),xe}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(K){Ue.error(K)}}forEach(Ue,K){return new(K=V(K))((ae,xe)=>{const Me=new m.Hp({next:le=>{try{Ue(le)}catch(De){xe(De),Me.unsubscribe()}},error:xe,complete:ae});this.subscribe(Me)})}_subscribe(Ue){var K;return null===(K=this.source)||void 0===K?void 0:K.subscribe(Ue)}[M.L](){return this}pipe(...Ue){return function pe(Se){return 0===Se.length?se.y:1===Se.length?Se[0]:function(Ue){return Se.reduce((K,ae)=>ae(K),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=V(Ue))((K,ae)=>{let xe;this.subscribe(Me=>xe=Me,Me=>ae(Me),()=>K(xe))})}}return Se.create=Pe=>new Se(Pe),Se})();function V(Se){var Pe;return null!==(Pe=null!=Se?Se:ce.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(at,Ae,O)=>{"use strict";O.d(Ae,{x:()=>ce});var m=O(8306),L=O(727);const se=(0,O(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=O(8737),pe=O(2806);let ce=(()=>{class ge extends m.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(V){const X=new oe(this,this);return X.operator=V,X}_throwIfClosed(){if(this.closed)throw new se}next(V){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const X=this.observers.slice();for(const Ve of X)Ve.next(V)}})}error(V){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=V;const{observers:X}=this;for(;X.length;)X.shift().error(V)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:V}=this;for(;V.length;)V.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var V;return(null===(V=this.observers)||void 0===V?void 0:V.length)>0}_trySubscribe(V){return this._throwIfClosed(),super._trySubscribe(V)}_subscribe(V){return this._throwIfClosed(),this._checkFinalizedStatuses(V),this._innerSubscribe(V)}_innerSubscribe(V){const{hasError:X,isStopped:Ve,observers:Se}=this;return X||Ve?L.Lc:(Se.push(V),new L.w0(()=>(0,re.P)(Se,V)))}_checkFinalizedStatuses(V){const{hasError:X,thrownError:Ve,isStopped:Se}=this;X?V.error(Ve):Se&&V.complete()}asObservable(){const V=new m.y;return V.source=this,V}}return ge.create=(j,V)=>new oe(j,V),ge})();class oe extends ce{constructor(j,V){super(),this.destination=j,this.source=V}next(j){var V,X;null===(X=null===(V=this.destination)||void 0===V?void 0:V.next)||void 0===X||X.call(V,j)}error(j){var V,X;null===(X=null===(V=this.destination)||void 0===V?void 0:V.error)||void 0===X||X.call(V,j)}complete(){var j,V;null===(V=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===V||V.call(j)}_subscribe(j){var V,X;return null!==(X=null===(V=this.source)||void 0===V?void 0:V.subscribe(j))&&void 0!==X?X:L.Lc}}},2961:(at,Ae,O)=>{"use strict";O.d(Ae,{Hp:()=>Ue,Lv:()=>X});var m=O(576),L=O(727),M=O(2416),se=O(7849);function re(){}const pe=ge("C",void 0,void 0);function ge(le,De,ye){return{kind:le,value:De,error:ye}}var j=O(3410),V=O(2806);class X extends L.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,L.Nn)(De)&&De.add(this)):this.destination=Me}static create(De,ye,ze){return new Ue(De,ye,ze)}next(De){this.isStopped?xe(function oe(le){return ge("N",le,void 0)}(De),this):this._next(De)}error(De){this.isStopped?xe(function ce(le){return ge("E",void 0,le)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?xe(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Se(le,De){return Ve.call(le,De)}class Pe{constructor(De){this.partialObserver=De}next(De){const{partialObserver:ye}=this;if(ye.next)try{ye.next(De)}catch(ze){K(ze)}}error(De){const{partialObserver:ye}=this;if(ye.error)try{ye.error(De)}catch(ze){K(ze)}else K(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(ye){K(ye)}}}class Ue extends X{constructor(De,ye,ze){let te;if(super(),(0,m.m)(De)||!De)te={next:null!=De?De:void 0,error:null!=ye?ye:void 0,complete:null!=ze?ze:void 0};else{let Ze;this&&M.v.useDeprecatedNextContext?(Ze=Object.create(De),Ze.unsubscribe=()=>this.unsubscribe(),te={next:De.next&&Se(De.next,Ze),error:De.error&&Se(De.error,Ze),complete:De.complete&&Se(De.complete,Ze)}):te=De}this.destination=new Pe(te)}}function K(le){M.v.useDeprecatedSynchronousErrorHandling?(0,V.O)(le):(0,se.h)(le)}function xe(le,De){const{onStoppedNotification:ye}=M.v;ye&&j.z.setTimeout(()=>ye(le,De))}const Me={closed:!0,next:re,error:function ae(le){throw le},complete:re}},727:(at,Ae,O)=>{"use strict";O.d(Ae,{Lc:()=>pe,w0:()=>re,Nn:()=>ce});var m=O(576);const M=(0,O(3888).d)(ge=>function(V){ge(this),this.message=V?`${V.length} errors occurred during unsubscription:\n${V.map((X,Ve)=>`${Ve+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=V});var se=O(8737);class re{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:V}=this;if(V)if(this._parentage=null,Array.isArray(V))for(const Se of V)Se.remove(this);else V.remove(this);const{initialTeardown:X}=this;if((0,m.m)(X))try{X()}catch(Se){j=Se instanceof M?Se.errors:[Se]}const{_teardowns:Ve}=this;if(Ve){this._teardowns=null;for(const Se of Ve)try{oe(Se)}catch(Pe){j=null!=j?j:[],Pe instanceof M?j=[...j,...Pe.errors]:j.push(Pe)}}if(j)throw new M(j)}}add(j){var V;if(j&&j!==this)if(this.closed)oe(j);else{if(j instanceof re){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._teardowns=null!==(V=this._teardowns)&&void 0!==V?V:[]).push(j)}}_hasParent(j){const{_parentage:V}=this;return V===j||Array.isArray(V)&&V.includes(j)}_addParent(j){const{_parentage:V}=this;this._parentage=Array.isArray(V)?(V.push(j),V):V?[V,j]:j}_removeParent(j){const{_parentage:V}=this;V===j?this._parentage=null:Array.isArray(V)&&(0,se.P)(V,j)}remove(j){const{_teardowns:V}=this;V&&(0,se.P)(V,j),j instanceof re&&j._removeParent(this)}}re.EMPTY=(()=>{const ge=new re;return ge.closed=!0,ge})();const pe=re.EMPTY;function ce(ge){return ge instanceof re||ge&&"closed"in ge&&(0,m.m)(ge.remove)&&(0,m.m)(ge.add)&&(0,m.m)(ge.unsubscribe)}function oe(ge){(0,m.m)(ge)?ge():ge.unsubscribe()}},2416:(at,Ae,O)=>{"use strict";O.d(Ae,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Ae,O)=>{"use strict";O.d(Ae,{E:()=>L});const L=new(O(8306).y)(re=>re.complete())},8996:(at,Ae,O)=>{"use strict";O.d(Ae,{D:()=>De});var m=O(8421),L=O(5363),M=O(9468),pe=O(8306),oe=O(2202),ge=O(576),j=O(9672);function X(ye,ze){if(!ye)throw new Error("Iterable cannot be null");return new pe.y(te=>{(0,j.f)(te,ze,()=>{const Ze=ye[Symbol.asyncIterator]();(0,j.f)(te,ze,()=>{Ze.next().then(Y=>{Y.done?te.complete():te.next(Y.value)})},0,!0)})})}var Ve=O(3670),Se=O(8239),Pe=O(1144),Ue=O(6495),K=O(2206),ae=O(4532),xe=O(3260);function De(ye,ze){return ze?function le(ye,ze){if(null!=ye){if((0,Ve.c)(ye))return function se(ye,ze){return(0,m.Xf)(ye).pipe((0,M.R)(ze),(0,L.Q)(ze))}(ye,ze);if((0,Pe.z)(ye))return function ce(ye,ze){return new pe.y(te=>{let Ze=0;return ze.schedule(function(){Ze===ye.length?te.complete():(te.next(ye[Ze++]),te.closed||this.schedule())})})}(ye,ze);if((0,Se.t)(ye))return function re(ye,ze){return(0,m.Xf)(ye).pipe((0,M.R)(ze),(0,L.Q)(ze))}(ye,ze);if((0,K.D)(ye))return X(ye,ze);if((0,Ue.T)(ye))return function V(ye,ze){return new pe.y(te=>{let Ze;return(0,j.f)(te,ze,()=>{Ze=ye[oe.h](),(0,j.f)(te,ze,()=>{let Y,he;try{({value:Y,done:he}=Ze.next())}catch(de){return void te.error(de)}he?te.complete():te.next(Y)},0,!0)}),()=>(0,ge.m)(null==Ze?void 0:Ze.return)&&Ze.return()})}(ye,ze);if((0,xe.L)(ye))return function Me(ye,ze){return X((0,xe.Q)(ye),ze)}(ye,ze)}throw(0,ae.z)(ye)}(ye,ze):(0,m.Xf)(ye)}},8421:(at,Ae,O)=>{"use strict";O.d(Ae,{Xf:()=>Ve});var m=O(655),L=O(1144),M=O(8239),se=O(8306),re=O(3670),pe=O(2206),ce=O(4532),oe=O(6495),ge=O(3260),j=O(576),V=O(7849),X=O(8822);function Ve(le){if(le instanceof se.y)return le;if(null!=le){if((0,re.c)(le))return function Se(le){return new se.y(De=>{const ye=le[X.L]();if((0,j.m)(ye.subscribe))return ye.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(le);if((0,L.z)(le))return function Pe(le){return new se.y(De=>{for(let ye=0;ye<le.length&&!De.closed;ye++)De.next(le[ye]);De.complete()})}(le);if((0,M.t)(le))return function Ue(le){return new se.y(De=>{le.then(ye=>{De.closed||(De.next(ye),De.complete())},ye=>De.error(ye)).then(null,V.h)})}(le);if((0,pe.D)(le))return ae(le);if((0,oe.T)(le))return function K(le){return new se.y(De=>{for(const ye of le)if(De.next(ye),De.closed)return;De.complete()})}(le);if((0,ge.L)(le))return function xe(le){return ae((0,ge.Q)(le))}(le)}throw(0,ce.z)(le)}function ae(le){return new se.y(De=>{(function Me(le,De){var ye,ze,te,Ze;return(0,m.mG)(this,void 0,void 0,function*(){try{for(ye=(0,m.KL)(le);!(ze=yield ye.next()).done;)if(De.next(ze.value),De.closed)return}catch(Y){te={error:Y}}finally{try{ze&&!ze.done&&(Ze=ye.return)&&(yield Ze.call(ye))}finally{if(te)throw te.error}}De.complete()})})(le,De).catch(ye=>De.error(ye))})}},6451:(at,Ae,O)=>{"use strict";O.d(Ae,{T:()=>pe});var m=O(8189),L=O(8421),M=O(515),se=O(7669),re=O(8996);function pe(...ce){const oe=(0,se.yG)(ce),ge=(0,se._6)(ce,1/0),j=ce;return j.length?1===j.length?(0,L.Xf)(j[0]):(0,m.J)(ge)((0,re.D)(j,oe)):M.E}},5403:(at,Ae,O)=>{"use strict";O.d(Ae,{x:()=>L});var m=O(2961);function L(se,re,pe,ce,oe){return new M(se,re,pe,ce,oe)}class M extends m.Lv{constructor(re,pe,ce,oe,ge,j){super(re),this.onFinalize=ge,this.shouldUnsubscribe=j,this._next=pe?function(V){try{pe(V)}catch(X){re.error(X)}}:super._next,this._error=oe?function(V){try{oe(V)}catch(X){re.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(V){re.error(V)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(at,Ae,O)=>{"use strict";O.d(Ae,{U:()=>M});var m=O(4482),L=O(5403);function M(se,re){return(0,m.e)((pe,ce)=>{let oe=0;pe.subscribe((0,L.x)(ce,ge=>{ce.next(se.call(re,ge,oe++))}))})}},8189:(at,Ae,O)=>{"use strict";O.d(Ae,{J:()=>M});var m=O(5577),L=O(4671);function M(se=1/0){return(0,m.z)(L.y,se)}},5577:(at,Ae,O)=>{"use strict";O.d(Ae,{z:()=>oe});var m=O(4004),L=O(8421),M=O(4482),se=O(9672),re=O(5403),ce=O(576);function oe(ge,j,V=1/0){return(0,ce.m)(j)?oe((X,Ve)=>(0,m.U)((Se,Pe)=>j(X,Se,Ve,Pe))((0,L.Xf)(ge(X,Ve))),V):("number"==typeof j&&(V=j),(0,M.e)((X,Ve)=>function pe(ge,j,V,X,Ve,Se,Pe,Ue){const K=[];let ae=0,xe=0,Me=!1;const le=()=>{Me&&!K.length&&!ae&&j.complete()},De=ze=>ae<X?ye(ze):K.push(ze),ye=ze=>{Se&&j.next(ze),ae++;let te=!1;(0,L.Xf)(V(ze,xe++)).subscribe((0,re.x)(j,Ze=>{null==Ve||Ve(Ze),Se?De(Ze):j.next(Ze)},()=>{te=!0},void 0,()=>{if(te)try{for(ae--;K.length&&ae<X;){const Ze=K.shift();Pe?(0,se.f)(j,Pe,()=>ye(Ze)):ye(Ze)}le()}catch(Ze){j.error(Ze)}}))};return ge.subscribe((0,re.x)(j,De,()=>{Me=!0,le()})),()=>{null==Ue||Ue()}}(X,Ve,ge,V)))}},5363:(at,Ae,O)=>{"use strict";O.d(Ae,{Q:()=>se});var m=O(9672),L=O(4482),M=O(5403);function se(re,pe=0){return(0,L.e)((ce,oe)=>{ce.subscribe((0,M.x)(oe,ge=>(0,m.f)(oe,re,()=>oe.next(ge),pe),()=>(0,m.f)(oe,re,()=>oe.complete(),pe),ge=>(0,m.f)(oe,re,()=>oe.error(ge),pe)))})}},3099:(at,Ae,O)=>{"use strict";O.d(Ae,{B:()=>pe});var m=O(8996),L=O(5698),M=O(7579),se=O(2961),re=O(4482);function pe(oe={}){const{connector:ge=(()=>new M.x),resetOnError:j=!0,resetOnComplete:V=!0,resetOnRefCountZero:X=!0}=oe;return Ve=>{let Se=null,Pe=null,Ue=null,K=0,ae=!1,xe=!1;const Me=()=>{null==Pe||Pe.unsubscribe(),Pe=null},le=()=>{Me(),Se=Ue=null,ae=xe=!1},De=()=>{const ye=Se;le(),null==ye||ye.unsubscribe()};return(0,re.e)((ye,ze)=>{K++,!xe&&!ae&&Me();const te=Ue=null!=Ue?Ue:ge();ze.add(()=>{K--,0===K&&!xe&&!ae&&(Pe=ce(De,X))}),te.subscribe(ze),Se||(Se=new se.Hp({next:Ze=>te.next(Ze),error:Ze=>{xe=!0,Me(),Pe=ce(le,j,Ze),te.error(Ze)},complete:()=>{ae=!0,Me(),Pe=ce(le,V),te.complete()}}),(0,m.D)(ye).subscribe(Se))})(Ve)}}function ce(oe,ge,...j){return!0===ge?(oe(),null):!1===ge?null:ge(...j).pipe((0,L.q)(1)).subscribe(()=>oe())}},9468:(at,Ae,O)=>{"use strict";O.d(Ae,{R:()=>L});var m=O(4482);function L(M,se=0){return(0,m.e)((re,pe)=>{pe.add(M.schedule(()=>re.subscribe(pe),se))})}},5698:(at,Ae,O)=>{"use strict";O.d(Ae,{q:()=>se});var m=O(515),L=O(4482),M=O(5403);function se(re){return re<=0?()=>m.E:(0,L.e)((pe,ce)=>{let oe=0;pe.subscribe((0,M.x)(ce,ge=>{++oe<=re&&(ce.next(ge),re<=oe&&ce.complete())}))})}},8505:(at,Ae,O)=>{"use strict";O.d(Ae,{b:()=>re});var m=O(576),L=O(4482),M=O(5403),se=O(4671);function re(pe,ce,oe){const ge=(0,m.m)(pe)||ce||oe?{next:pe,error:ce,complete:oe}:pe;return ge?(0,L.e)((j,V)=>{var X;null===(X=ge.subscribe)||void 0===X||X.call(ge);let Ve=!0;j.subscribe((0,M.x)(V,Se=>{var Pe;null===(Pe=ge.next)||void 0===Pe||Pe.call(ge,Se),V.next(Se)},()=>{var Se;Ve=!1,null===(Se=ge.complete)||void 0===Se||Se.call(ge),V.complete()},Se=>{var Pe;Ve=!1,null===(Pe=ge.error)||void 0===Pe||Pe.call(ge,Se),V.error(Se)},()=>{var Se,Pe;Ve&&(null===(Se=ge.unsubscribe)||void 0===Se||Se.call(ge)),null===(Pe=ge.finalize)||void 0===Pe||Pe.call(ge)}))}):se.y}},4408:(at,Ae,O)=>{"use strict";O.d(Ae,{o:()=>re});var m=O(727);class L extends m.w0{constructor(ce,oe){super()}schedule(ce,oe=0){return this}}const M={setInterval(...pe){const{delegate:ce}=M;return((null==ce?void 0:ce.setInterval)||setInterval)(...pe)},clearInterval(pe){const{delegate:ce}=M;return((null==ce?void 0:ce.clearInterval)||clearInterval)(pe)},delegate:void 0};var se=O(8737);class re extends L{constructor(ce,oe){super(ce,oe),this.scheduler=ce,this.work=oe,this.pending=!1}schedule(ce,oe=0){if(this.closed)return this;this.state=ce;const ge=this.id,j=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(j,ge,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(j,this.id,oe),this}requestAsyncId(ce,oe,ge=0){return M.setInterval(ce.flush.bind(ce,this),ge)}recycleAsyncId(ce,oe,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return oe;M.clearInterval(oe)}execute(ce,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(ce,oe);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,oe){let j,ge=!1;try{this.work(ce)}catch(V){ge=!0,j=V||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ce,scheduler:oe}=this,{actions:ge}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ge,this),null!=ce&&(this.id=this.recycleAsyncId(oe,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Ae,O)=>{"use strict";O.d(Ae,{v:()=>M});var m=O(6063);class L{constructor(re,pe=L.now){this.schedulerActionCtor=re,this.now=pe}schedule(re,pe=0,ce){return new this.schedulerActionCtor(this,re).schedule(ce,pe)}}L.now=m.l.now;class M extends L{constructor(re,pe=L.now){super(re,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:pe}=this;if(this._active)return void pe.push(re);let ce;this._active=!0;do{if(ce=re.execute(re.state,re.delay))break}while(re=pe.shift());if(this._active=!1,ce){for(;re=pe.shift();)re.unsubscribe();throw ce}}}},4986:(at,Ae,O)=>{"use strict";O.d(Ae,{z:()=>M});var m=O(4408);const M=new(O(7565).v)(m.o)},6063:(at,Ae,O)=>{"use strict";O.d(Ae,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(at,Ae,O)=>{"use strict";O.d(Ae,{z:()=>m});const m={setTimeout(...L){const{delegate:M}=m;return((null==M?void 0:M.setTimeout)||setTimeout)(...L)},clearTimeout(L){const{delegate:M}=m;return((null==M?void 0:M.clearTimeout)||clearTimeout)(L)},delegate:void 0}},2202:(at,Ae,O)=>{"use strict";O.d(Ae,{h:()=>L});const L=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Ae,O)=>{"use strict";O.d(Ae,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Ae,O)=>{"use strict";O.d(Ae,{_6:()=>pe,jO:()=>se,yG:()=>re});var m=O(576);function M(ce){return ce[ce.length-1]}function se(ce){return(0,m.m)(M(ce))?ce.pop():void 0}function re(ce){return function L(ce){return ce&&(0,m.m)(ce.schedule)}(M(ce))?ce.pop():void 0}function pe(ce,oe){return"number"==typeof M(ce)?ce.pop():oe}},8737:(at,Ae,O)=>{"use strict";function m(L,M){if(L){const se=L.indexOf(M);0<=se&&L.splice(se,1)}}O.d(Ae,{P:()=>m})},3888:(at,Ae,O)=>{"use strict";function m(L){const se=L(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}O.d(Ae,{d:()=>m})},2806:(at,Ae,O)=>{"use strict";O.d(Ae,{x:()=>M,O:()=>se});var m=O(2416);let L=null;function M(re){if(m.v.useDeprecatedSynchronousErrorHandling){const pe=!L;if(pe&&(L={errorThrown:!1,error:null}),re(),pe){const{errorThrown:ce,error:oe}=L;if(L=null,ce)throw oe}}else re()}function se(re){m.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=re)}},9672:(at,Ae,O)=>{"use strict";function m(L,M,se,re=0,pe=!1){const ce=M.schedule(function(){se(),pe?L.add(this.schedule(null,re)):this.unsubscribe()},re);if(L.add(ce),!pe)return ce}O.d(Ae,{f:()=>m})},4671:(at,Ae,O)=>{"use strict";function m(L){return L}O.d(Ae,{y:()=>m})},1144:(at,Ae,O)=>{"use strict";O.d(Ae,{z:()=>m});const m=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(at,Ae,O)=>{"use strict";O.d(Ae,{D:()=>L});var m=O(576);function L(M){return Symbol.asyncIterator&&(0,m.m)(null==M?void 0:M[Symbol.asyncIterator])}},576:(at,Ae,O)=>{"use strict";function m(L){return"function"==typeof L}O.d(Ae,{m:()=>m})},3670:(at,Ae,O)=>{"use strict";O.d(Ae,{c:()=>M});var m=O(8822),L=O(576);function M(se){return(0,L.m)(se[m.L])}},6495:(at,Ae,O)=>{"use strict";O.d(Ae,{T:()=>M});var m=O(2202),L=O(576);function M(se){return(0,L.m)(null==se?void 0:se[m.h])}},8239:(at,Ae,O)=>{"use strict";O.d(Ae,{t:()=>L});var m=O(576);function L(M){return(0,m.m)(null==M?void 0:M.then)}},3260:(at,Ae,O)=>{"use strict";O.d(Ae,{Q:()=>M,L:()=>se});var m=O(655),L=O(576);function M(re){return(0,m.FC)(this,arguments,function*(){const ce=re.getReader();try{for(;;){const{value:oe,done:ge}=yield(0,m.qq)(ce.read());if(ge)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(oe)}}finally{ce.releaseLock()}})}function se(re){return(0,L.m)(null==re?void 0:re.getReader)}},4482:(at,Ae,O)=>{"use strict";O.d(Ae,{A:()=>L,e:()=>M});var m=O(576);function L(se){return(0,m.m)(null==se?void 0:se.lift)}function M(se){return re=>{if(L(re))return re.lift(function(pe){try{return se(pe,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(at,Ae,O)=>{"use strict";O.d(Ae,{h:()=>M});var m=O(2416),L=O(3410);function M(se){L.z.setTimeout(()=>{const{onUnhandledError:re}=m.v;if(!re)throw se;re(se)})}},4532:(at,Ae,O)=>{"use strict";function m(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ae,{z:()=>m})},655:(at,Ae,O)=>{"use strict";function se(Y,he){var de={};for(var me in Y)Object.prototype.hasOwnProperty.call(Y,me)&&he.indexOf(me)<0&&(de[me]=Y[me]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(me=Object.getOwnPropertySymbols(Y);ke<me.length;ke++)he.indexOf(me[ke])<0&&Object.prototype.propertyIsEnumerable.call(Y,me[ke])&&(de[me[ke]]=Y[me[ke]])}return de}function oe(Y,he,de,me){return new(de||(de=Promise))(function(ue,yt){function qt(rt){try{ut(me.next(rt))}catch(Zn){yt(Zn)}}function Tn(rt){try{ut(me.throw(rt))}catch(Zn){yt(Zn)}}function ut(rt){rt.done?ue(rt.value):function ke(ue){return ue instanceof de?ue:new de(function(yt){yt(ue)})}(rt.value).then(qt,Tn)}ut((me=me.apply(Y,he||[])).next())})}function K(Y){return this instanceof K?(this.v=Y,this):new K(Y)}function ae(Y,he,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,me=de.apply(Y,he||[]),ue=[];return ke={},yt("next"),yt("throw"),yt("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function yt(Xt){me[Xt]&&(ke[Xt]=function(hr){return new Promise(function(Yt,Bt){ue.push([Xt,hr,Yt,Bt])>1||qt(Xt,hr)})})}function qt(Xt,hr){try{!function Tn(Xt){Xt.value instanceof K?Promise.resolve(Xt.value.v).then(ut,rt):Zn(ue[0][2],Xt)}(me[Xt](hr))}catch(Yt){Zn(ue[0][3],Yt)}}function ut(Xt){qt("next",Xt)}function rt(Xt){qt("throw",Xt)}function Zn(Xt,hr){Xt(hr),ue.shift(),ue.length&&qt(ue[0][0],ue[0][1])}}function Me(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,he=Y[Symbol.asyncIterator];return he?he.call(Y):(Y=function X(Y){var he="function"==typeof Symbol&&Symbol.iterator,de=he&&Y[he],me=0;if(de)return de.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&me>=Y.length&&(Y=void 0),{value:Y&&Y[me++],done:!Y}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),de={},me("next"),me("throw"),me("return"),de[Symbol.asyncIterator]=function(){return this},de);function me(ue){de[ue]=Y[ue]&&function(yt){return new Promise(function(qt,Tn){!function ke(ue,yt,qt,Tn){Promise.resolve(Tn).then(function(ut){ue({value:ut,done:qt})},yt)}(qt,Tn,(yt=Y[ue](yt)).done,yt.value)})}}}O.d(Ae,{_T:()=>se,mG:()=>oe,qq:()=>K,FC:()=>ae,KL:()=>Me})},5e3:(at,Ae,O)=>{"use strict";O.d(Ae,{deG:()=>sh,tb:()=>Gg,AFp:()=>$g,ip1:()=>Lv,CZH:()=>Yu,hGG:()=>Fb,z2F:()=>Lf,sBO:()=>i_,Sil:()=>Hv,_Vd:()=>Sd,EJc:()=>$v,SBq:()=>wf,qLn:()=>Dh,vpe:()=>Mi,tBr:()=>Vs,XFs:()=>dt,OlP:()=>En,zs3:()=>Tr,ZZ4:()=>h_,aQg:()=>f_,soG:()=>qg,YKP:()=>Ra,h0i:()=>gl,PXZ:()=>t_,R0b:()=>Ds,FiY:()=>Ir,Lbi:()=>Hg,g9A:()=>LE,Qsj:()=>eE,FYo:()=>bg,JOm:()=>Oo,tp0:()=>Pr,Rgc:()=>Ku,dDg:()=>BE,q4F:()=>Ef,GfV:()=>lv,s_b:()=>Sg,ifc:()=>Ct,eFA:()=>Wg,G48:()=>r_,X6Q:()=>zE,_c5:()=>tm,VLi:()=>Qv,c2e:()=>jv,zSh:()=>Hp,wAp:()=>pt,vHH:()=>Pe,cg1:()=>Wy,kL8:()=>Sw,dqk:()=>Ft,sIi:()=>dd,CqO:()=>Ay,QGY:()=>Ta,F4k:()=>pd,RDi:()=>Ml,AaK:()=>oe,TTD:()=>qo,xp6:()=>s0,uIk:()=>Xp,Suo:()=>Og,Xpm:()=>en,lG2:()=>Te,Yz7:()=>Yt,cJS:()=>Jt,oAB:()=>ie,Yjl:()=>$e,Y36:()=>Jh,_UZ:()=>On,qZA:()=>po,TgZ:()=>ig,EpF:()=>Uu,LFG:()=>Be,$8M:()=>da,$Z:()=>Ar,NdJ:()=>Qe,CRH:()=>Tv,Q6J:()=>Lu,s9C:()=>Xh,iGM:()=>Ng,MAs:()=>Ey,CHM:()=>sc,LSH:()=>Zl,YNc:()=>J0,_uU:()=>Ew,Oqu:()=>Ly});var m=O(7579),L=O(727),M=O(8306),se=O(6451),re=O(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function oe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(oe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ge(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=pe({__forward_ref__:pe});function V(i){return i.__forward_ref__=V,i.toString=function(){return oe(this())},i}function X(i){return function Ve(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===V}(i)?i():i}class Pe extends Error{constructor(s,a){super(function Ue(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function K(i){return"string"==typeof i?i:null==i?"":String(i)}function ae(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():K(i)}function De(i,s){const a=s?` in ${s}`:"";throw new Pe(-201,`No provider for ${ae(i)} found${a}`)}function ut(i,s){null==i&&function rt(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Jt(i){return{providers:i.providers||[],imports:i.imports||[]}}function fn(i){return Ni(i,ci)||Ni(i,Un)}function Ni(i,s){return i.hasOwnProperty(s)?i[s]:null}function Oi(i){return i&&(i.hasOwnProperty(wi)||i.hasOwnProperty(Pi))?i[wi]:null}const ci=pe({\u0275prov:pe}),wi=pe({\u0275inj:pe}),Un=pe({ngInjectableDef:pe}),Pi=pe({ngInjectorDef:pe});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let vr;function jt(i){const s=vr;return vr=i,s}function _r(i,s,a){const u=fn(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&dt.Optional?null:void 0!==s?s:void De(oe(i),"Injector")}function ot(i){return{toString:i}.toString()}var wt=(()=>((wt=wt||{})[wt.OnPush=0]="OnPush",wt[wt.Default=1]="Default",wt))(),Ct=(()=>{return(i=Ct||(Ct={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ct;var i})();const it="undefined"!=typeof globalThis&&globalThis,Ye="undefined"!=typeof window&&window,Ss="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=it||"undefined"!=typeof global&&global||Ye||Ss,ln={},U=[],$=pe({\u0275cmp:pe}),G=pe({\u0275dir:pe}),_e=pe({\u0275pipe:pe}),ne=pe({\u0275mod:pe}),Ge=pe({\u0275fac:pe}),ct=pe({__NG_ELEMENT_ID__:pe});let $t=0;function en(i){return ot(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===wt.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||U,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ct.Emulated,id:"c",styles:i.styles||U,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,h=i.features,y=i.pipes;return u.id+=$t++,u.inputs=H(i.inputs,a),u.outputs=H(i.outputs),h&&h.forEach(_=>_(u)),u.directiveDefs=l?()=>("function"==typeof l?l():l).map(Yn):null,u.pipeDefs=y?()=>("function"==typeof y?y():y).map(St):null,u})}function Yn(i){return st(i)||function Et(i){return i[G]||null}(i)}function St(i){return function kt(i){return i[_e]||null}(i)}const jn={};function ie(i){return ot(()=>{const s={type:i.type,bootstrap:i.bootstrap||U,declarations:i.declarations||U,imports:i.imports||U,exports:i.exports||U,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(jn[i.id]=i.type),s})}function H(i,s){if(null==i)return ln;const a={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),a[l]=u,s&&(s[l]=h)}return a}const Te=en;function $e(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function st(i){return i[$]||null}function Mt(i,s){const a=i[ne]||null;if(!a&&!0===s)throw new Error(`Type ${oe(i)} does not have '\u0275mod' property.`);return a}function Wr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Li(i){return Array.isArray(i)&&!0===i[1]}function $a(i){return 0!=(8&i.flags)}function Il(i){return 2==(2&i.flags)}function Ui(i){return 1==(1&i.flags)}function Vi(i){return null!==i.template}function Qu(i){return 0!=(512&i[2])}function Ii(i,s){return i.hasOwnProperty(Ge)?i[Ge]:null}class Al{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function qo(){return zo}function zo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Wo),Qd}function Qd(){const i=Ko(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ln)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Wo(i,s,a,u){const l=Ko(i)||function yo(i,s){return i[Sl]=s}(i,{previous:ln,current:null}),h=l.current||(l.current={}),y=l.previous,_=this.declaredInputs[a],I=y[_];h[_]=new Al(I&&I.currentValue,s,y===ln),i[u]=s}qo.ngInherit=!0;const Sl="__ngSimpleChanges__";function Ko(i){return i[Sl]||null}let za;function Ml(i){za=i}function un(i){return!!i.listen}const vo={createRenderer:(i,s)=>function Di(){return void 0!==za?za:"undefined"!=typeof document?document:void 0}()};function rn(i){for(;Array.isArray(i);)i=i[0];return i}function Qn(i,s){return rn(s[i.index])}function Sn(i,s){return i.data[s]}function pr(i,s){const a=s[i];return Wr(a)?a:a[0]}function Js(i){return 4==(4&i[2])}function Fs(i){return 128==(128&i[2])}function bi(i,s){return null==s?null:i[s]}function ji(i){i[18]=0}function ts(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const ft={lFrame:dc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Xo(){return ft.bindingsEnabled}function Ce(){return ft.lFrame.lView}function Ot(){return ft.lFrame.tView}function sc(i){return ft.lFrame.contextLView=i,i[8]}function gn(){let i=wo();for(;null!==i&&64===i.type;)i=i.parent;return i}function wo(){return ft.lFrame.currentTNode}function di(i,s){const a=ft.lFrame;a.currentTNode=i,a.isParent=s}function oc(){return ft.lFrame.isParent}function eo(){return ft.isInCheckNoChangesMode}function Za(i){ft.isInCheckNoChangesMode=i}function Ls(){return ft.lFrame.bindingIndex++}function uc(i,s){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=i,na(s)}function na(i){ft.lFrame.currentDirectiveIndex=i}function cc(){return ft.lFrame.currentQueryIndex}function lc(i){ft.lFrame.currentQueryIndex=i}function Xd(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ia(i,s,a){if(a&dt.SkipSelf){let l=s,h=i;for(;!(l=l.parent,null!==l||a&dt.Host||(l=Xd(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;s=l,i=h}const u=ft.lFrame=Us();return u.currentTNode=s,u.lView=i,!0}function sa(i){const s=Us(),a=i[1];ft.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Us(){const i=ft.lFrame,s=null===i?null:i.child;return null===s?dc(i):s}function dc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function eh(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const th=eh;function Eo(){const i=eh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function gr(){return ft.lFrame.selectedIndex}function rs(i){ft.lFrame.selectedIndex=i}function _n(){const i=ft.lFrame;return Sn(i.tView,i.selectedIndex)}function aa(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:_,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:S}=h;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),_&&((i.contentHooks||(i.contentHooks=[])).push(a,_),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,_)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function hc(i,s,a){ur(i,s,3,a)}function fc(i,s,a,u){(3&i[2])===a&&ur(i,s,a,u)}function Ja(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function ur(i,s,a,u){const h=null!=u?u:-1,y=s.length-1;let _=0;for(let I=void 0!==u?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(_=s[I],null!=u&&_>=u)break}else s[I]<0&&(i[18]+=65536),(_<h||-1==h)&&(pc(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function pc(i,s,a,u){const l=a[u]<0,h=a[u+1],_=i[l?-a[u]:a[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(_)}finally{}}}else try{h.call(_)}finally{}}class Xa{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function Je(i,s,a){const u=un(i);let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const y=a[l++],_=a[l++],I=a[l++];u?i.setAttribute(s,_,I,y):s.setAttributeNS(y,_,I)}else{const y=h,_=a[++l];Zr(y)?u&&i.setProperty(s,y,_):u?i.setAttribute(s,y,_):s.setAttribute(y,_),l++}}return l}function ss(i){return 3===i||4===i||6===i}function Zr(i){return 64===i.charCodeAt(0)}function Jn(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?a=l:0===a||vc(i,a,l,null,-1===a||2===a?s[++u]:null)}}return i}function vc(i,s,a,u,l){let h=0,y=i.length;if(-1===s)y=-1;else for(;h<i.length;){const _=i[h++];if("number"==typeof _){if(_===s){y=-1;break}if(_>s){y=h-1;break}}}for(;h<i.length;){const _=i[h];if("number"==typeof _)break;if(_===a){if(null===u)return void(null!==l&&(i[h+1]=l));if(u===i[h+1])return void(i[h+2]=l)}h++,null!==u&&h++,null!==l&&h++}-1!==y&&(i.splice(y,0,s),h=y+1),i.splice(h++,0,a),null!==u&&i.splice(h++,0,u),null!==l&&i.splice(h++,0,l)}function Mn(i){return-1!==i}function Io(i){return 32767&i}function Do(i,s){let a=function ua(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let no=!0;function os(i){const s=no;return no=i,s}let nu=0;function mn(i,s){const a=ca(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,bo(u.data,i),bo(s,null),bo(u.blueprint,null));const l=To(i,s),h=i.injectorIndex;if(Mn(l)){const y=Io(l),_=Do(l,s),I=_[1].data;for(let C=0;C<8;C++)s[h+C]=_[y+C]|I[y+C]}return s[h+8]=l,h}function bo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function ca(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function To(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,l=s;for(;null!==l;){const h=l[1],y=h.type;if(u=2===y?h.declTNode:1===y?l[6]:null,null===u)return-1;if(a++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Rr(i,s,a){!function Pl(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(ct)&&(u=a[ct]),null==u&&(u=a[ct]=nu++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Co(i,s,a){if(a&dt.Optional)return i;De(s,"NodeInjector")}function Hi(i,s,a,u){if(a&dt.Optional&&void 0===u&&(u=null),0==(a&(dt.Self|dt.Host))){const l=i[9],h=jt(void 0);try{return l?l.get(s,u,a&dt.Optional):_r(s,u,a&dt.Optional)}finally{jt(h)}}return Co(u,s,a)}function iu(i,s,a,u=dt.Default,l){if(null!==i){const h=function Yr(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ct)?i[ct]:void 0;return"number"==typeof s?s>=0?255&s:ro:s}(a);if("function"==typeof h){if(!ia(s,i,u))return u&dt.Host?Co(l,a,u):Hi(s,a,u,l);try{const y=h(u);if(null!=y||u&dt.Optional)return y;De(a)}finally{th()}}else if("number"==typeof h){let y=null,_=ca(i,s),I=-1,C=u&dt.Host?s[16][6]:null;for((-1===_||u&dt.SkipSelf)&&(I=-1===_?To(i,s):s[_+8],-1!==I&&So(u,!1)?(y=s[1],_=Io(I),s=Do(I,s)):_=-1);-1!==_;){const S=s[1];if(Ec(h,_,S.data)){const k=wc(_,s,a,y,u,C);if(k!==la)return k}I=s[_+8],-1!==I&&So(u,s[1].data[_+8]===C)&&Ec(h,_,s)?(y=S,_=Io(I),s=Do(I,s)):_=-1}}}return Hi(s,a,u,l)}const la={};function ro(){return new Rn(gn(),Ce())}function wc(i,s,a,u,l,h){const y=s[1],_=y.data[i+8],S=as(_,y,a,null==u?Il(_)&&no:u!=y&&0!=(3&_.type),l&dt.Host&&h===_);return null!==S?Ao(s,y,S,_):la}function as(i,s,a,u,l){const h=i.providerIndexes,y=s.data,_=1048575&h,I=i.directiveStart,S=h>>20,B=l?_+S:i.directiveEnd;for(let Q=u?_:_+S;Q<B;Q++){const we=y[Q];if(Q<I&&a===we||Q>=I&&we.type===a)return Q}if(l){const Q=y[I];if(Q&&Vi(Q)&&Q.type===a)return I}return null}function Ao(i,s,a,u){let l=i[a];const h=s.data;if(function gc(i){return i instanceof Xa}(l)){const y=l;y.resolving&&function xe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${i}${a}`)}(ae(h[a]));const _=os(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?jt(y.injectImpl):null;ia(i,u,dt.Default);try{l=i[a]=y.factory(void 0,h,i,u),s.firstCreatePass&&a>=u.directiveStart&&function to(i,s,a){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:h}=s.type.prototype;if(u){const y=zo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==I&&jt(I),os(_),y.resolving=!1,th()}}return l}function Ec(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function So(i,s){return!(i&dt.Self||i&dt.Host&&s)}class Rn{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return iu(this._tNode,this._lView,s,u,a)}}function da(i){return function ru(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let l=0;for(;l<u;){const h=a[l];if(ss(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<u&&"string"==typeof a[l];)l++;else{if(h===s)return a[l+1];l+=2}}}return null}(gn(),i)}const Gn="__parameters__";function hi(i,s,a){return ot(()=>{const u=function Ic(i){return function(...a){if(i){const u=i(...a);for(const l in u)this[l]=u[l]}}}(s);function l(...h){if(this instanceof l)return u.apply(this,h),this;const y=new l(...h);return _.annotation=y,_;function _(I,C,S){const k=I.hasOwnProperty(Gn)?I[Gn]:Object.defineProperty(I,Gn,{value:[]})[Gn];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(y),I}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class En{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sh=new En("AnalyzeForEntryComponents");function Nr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),Nr(u,s)):s!==i&&s.push(u)}return s}function Ci(i,s){i.forEach(a=>Array.isArray(a)?Ci(a,s):s(a))}function pa(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function uu(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const ds={},pu="__NG_DI_FLAG__",ya="ngTempTokenPath",D=/\n/gm,x="__source",F=pe({provide:String,useValue:pe});let W;function Z(i){const s=W;return W=i,s}function Ne(i,s=dt.Default){if(void 0===W)throw new Pe(203,"");return null===W?_r(i,void 0,s):W.get(i,s&dt.Optional?null:void 0,s)}function Be(i,s=dt.Default){return(function yn(){return vr}()||Ne)(X(i),s)}function Wt(i){const s=[];for(let a=0;a<i.length;a++){const u=X(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Pe(900,"");let l,h=dt.Default;for(let y=0;y<u.length;y++){const _=u[y],I=Or(_);"number"==typeof I?-1===I?l=_.token:h|=I:l=_}s.push(Be(l,h))}else s.push(Be(u))}return s}function Nn(i,s){return i[pu]=s,i.prototype[pu]=s,i}function Or(i){return i[pu]}const Vs=Nn(hi("Inject",i=>({token:i})),-1),Ir=Nn(hi("Optional"),8),Pr=Nn(hi("SkipSelf"),4);class ql{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const f=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,w=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var cr=(()=>((cr=cr||{})[cr.NONE=0]="NONE",cr[cr.HTML=1]="HTML",cr[cr.STYLE=2]="STYLE",cr[cr.SCRIPT=3]="SCRIPT",cr[cr.URL=4]="URL",cr[cr.RESOURCE_URL=5]="RESOURCE_URL",cr))();function Zl(i){const s=function Yl(){const i=Ce();return i&&i[12]}();return s?s.sanitize(cr.URL,i)||"":function Bs(i,s){const a=function hh(i){return i instanceof ql&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?function fs(i){return i instanceof ql?i.changingThisBreaksApplicationSecurity:i}(i):function A(i){return(i=String(i)).match(f)||i.match(w)?i:"unsafe:"+i}(K(i))}const P_="__ngContext__";function pi(i,s){i[P_]=s}function _m(i){const s=function _h(i){return i[P_]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Dm(i){return i.ngOriginalError}function FI(i,...s){i.error(...s)}class Dh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=function kI(i){return i&&i.ngErrorLogger||FI}(s);u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Dm(s);for(;a&&Dm(a);)a=Dm(a);return a||null}}const F_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function ao(i){return i instanceof Function?i():i}var Oo=(()=>((Oo=Oo||{})[Oo.Important=1]="Important",Oo[Oo.DashCase=2]="DashCase",Oo))();function Tm(i,s){return undefined(i,s)}function bh(i){const s=i[3];return Li(s)?s[3]:s}function mp(i){return $_(i[13])}function Am(i){return $_(i[4])}function $_(i){for(;null!==i&&!Li(i);)i=i[4];return i}function Ql(i,s,a,u,l){if(null!=u){let h,y=!1;Li(u)?h=u:Wr(u)&&(y=!0,u=u[0]);const _=rn(u);0===i&&null!==a?null==l?W_(s,a,_):bu(s,a,_,l||null,!0):1===i&&null!==a?bu(s,a,_,l||null,!0):2===i?function e0(i,s,a){const u=Ep(i,s);u&&function Z_(i,s,a,u){un(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,_,y):3===i&&s.destroyNode(_),null!=h&&function JI(i,s,a,u,l){const h=a[7];h!==rn(a)&&Ql(s,i,u,h,l);for(let _=10;_<a.length;_++){const I=a[_];Th(I[1],I,i,s,u,h)}}(s,i,h,a,l)}}function ti(i,s,a){if(un(i))return i.createElement(s,a);{const u=null!==a?function xl(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function G_(i,s){const a=i[9],u=a.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,ts(l,-1)),a.splice(u,1)}function _p(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const l=u[17];null!==l&&l!==i&&G_(l,u),s>0&&(i[a-1][4]=u[4]);const h=uu(i,10+s);!function KI(i,s){Th(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const y=h[19];null!==y&&y.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function q_(i,s){if(!(256&s[2])){const a=s[11];un(a)&&a.destroyNode&&Th(i,s,a,3,null,null),function Sm(i){let s=i[13];if(!s)return wp(i[1],i);for(;s;){let a=null;if(Wr(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)Wr(s)&&wp(s[1],s),s=s[3];null===s&&(s=i),Wr(s)&&wp(s[1],s),a=s&&s[4]}s=a}}(s)}}function wp(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function xm(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const l=s[a[u]];if(!(l instanceof Xa)){const h=a[u+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const _=l[h[y]],I=h[y+1];try{I.call(_)}finally{}}else try{h.call(l)}finally{}}}}(i,s),function z_(i,s){const a=i.cleanup,u=s[7];let l=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const y=a[h+1],_="function"==typeof y?y(s):rn(s[y]),I=u[l=a[h+2]],C=a[h+3];"boolean"==typeof C?_.removeEventListener(a[h],I,C):C>=0?u[l=C]():u[l=-C].unsubscribe(),h+=2}else{const y=u[l=a[h+1]];a[h].call(y)}if(null!==u){for(let h=l+1;h<u.length;h++)u[h]();s[7]=null}}(i,s),1===s[1].type&&un(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Li(s[3])){a!==s[3]&&G_(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function YI(i,s,a){return function Du(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===Ct.None||l===Ct.Emulated)return null}return Qn(u,a)}(i,s.parent,a)}function bu(i,s,a,u,l){un(i)?i.insertBefore(s,a,u,l):s.insertBefore(a,u,l)}function W_(i,s,a){un(i)?i.appendChild(s,a):s.appendChild(a)}function K_(i,s,a,u,l){null!==u?bu(i,s,a,u,l):W_(i,s,a)}function Ep(i,s){return un(i)?i.parentNode(s):s.parentNode}let Q_=function Mm(i,s,a){return 40&i.type?Qn(i,a):null};function Xl(i,s,a,u){const l=YI(i,u,s),h=s[11],_=function Y_(i,s,a){return Q_(i,s,a)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(a))for(let I=0;I<a.length;I++)K_(h,l,a[I],_,!1);else K_(h,l,a,_,!1)}function Ip(i,s){if(null!==s){const a=s.type;if(3&a)return Qn(s,i);if(4&a)return Dp(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return Ip(i,u);{const l=i[s.index];return Li(l)?Dp(-1,l):rn(l)}}if(32&a)return Tm(s,i)()||rn(i[s.index]);{const u=X_(i,s);return null!==u?Array.isArray(u)?u[0]:Ip(bh(i[16]),u):Ip(i,s.next)}}return null}function X_(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Dp(i,s){const a=10+i+1;if(a<s.length){const u=s[a],l=u[1].firstChild;if(null!==l)return Ip(u,l)}return s[7]}function t0(i,s,a,u,l,h,y){for(;null!=a;){const _=u[a.index],I=a.type;if(y&&0===s&&(_&&pi(rn(_),u),a.flags|=4),64!=(64&a.flags))if(8&I)t0(i,s,a.child,u,l,h,!1),Ql(s,i,l,_,h);else if(32&I){const C=Tm(a,u);let S;for(;S=C();)Ql(s,i,l,S,h);Ql(s,i,l,_,h)}else 16&I?Nm(i,s,u,a,l,h):Ql(s,i,l,_,h);a=y?a.projectionNext:a.next}}function Th(i,s,a,u,l,h){t0(a,u,i.firstChild,s,l,h,!1)}function Nm(i,s,a,u,l,h){const y=a[16],I=y[6].projection[u.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)Ql(s,i,l,I[C],h);else t0(i,s,I,y[3],l,h,!0)}function Tu(i,s,a){un(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Po(i,s,a){un(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Ch(i,s,a){let u=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const h=s.length;if(l+h===u||i.charCodeAt(l+h)<=32)return l}a=l+1}}const ni="ng-template";function Om(i,s,a){let u=0;for(;u<i.length;){let l=i[u++];if(a&&"class"===l){if(l=i[u],-1!==Ch(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function n0(i){return 4===i.type&&i.value!==ni}function XI(i,s,a){return s===(4!==i.type||a?i.value:ni)}function bT(i,s,a){let u=4;const l=i.attrs||[],h=function tt(i){for(let s=0;s<i.length;s++)if(ss(i[s]))return s;return i.length}(l);let y=!1;for(let _=0;_<s.length;_++){const I=s[_];if("number"!=typeof I){if(!y)if(4&u){if(u=2|1&u,""!==I&&!XI(i,I,a)||""===I&&1===s.length){if(co(u))return!1;y=!0}}else{const C=8&u?I:s[++_];if(8&u&&null!==i.attrs){if(!Om(i.attrs,C,a)){if(co(u))return!1;y=!0}continue}const k=Ee(8&u?"class":I,l,n0(i),a);if(-1===k){if(co(u))return!1;y=!0;continue}if(""!==C){let B;B=k>h?"":l[k+1].toLowerCase();const Q=8&u?B:null;if(Q&&-1!==Ch(Q,C,0)||2&u&&C!==B){if(co(u))return!1;y=!0}}}}else{if(!y&&!co(u)&&!co(I))return!1;if(y&&co(I))continue;y=!1,u=I|1&u}}return co(u)||y}function co(i){return 0==(1&i)}function Ee(i,s,a,u){if(null===s)return-1;let l=0;if(u||!a){let h=!1;for(;l<s.length;){const y=s[l];if(y===i)return l;if(3===y||6===y)h=!0;else{if(1===y||2===y){let _=s[++l];for(;"string"==typeof _;)_=s[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=h?1:2}return-1}return function Pm(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function r0(i,s,a=!1){for(let u=0;u<s.length;u++)if(bT(i,s[u],a))return!0;return!1}function Ah(i,s){return i?":not("+s.trim()+")":s}function km(i){let s=i[0],a=1,u=2,l="",h=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&u){const _=i[++a];l+="["+y+(_.length>0?'="'+_+'"':"")+"]"}else 8&u?l+="."+y:4&u&&(l+=" "+y);else""!==l&&!co(y)&&(s+=Ah(h,l),l=""),u=y,h=h||!co(u);a++}return""!==l&&(s+=Ah(h,l)),s}const Dt={};function s0(i){o0(Ot(),Ce(),gr()+i,eo())}function o0(i,s,a,u){if(!u)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&hc(s,h,a)}else{const h=i.preOrderHooks;null!==h&&fc(s,h,0,a)}rs(a)}function Wm(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const l=a[u],h=a[u+1];if(-1!==h){const y=i.data[h];lc(l),y.contentQueries(2,s[h],h)}}}function ed(i,s,a,u,l,h,y,_,I,C){const S=s.blueprint.slice();return S[0]=l,S[2]=140|u,ji(S),S[3]=S[15]=i,S[8]=a,S[10]=y||i&&i[10],S[11]=_||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=C||i&&i[9]||null,S[6]=h,S[16]=2==s.type?i[16]:S,S}function kc(i,s,a,u,l){let h=i.data[s];if(null===h)h=function Ph(i,s,a,u,l){const h=wo(),y=oc(),I=i.data[s]=function Ym(i,s,a,u,l,h){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,a,s,u,l);return null===i.firstChild&&(i.firstChild=I),null!==h&&(y?null==h.child&&null!==I.parent&&(h.child=I):null===h.next&&(h.next=I)),I}(i,s,a,u,l),function ac(){return ft.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=u,h.attrs=l;const y=function Xs(){const i=ft.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return di(h,!0),h}function Fc(i,s,a,u){if(0===a)return-1;const l=s.length;for(let h=0;h<a;h++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function kh(i,s,a){sa(s);try{const u=i.viewQuery;null!==u&&$p(1,u,a);const l=i.template;null!==l&&Rp(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Wm(i,s),i.staticViewQueries&&$p(2,i.viewQuery,a);const h=i.components;null!==h&&function oD(i,s){for(let a=0;a<s.length;a++)iy(i,s[a])}(s,h)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Eo()}}function Su(i,s,a,u){const l=s[2];if(256==(256&l))return;sa(s);const h=eo();try{ji(s),function ta(i){return ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Rp(i,s,a,2,u);const y=3==(3&l);if(!h)if(y){const C=i.preOrderCheckHooks;null!==C&&hc(s,C,null)}else{const C=i.preOrderHooks;null!==C&&fc(s,C,0,null),Ja(s,0)}if(function S0(i){for(let s=mp(i);null!==s;s=Am(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const l=a[u],h=l[3];0==(1024&l[2])&&ts(h,1),l[2]|=1024}}}(s),function ry(i){for(let s=mp(i);null!==s;s=Am(s))for(let a=10;a<s.length;a++){const u=s[a],l=u[1];Fs(u)&&Su(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&Wm(i,s),!h)if(y){const C=i.contentCheckHooks;null!==C&&hc(s,C)}else{const C=i.contentHooks;null!==C&&fc(s,C,1),Ja(s,1)}!function zm(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const l=a[u];if(l<0)rs(~l);else{const h=l,y=a[++u],_=a[++u];uc(y,h),_(2,s[h])}}}finally{rs(-1)}}(i,s);const _=i.components;null!==_&&function v0(i,s){for(let a=0;a<s.length;a++)x0(i,s[a])}(s,_);const I=i.viewQuery;if(null!==I&&$p(2,I,u),!h)if(y){const C=i.viewCheckHooks;null!==C&&hc(s,C)}else{const C=i.viewHooks;null!==C&&fc(s,C,2),Ja(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,ts(s[3],-1))}finally{Eo()}}function Km(i,s,a,u){const l=s[10],h=!eo(),y=Js(s);try{h&&!y&&l.begin&&l.begin(),y&&kh(i,s,u),Su(i,s,a,u)}finally{h&&!y&&l.end&&l.end()}}function Rp(i,s,a,u,l){const h=gr(),y=2&u;try{rs(-1),y&&s.length>20&&o0(i,s,20,eo()),a(u,l)}finally{rs(h)}}function br(i,s,a){!Xo()||(function cD(i,s,a,u){const l=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||mn(a,s),pi(u,s);const y=a.initialInputs;for(let _=l;_<h;_++){const I=i.data[_],C=Vi(I);C&&Lh(s,a,I);const S=Ao(s,i,_,a);pi(S,s),null!==y&&A0(0,_-l,S,I,0,y),C&&(pr(a.index,s)[8]=S)}}(i,s,a,Qn(a,s)),128==(128&a.flags)&&function lD(i,s,a){const u=a.directiveStart,l=a.directiveEnd,y=a.index,_=function Qa(){return ft.lFrame.currentDirectiveIndex}();try{rs(y);for(let I=u;I<l;I++){const C=i.data[I],S=s[I];na(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Lc(C,S)}}finally{rs(-1),na(_)}}(i,s,a))}function td(i,s,a=Qn){const u=s.localNames;if(null!==u){let l=s.index+1;for(let h=0;h<u.length;h+=2){const y=u[h+1],_=-1===y?a(s,i):i[y];i[l++]=_}}}function Np(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Op(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Op(i,s,a,u,l,h,y,_,I,C){const S=20+u,k=S+l,B=function aD(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:Dt);return a}(S,k),Q="function"==typeof C?C():C;return B[1]={type:i,blueprint:B,template:a,queries:null,viewQuery:_,declTNode:s,data:B.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function Pp(i,s,a,u){const l=R0(s);null===a?l.push(u):(l.push(a),i.firstCreatePass&&id(i).push(u,l.length-1))}function w0(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,l):a[u]=[s,l]}return a}function ps(i,s,a,u,l,h,y,_){const I=Qn(s,a);let S,C=s.inputs;!_&&null!=C&&(S=C[u])?(sd(i,a,S,u,l),Il(s)&&function kp(i,s){const a=pr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function E0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=y?y(l,s.value||"",u):l,un(h)?h.setProperty(I,u,l):Zr(u)||(I.setProperty?I.setProperty(u,l):I[u]=l))}function Lp(i,s,a,u){let l=!1;if(Xo()){const h=function dD(i,s,a){const u=i.directiveRegistry;let l=null;if(u)for(let h=0;h<u.length;h++){const y=u[h];r0(a,y.selectors,!1)&&(l||(l=[]),Rr(mn(a,s),i,y.type),Vi(y)?(T0(i,a),l.unshift(y)):l.push(y))}return l}(i,s,a),y=null===u?null:{"":-1};if(null!==h){l=!0,Fh(a,i.data.length,h.length);for(let S=0;S<h.length;S++){const k=h[S];k.providersResolver&&k.providersResolver(k)}let _=!1,I=!1,C=Fc(i,s,h.length,null);for(let S=0;S<h.length;S++){const k=h[S];a.mergedAttrs=Jn(a.mergedAttrs,k.hostAttrs),ey(i,a,s,C,k),C0(C,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const B=k.type.prototype;!_&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),_=!0),!I&&(B.ngOnChanges||B.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function Qm(i,s){const u=s.directiveEnd,l=i.data,h=s.attrs,y=[];let _=null,I=null;for(let C=s.directiveStart;C<u;C++){const S=l[C],k=S.inputs,B=null===h||n0(s)?null:Uh(k,h);y.push(B),_=w0(k,C,_),I=w0(S.outputs,C,I)}null!==_&&(_.hasOwnProperty("class")&&(s.flags|=16),_.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=_,s.outputs=I}(i,a)}y&&function Uc(i,s,a){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const h=a[s[l+1]];if(null==h)throw new Pe(-301,!1);u.push(s[l],h)}}}(a,u,y)}return a.mergedAttrs=Jn(a.mergedAttrs,a.attrs),l}function Xm(i,s,a,u,l,h){const y=h.hostBindings;if(y){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const I=~s.index;(function Up(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(_)!=I&&_.push(I),_.push(u,l,y)}}function Lc(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function T0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function C0(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;Vi(s)&&(a[""]=i)}}function Fh(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function ey(i,s,a,u,l){i.data[u]=l;const h=l.factory||(l.factory=Ii(l.type)),y=new Xa(h,Vi(l),null);i.blueprint[u]=y,a[u]=y,Xm(i,s,0,u,Fc(i,a,l.hostVars,Dt),l)}function Lh(i,s,a){const u=Qn(s,i),l=Np(a),h=i[10],y=nd(i,ed(i,l,null,a.onPush?64:16,u,s,h,h.createRenderer(u,a),null,null));i[s.index]=y}function ho(i,s,a,u,l,h){const y=Qn(i,s);!function ii(i,s,a,u,l,h,y){if(null==h)un(i)?i.removeAttribute(s,l,a):s.removeAttribute(l);else{const _=null==y?K(h):y(h,u||"",l);un(i)?i.setAttribute(s,l,_,a):a?s.setAttributeNS(a,l,_):s.setAttribute(l,_)}}(s[11],y,h,i.value,a,u,l)}function A0(i,s,a,u,l,h){const y=h[s];if(null!==y){const _=u.setInput;for(let I=0;I<y.length;){const C=y[I++],S=y[I++],k=y[I++];null!==_?u.setInput(a,k,C,S):a[S]=k}}}function Uh(i,s){let a=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return a}function ny(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function x0(i,s){const a=pr(s,i);if(Fs(a)){const u=a[1];80&a[2]?Su(u,a,u.template,a[8]):a[5]>0&&Vc(a)}}function Vc(i){for(let u=mp(i);null!==u;u=Am(u))for(let l=10;l<u.length;l++){const h=u[l];if(1024&h[2]){const y=h[1];Su(y,h,y.template,h[8])}else h[5]>0&&Vc(h)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const l=pr(a[u],i);Fs(l)&&l[5]>0&&Vc(l)}}function iy(i,s){const a=pr(s,i),u=a[1];(function sy(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),kh(u,a,a[8])}function nd(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function rd(i){for(;i;){i[2]|=64;const s=bh(i);if(Qu(i)&&!s)return i;i=s}return null}function oy(i,s,a){const u=s[10];u.begin&&u.begin();try{Su(i,s,i.template,a)}catch(l){throw Bh(s,l),l}finally{u.end&&u.end()}}function Bp(i){!function Vp(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=_m(a),l=u[1];Km(l,u,l.template,a)}}(i[8])}function $p(i,s,a){lc(0),s(i,a)}const M0=(()=>Promise.resolve(null))();function R0(i){return i[7]||(i[7]=[])}function id(i){return i.cleanup||(i.cleanup=[])}function Bh(i,s){const a=i[9],u=a?a.get(Dh,null):null;u&&u.handleError(s)}function sd(i,s,a,u,l){for(let h=0;h<a.length;){const y=a[h++],_=a[h++],I=s[y],C=i.data[y];null!==C.setInput?C.setInput(I,l,u,_):I[_]=l}}function Ai(i,s,a){const u=function ks(i,s){return rn(s[i])}(s,i);!function H_(i,s,a){un(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function od(i,s,a){let u=a?i.styles:null,l=a?i.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const _=s[y];"number"==typeof _?h=_:1==h?l=ge(l,_):2==h&&(u=ge(u,_+": "+s[++y]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=l:i.classesWithoutHost=l}const $h=new En("INJECTOR",-1);class xu{get(s,a=ds){if(a===ds){const u=new Error(`NullInjectorError: No provider for ${oe(s)}!`);throw u.name="NullInjectorError",u}return a}}const Hp=new En("Set Injector scope."),Hh={},Bc={};let fo;function Gh(){return void 0===fo&&(fo=new xu),fo}function qh(i,s=null,a=null,u){const l=zh(i,s,a,u);return l._resolveInjectorDefTypes(),l}function zh(i,s=null,a=null,u){return new N0(i,a,s||Gh(),u)}class N0{constructor(s,a,u,l=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&Ci(a,_=>this.processProvider(_,s,a)),Ci([s],_=>this.processInjectorType(_,[],h)),this.records.set($h,ko(void 0,this));const y=this.records.get(Hp);this.scope=null!=y?y.value:null,this.source=l||("object"==typeof s?null:oe(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ds,u=dt.Default){this.assertNotDestroyed();const l=Z(this),h=jt(void 0);try{if(!(u&dt.SkipSelf)){let _=this.records.get(s);if(void 0===_){const I=function Wh(i){return"function"==typeof i||"object"==typeof i&&i instanceof En}(s)&&fn(s);_=I&&this.injectableDefInScope(I)?ko(vn(s),Hh):null,this.records.set(s,_)}if(null!=_)return this.hydrate(s,_)}return(u&dt.Self?Gh():this.parent).get(s,a=u&dt.Optional&&a===ds?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[ya]=y[ya]||[]).unshift(oe(s)),l)throw y;return function In(i,s,a,u){const l=i[ya];throw s[x]&&l.unshift(s[x]),i.message=function zi(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=oe(s);if(Array.isArray(s))l=s.map(oe).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let _=s[y];h.push(y+":"+("string"==typeof _?JSON.stringify(_):oe(_)))}l=`{${h.join(", ")}}`}return`${a}${u?"("+u+")":""}[${l}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,l,a,u),i.ngTokenPath=l,i[ya]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{jt(h),Z(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,l)=>s.push(oe(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(s,a,u){if(!(s=X(s)))return!1;let l=Oi(s);const h=null==l&&s.ngModule||void 0,y=void 0===h?s:h,_=-1!==u.indexOf(y);if(void 0!==h&&(l=Oi(h)),null==l)return!1;if(null!=l.imports&&!_){let S;u.push(y);try{Ci(l.imports,k=>{this.processInjectorType(k,a,u)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:B,providers:Q}=S[k];Ci(Q,we=>this.processProvider(we,B,Q||U))}}this.injectorDefTypes.add(y);const I=Ii(y)||(()=>new y);this.records.set(y,ko(I,Hh));const C=l.providers;if(null!=C&&!_){const S=s;Ci(C,k=>this.processProvider(k,S,C))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,u){let l=ud(s=X(s))?s:X(s&&s.provide);const h=function pD(i,s,a){return ad(i)?ko(void 0,i.useValue):ko(function O0(i,s,a){let u;if(ud(i)){const l=X(i);return Ii(l)||vn(l)}if(ad(i))u=()=>X(i.useValue);else if(function P0(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Wt(i.deps||[]));else if(function gD(i){return!(!i||!i.useExisting)}(i))u=()=>Be(X(i.useExisting));else{const l=X(i&&(i.useClass||i.provide));if(!function yD(i){return!!i.deps}(i))return Ii(l)||vn(l);u=()=>new l(...Wt(i.deps))}return u}(i),Hh)}(s);if(ud(s)||!0!==s.multi)this.records.get(l);else{let y=this.records.get(l);y||(y=ko(void 0,Hh,!0),y.factory=()=>Wt(y.multi),this.records.set(l,y)),l=s,y.multi.push(s)}this.records.set(l,h)}hydrate(s,a){return a.value===Hh&&(a.value=Bc,a.value=a.factory()),"object"==typeof a.value&&a.value&&function vD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=X(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function vn(i){const s=fn(i),a=null!==s?s.factory:Ii(i);if(null!==a)return a;if(i instanceof En)throw new Pe(204,!1);if(i instanceof Function)return function Gp(i){const s=i.length;if(s>0)throw function Jr(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new Pe(204,!1);const a=function Ln(i){const s=i&&(i[ci]||i[Un]);if(s){const a=function fr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Pe(204,!1)}function ko(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function ad(i){return null!==i&&"object"==typeof i&&F in i}function ud(i){return"function"==typeof i}let Tr=(()=>{class i{static create(a,u){var l;if(Array.isArray(a))return qh({name:""},u,a,"");{const h=null!==(l=a.name)&&void 0!==l?l:"";return qh({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=ds,i.NULL=new xu,i.\u0275prov=Yt({token:i,providedIn:"any",factory:()=>Be($h)}),i.__NG_ELEMENT_ID__=-1,i})();function H0(i,s){aa(_m(i)[1],gn())}let Yp=null;function Mu(){if(!Yp){const i=Ft.Symbol;if(i&&i.iterator)Yp=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Yp=u)}}}return Yp}function dd(i){return!!Jp(i)&&(Array.isArray(i)||!(i instanceof Map)&&Mu()in i)}function Jp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function gi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Xp(i,s,a,u){const l=Ce();return gi(l,Ls(),s)&&(Ot(),ho(_n(),l,i,s,a,u)),Xp}function ku(i,s,a,u){return gi(i,Ls(),a)?s+K(a)+u:Dt}function J0(i,s,a,u,l,h,y,_){const I=Ce(),C=Ot(),S=i+20,k=C.firstCreatePass?function wy(i,s,a,u,l,h,y,_,I){const C=s.consts,S=kc(s,i,4,y||null,bi(C,_));Lp(s,a,S,bi(C,I)),aa(s,S);const k=S.tViews=Op(2,S,u,l,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,C,I,s,a,u,l,h,y):C.data[S];di(k,!1);const B=I[11].createComment("");Xl(C,I,B,k),pi(B,I),nd(I,I[S]=ny(B,I,B,k)),Ui(k)&&br(C,I,k),null!=y&&td(I,k,_)}function Ey(i){return function Bi(i,s){return i[s]}(function Nl(){return ft.lFrame.contextLView}(),20+i)}function Jh(i,s=dt.Default){const a=Ce();return null===a?Be(i,s):iu(gn(),a,X(i),s)}function Ar(){throw new Error("invalid")}function Lu(i,s,a){const u=Ce();return gi(u,Ls(),s)&&ps(Ot(),_n(),u,i,s,u[11],a,!1),Lu}function Ty(i,s,a,u,l){const y=l?"class":"style";sd(i,a,s.inputs[y],y,u)}function ig(i,s,a,u){const l=Ce(),h=Ot(),y=20+i,_=l[11],I=l[y]=ti(_,s,function oa(){return ft.lFrame.currentNamespace}()),C=h.firstCreatePass?function Sr(i,s,a,u,l,h,y){const _=s.consts,C=kc(s,i,2,l,bi(_,h));return Lp(s,a,C,bi(_,y)),null!==C.attrs&&od(C,C.attrs,!1),null!==C.mergedAttrs&&od(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(y,h,l,0,s,a,u):h.data[y];di(C,!0);const S=C.mergedAttrs;null!==S&&Je(_,I,S);const k=C.classes;null!==k&&Po(_,I,k);const B=C.styles;return null!==B&&Tu(_,I,B),64!=(64&C.flags)&&Xl(h,l,I,C),0===function Rl(){return ft.lFrame.elementDepthCount}()&&pi(I,l),function Ka(){ft.lFrame.elementDepthCount++}(),Ui(C)&&(br(h,l,C),function Dr(i,s,a){if($a(s)){const l=s.directiveEnd;for(let h=s.directiveStart;h<l;h++){const y=i.data[h];y.contentQueries&&y.contentQueries(1,a[h],h)}}}(h,C,l)),null!==u&&td(l,C),ig}function po(){let i=gn();oc()?function ea(){ft.lFrame.isParent=!1}():(i=i.parent,di(i,!1));const s=i;!function nc(){ft.lFrame.elementDepthCount--}();const a=Ot();return a.firstCreatePass&&(aa(a,i),$a(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ih(i){return 0!=(16&i.flags)}(s)&&Ty(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function cm(i){return 0!=(32&i.flags)}(s)&&Ty(a,s,Ce(),s.stylesWithoutHost,!1),po}function On(i,s,a,u){return ig(i,s,a,u),po(),On}function Uu(){return Ce()}function Ta(i){return!!i&&"function"==typeof i.then}function pd(i){return!!i&&"function"==typeof i.subscribe}const Ay=pd;function Qe(i,s,a,u){const l=Ce(),h=Ot(),y=gn();return function Gs(i,s,a,u,l,h,y,_){const I=Ui(u),S=i.firstCreatePass&&id(i),k=s[8],B=R0(s);let Q=!0;if(3&u.type||_){const He=Qn(u,s),Xe=_?_(He):He,be=B.length,mt=_?Tt=>_(rn(Tt[u.index])):u.index;if(un(a)){let Tt=null;if(!_&&I&&(Tt=function Xc(i,s,a,u){const l=i.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const y=l[h];if(y===a&&l[h+1]===u){const _=s[7],I=l[h+2];return _.length>I?_[I]:null}"string"==typeof y&&(h+=2)}return null}(i,s,l,u.index)),null!==Tt)(Tt.__ngLastListenerFn__||Tt).__ngNextListenerFn__=h,Tt.__ngLastListenerFn__=h,Q=!1;else{h=Vu(u,s,k,h,!1);const Gt=a.listen(Xe,l,h);B.push(h,Gt),S&&S.push(l,mt,be,be+1)}}else h=Vu(u,s,k,h,!0),Xe.addEventListener(l,h,y),B.push(h),S&&S.push(l,mt,be,y)}else h=Vu(u,s,k,h,!1);const we=u.outputs;let Le;if(Q&&null!==we&&(Le=we[l])){const He=Le.length;if(He)for(let Xe=0;Xe<He;Xe+=2){const vi=s[Le[Xe]][Le[Xe+1]].subscribe(h),_l=B.length;B.push(h,vi),S&&S.push(l,u.index,_l,-(_l+1))}}}(h,l,l[11],y,i,s,!!a,u),Qe}function gd(i,s,a,u){try{return!1!==a(u)}catch(l){return Bh(i,l),!1}}function Vu(i,s,a,u,l){return function h(y){if(y===Function)return u;const _=2&i.flags?pr(i.index,s):s;0==(32&s[2])&&rd(_);let I=gd(s,0,u,y),C=h.__ngNextListenerFn__;for(;C;)I=gd(s,0,C,y)&&I,C=C.__ngNextListenerFn__;return l&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Xh(i,s,a){return yd(i,"",s,"",a),Xh}function yd(i,s,a,u,l){const h=Ce(),y=ku(h,s,a,u);return y!==Dt&&ps(Ot(),_n(),h,i,y,h[11],l,!1),yd}function Ew(i,s=""){const a=Ce(),u=Ot(),l=i+20,h=u.firstCreatePass?kc(u,l,1,s,null):u.data[l],y=a[l]=function yp(i,s){return un(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Xl(u,a,y,h),di(h,!1)}function Ly(i){return pg("",i,""),Ly}function pg(i,s,a){const u=Ce(),l=ku(u,i,s,a);return l!==Dt&&Ai(u,gr(),l),pg}const al=void 0;var LD=["en",[["a","p"],["AM","PM"],al],[["AM","PM"],al,al],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],al,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],al,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",al,"{1} 'at' {0}",al],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zs(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let $u={};function Wy(i){const s=function vg(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=lf(s);if(a)return a;const u=s.split("-")[0];if(a=lf(u),a)return a;if("en"===u)return LD;throw new Error(`Missing locale data for the locale "${i}".`)}function Sw(i){return Wy(i)[pt.PluralCase]}function lf(i){return i in $u||($u[i]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[i]),$u[i]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const df="en-US";let Rw=df;class ov{}class ZD{resolveComponentFactory(s){throw function av(i){const s=Error(`No component factory found for ${oe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Sd=(()=>{class i{}return i.NULL=new ZD,i})();function YD(){return xd(gn(),Ce())}function xd(i,s){return new wf(Qn(i,s))}let wf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=YD,i})();function Jw(i){return i instanceof wf?i.nativeElement:i}class bg{}let eE=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function cv(){const i=Ce(),a=pr(gn().index,i);return function QD(i){return i[11]}(Wr(a)?a:i)}(),i})(),JD=(()=>{class i{}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>null}),i})();class lv{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ef=new lv("13.2.4"),Md={};function pl(i,s,a,u,l=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&u.push(rn(h)),Li(h))for(let _=10;_<h.length;_++){const I=h[_],C=I[1].firstChild;null!==C&&pl(I[1],I,C,u)}const y=a.type;if(8&y)pl(i,s,a.child,u);else if(32&y){const _=Tm(a,s);let I;for(;I=_();)u.push(I)}else if(16&y){const _=X_(s,a);if(Array.isArray(_))u.push(..._);else{const I=bh(s[16]);pl(I[1],I,_,u,!0)}}a=l?a.projectionNext:a.next}return u}class Rd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return pl(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Li(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(_p(s,u),uu(a,u))}this._attachedToViewContainer=!1}q_(this._lView[1],this._lView)}onDestroy(s){Pp(this._lView[1],this._lView,null,s)}markForCheck(){rd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){oy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function jp(i,s,a){Za(!0);try{oy(i,s,a)}finally{Za(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Oc(i,s){Th(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=s}}class Ji extends Rd{constructor(s){super(s),this._view=s}detectChanges(){Bp(this._view)}checkNoChanges(){!function ay(i){Za(!0);try{Bp(i)}finally{Za(!1)}}(this._view)}get context(){return null}}class dv extends Sd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=st(s);return new qu(a,this.ngModule)}}function If(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const tE=new En("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>F_});class qu extends ov{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Sh(i){return i.map(km).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return If(this.componentDef.inputs)}get outputs(){return If(this.componentDef.outputs)}create(s,a,u,l){const h=(l=l||this.ngModule)?function Gu(i,s){return{get:(a,u,l)=>{const h=i.get(a,Md,l);return h!==Md||u===Md?h:s.get(a,u,l)}}}(s,l.injector):s,y=h.get(bg,vo),_=h.get(JD,null),I=y.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=u?function _0(i,s,a){if(un(i))return i.selectRootElement(s,a===Ct.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(I,u,this.componentDef.encapsulation):ti(y.createRenderer(null,this.componentDef),C,function hv(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(C)),k=this.componentDef.onPush?576:528,B=function lr(i,s){return{components:[],scheduler:i||F_,clean:M0,playerHandler:s||null,flags:0}}(),Q=Op(0,null,null,1,0,null,null,null,null,null),we=ed(null,Q,B,k,null,null,y,I,_,h);let Le,He;sa(we);try{const Xe=function ld(i,s,a,u,l,h){const y=a[1];a[20]=i;const I=kc(y,20,2,"#host",null),C=I.mergedAttrs=s.hostAttrs;null!==C&&(od(I,C,!0),null!==i&&(Je(l,i,C),null!==I.classes&&Po(l,i,I.classes),null!==I.styles&&Tu(l,i,I.styles)));const S=u.createRenderer(i,s),k=ed(a,Np(s),null,s.onPush?64:16,a[20],I,u,S,h||null,null);return y.firstCreatePass&&(Rr(mn(I,a),y,s.type),T0(y,I),Fh(I,a.length,1)),nd(a,k),a[20]=k}(S,this.componentDef,we,y,I);if(S)if(u)Je(I,S,["ng-version",Ef.full]);else{const{attrs:be,classes:mt}=function eD(i){const s=[],a=[];let u=1,l=2;for(;u<i.length;){let h=i[u];if("string"==typeof h)2===l?""!==h&&s.push(h,i[++u]):8===l&&a.push(h);else{if(!co(l))break;l=h}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);be&&Je(I,S,be),mt&&mt.length>0&&Po(I,S,mt.join(" "))}if(He=Sn(Q,20),void 0!==a){const be=He.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Tt=a[mt];be.push(null!=Tt?Array.from(Tt):null)}}Le=function $0(i,s,a,u,l){const h=a[1],y=function b0(i,s,a){const u=gn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),ey(i,u,s,Fc(i,s,1,null),a));const l=Ao(s,i,u.directiveStart,u);pi(l,s);const h=Qn(u,s);return h&&pi(h,s),l}(h,a,s);if(u.components.push(y),i[8]=y,l&&l.forEach(I=>I(y,s)),s.contentQueries){const I=gn();s.contentQueries(1,y,I.directiveStart)}const _=gn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(rs(_.index),Xm(a[1],_,0,_.directiveStart,_.directiveEnd,s),Lc(s,y)),y}(Xe,this.componentDef,we,B,[H0]),kh(Q,we,null)}finally{Eo()}return new XD(this.componentType,Le,xd(He,we),we,He)}}class XD extends class Qw{}{constructor(s,a,u,l,h){super(),this.location=u,this._rootLView=l,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new Ji(l),this.componentType=s}get injector(){return new Rn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class gl{}class Ra{}const Zs=new Map;class Df extends gl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new dv(this);const u=Mt(s);this._bootstrapComponents=ao(u.bootstrap),this._r3Injector=zh(s,a,[{provide:gl,useValue:this},{provide:Sd,useValue:this.componentFactoryResolver}],oe(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Tr.THROW_IF_NOT_FOUND,u=dt.Default){return s===Tr||s===gl||s===$h?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class zu extends Ra{constructor(s){super(),this.moduleType=s,null!==Mt(s)&&function eb(i){const s=new Set;!function a(u){const l=Mt(u,!0),h=l.id;null!==h&&(function fv(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${oe(s)} vs ${oe(s.name)}`)}(h,Zs.get(h),u),Zs.set(h,u));const y=ao(l.imports);for(const _ of y)s.has(_)||(s.add(_),a(_))}(i)}(s)}create(s){return new Df(this.moduleType,s)}}function yv(i){return s=>{setTimeout(i,void 0,s)}}const Mi=class pE extends m.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var l,h,y;let _=s,I=a||(()=>null),C=u;if(s&&"object"==typeof s){const k=s;_=null===(l=k.next)||void 0===l?void 0:l.bind(k),I=null===(h=k.error)||void 0===h?void 0:h.bind(k),C=null===(y=k.complete)||void 0===y?void 0:y.bind(k)}this.__isAsync&&(I=yv(I),_&&(_=yv(_)),C&&(C=yv(C)));const S=super.subscribe({next:_,error:I,complete:C});return s instanceof L.w0&&s.add(S),S}};function Pd(){return this._results[Mu()]()}class Cf{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Mu(),u=Cf.prototype;u[a]||(u[a]=Pd)}get changes(){return this._changes||(this._changes=new Mi)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const l=Nr(s);(this._changesDetected=!function au(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let l=i[u],h=s[u];if(a&&(l=a(l),h=a(h)),h!==l)return!1}return!0}(u._results,l,a))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ku=(()=>{class i{}return i.__NG_ELEMENT_ID__=ob,i})();const gE=Ku,mE=class extends gE{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=ed(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(u[19]=h.createEmbeddedView(a)),kh(a,u,s),new Rd(u)}};function ob(){return kd(gn(),Ce())}function kd(i,s){return 4&i.type?new mE(s,i,xd(i,s)):null}let Sg=(()=>{class i{}return i.__NG_ELEMENT_ID__=vv,i})();function vv(){return Mg(gn(),Ce())}const ab=Sg,xg=class extends ab{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return xd(this._hostTNode,this._hostLView)}get injector(){return new Rn(this._hostTNode,this._hostLView)}get parentInjector(){const s=To(this._hostTNode,this._hostLView);if(Mn(s)){const a=Do(s,this._hostLView),u=Io(s);return new Rn(a[1].data[u+8],a)}return new Rn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=yE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const l=s.createEmbeddedView(a||{});return this.insert(l,u),l}createComponent(s,a,u,l,h){const y=s&&!function fa(i){return"function"==typeof i}(s);let _;if(y)_=a;else{const k=a||{};_=k.index,u=k.injector,l=k.projectableNodes,h=k.ngModuleRef}const I=y?s:new qu(st(s)),C=u||this.parentInjector;if(!h&&null==I.ngModule){const B=(y?C:this.parentInjector).get(gl,null);B&&(h=B)}const S=I.create(C,l,void 0,h);return this.insert(S.hostView,_),S}insert(s,a){const u=s._lView,l=u[1];if(function Jo(i){return Li(i[3])}(u)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=u[3],B=new xg(k,k[6],k[3]);B.detach(B.indexOf(s))}}const h=this._adjustIndex(a),y=this._lContainer;!function Jl(i,s,a,u){const l=10+u,h=a.length;u>0&&(a[l-1][4]=s),u<h-10?(s[4]=a[l],pa(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function ZI(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const _=s[19];null!==_&&_.insertView(i),s[2]|=128}(l,u,y,h);const _=Dp(h,y),I=u[11],C=Ep(I,y[7]);return null!==C&&function vp(i,s,a,u,l,h){u[0]=l,u[6]=s,Th(i,u,a,1,l,h)}(l,y[6],I,u,C,_),s.attachToViewContainerRef(),pa(_v(y),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=yE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=_p(this._lContainer,a);u&&(uu(_v(this._lContainer),a),q_(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=_p(this._lContainer,a);return u&&null!=uu(_v(this._lContainer),a)?new Rd(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function yE(i){return i[8]}function _v(i){return i[8]||(i[8]=[])}function Mg(i,s){let a;const u=s[i.index];if(Li(u))a=u;else{let l;if(8&i.type)l=rn(u);else{const h=s[11];l=h.createComment("");const y=Qn(i,s);bu(h,Ep(h,y),l,function QI(i,s){return un(i)?i.nextSibling(s):s.nextSibling}(h,y),!1)}s[i.index]=a=ny(u,s,l,i),nd(s,a)}return new xg(a,i,s)}class wv{constructor(s){this.queryList=s,this.matches=null}clone(){return new wv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ev{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let h=0;h<u;h++){const y=a.getByIndex(h);l.push(this.queries[y.indexInDeclarationView].clone())}return new Ev(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==IE(s,a).matches&&this.queries[a].setDirty()}}class vE{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class Iv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const l=null!==a?a.length:0,h=this.getByIndex(u).embeddedTView(s,l);h&&(h.indexInDeclarationView=u,null!==a?a.push(h):a=[h])}return null!==a?new Iv(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Af{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Af(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const h=u[l];this.matchTNodeWithReadOption(s,a,_E(a,h)),this.matchTNodeWithReadOption(s,a,as(a,s,h,!1,!1))}else u===Ku?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,as(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===wf||l===Sg||l===Ku&&4&a.type)this.addMatch(a.index,-2);else{const h=as(a,s,l,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function _E(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function Dv(i,s,a,u){return-1===a?function wE(i,s){return 11&i.type?xd(i,s):4&i.type?kd(i,s):null}(s,i):-2===a?function Rg(i,s,a){return a===wf?xd(s,i):a===Ku?kd(s,i):a===Sg?Mg(s,i):void 0}(i,s,u):Ao(i,i[1],a,s)}function Fd(i,s,a,u){const l=s[19].queries[u];if(null===l.matches){const h=i.data,y=a.matches,_=[];for(let I=0;I<y.length;I+=2){const C=y[I];_.push(C<0?null:Dv(s,h[C],y[I+1],a.metadata.read))}l.matches=_}return l.matches}function Ld(i,s,a,u){const l=i.queries.getByIndex(a),h=l.matches;if(null!==h){const y=Fd(i,s,l,a);for(let _=0;_<h.length;_+=2){const I=h[_];if(I>0)u.push(y[_/2]);else{const C=h[_+1],S=s[-I];for(let k=10;k<S.length;k++){const B=S[k];B[17]===B[3]&&Ld(B[1],B,C,u)}if(null!==S[9]){const k=S[9];for(let B=0;B<k.length;B++){const Q=k[B];Ld(Q[1],Q,C,u)}}}}}return u}function Ng(i){const s=Ce(),a=Ot(),u=cc();lc(u+1);const l=IE(a,u);if(i.dirty&&Js(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const h=l.crossesNgTemplate?Ld(a,s,u,[]):Fd(a,s,l,u);i.reset(h,Jw),i.notifyOnChanges()}return!0}return!1}function Og(i,s,a,u){const l=Ot();if(l.firstCreatePass){const h=gn();(function EE(i,s,a){null===i.queries&&(i.queries=new Iv),i.queries.track(new Af(s,a))})(l,new vE(s,a,u),h.index),function lb(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function Cv(i,s,a){const u=new Cf(4==(4&a));Pp(i,s,u,u.destroy),null===s[19]&&(s[19]=new Ev),s[19].queries.push(new wv(u))}(l,Ce(),a)}function Tv(){return function cb(i,s){return i[19].queries[s].queryList}(Ce(),cc())}function IE(i,s){return i.queries.getByIndex(s)}function Oa(...i){}const Lv=new En("Application Initializer");let Yu=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Oa,this.reject=Oa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Ta(h))a.push(h);else if(Ay(h)){const y=new Promise((_,I)=>{h.subscribe({complete:_,error:I})});a.push(y)}}Promise.all(a).then(()=>{u()}).catch(l=>{this.reject(l)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Be(Lv,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const $g=new En("AppId"),Vv={provide:$g,useFactory:function Uv(){return`${Bv()}${Bv()}${Bv()}`},deps:[]};function Bv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const LE=new En("Platform Initializer"),Hg=new En("Platform ID"),Gg=new En("appBootstrapListener");let jv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const qg=new En("LocaleId"),$v=new En("DefaultCurrencyCode");class wb{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Hv=(()=>{class i{compileModuleSync(a){return new zu(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),h=ao(Mt(a).declarations).reduce((y,_)=>{const I=st(_);return I&&y.push(new qu(I)),y},[]);return new wb(u,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const Gv=(()=>Promise.resolve(0))();function kf(i){"undefined"==typeof Zone?Gv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ds{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mi(!1),this.onMicrotaskEmpty=new Mi(!1),this.onStable=new Mi(!1),this.onError=new Mi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&a,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function qv(){let i=Ft.requestAnimationFrame,s=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function UE(i){const s=()=>{!function Kv(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ft,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ff(i),i.isCheckStableRunning=!0,Wv(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ff(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,l,h,y,_)=>{try{return Zv(i),a.invokeTask(l,h,y,_)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),VE(i)}},onInvoke:(a,u,l,h,y,_,I)=>{try{return Zv(i),a.invoke(l,h,y,_,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),VE(i)}},onHasTask:(a,u,l,h)=>{a.hasTask(l,h),u===l&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Ff(i),Wv(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,u,l,h)=>(a.handleError(l,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ds.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ds.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,l){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+l,s,zv,Oa,Oa);try{return h.runTask(y,a,u)}finally{h.cancelTask(y)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const zv={};function Wv(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ff(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Zv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function VE(i){i._nesting--,Wv(i)}class Yv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mi,this.onMicrotaskEmpty=new Mi,this.onStable=new Mi,this.onError=new Mi}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,l){return s.apply(a,u)}}let BE=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ds.assertNotInAngularZone(),kf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())kf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,l){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:l})}whenStable(a,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(Be(Ds))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})(),zg=(()=>{class i{constructor(){this._applications=new Map,Jv.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return Jv.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();class Ib{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function Qv(i){Jv=i}let bs,Jv=new Ib;const e_=new En("AllowMultipleToken");class t_{constructor(s,a){this.name=s,this.token=a}}function Wg(i,s,a=[]){const u=`Platform: ${s}`,l=new En(u);return(h=[])=>{let y=HE();if(!y||y.injector.get(e_,!1))if(i)i(a.concat(h).concat({provide:l,useValue:!0}));else{const _=a.concat(h).concat({provide:l,useValue:!0},{provide:Hp,useValue:"platform"});!function Db(i){if(bs&&!bs.destroyed&&!bs.injector.get(e_,!1))throw new Pe(400,"");bs=i.get(Kg);const s=i.get(LE,null);s&&s.forEach(a=>a())}(Tr.create({providers:_,name:u}))}return function Pa(i){const s=HE();if(!s)throw new Pe(401,"");return s}()}}function HE(){return bs&&!bs.destroyed?bs:null}let Kg=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const _=function bb(i,s){let a;return a="noop"===i?new Yv:("zone.js"===i?void 0:i)||new Ds({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:Ds,useValue:_}];return _.run(()=>{const C=Tr.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(C),k=S.injector.get(Dh,null);if(!k)throw new Pe(402,"");return _.runOutsideAngular(()=>{const B=_.onError.subscribe({next:Q=>{k.handleError(Q)}});S.onDestroy(()=>{Uf(this._modules,S),B.unsubscribe()})}),function Tb(i,s,a){try{const u=a();return Ta(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(k,_,()=>{const B=S.injector.get(Yu);return B.runInitializers(),B.donePromise.then(()=>(function pf(i){ut(i,"Expected localeId to be defined"),"string"==typeof i&&(Rw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(qg,df)||df),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const l=Zg({},u);return function Xv(i,s,a){const u=new zu(a);return Promise.resolve(u)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(a){const u=a.injector.get(Lf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new Pe(403,"");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Be(Tr))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function Zg(i,s){return Array.isArray(s)?s.reduce(Zg,i):Object.assign(Object.assign({},i),s)}let Lf=(()=>{class i{constructor(a,u,l,h,y){this._zone=a,this._injector=u,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new M.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),I=new M.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Ds.assertNotInAngularZone(),kf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,se.T)(_,I.pipe((0,re.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Pe(405,"");let l;l=a instanceof ov?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(l.componentType);const h=function $d(i){return i.isBoundToModule}(l)?void 0:this._injector.get(gl),_=l.create(Tr.NULL,[],u||l.selector,h),I=_.location.nativeElement,C=_.injector.get(BE,null),S=C&&_.injector.get(zg);return C&&S&&S.registerApplication(I,C),_.onDestroy(()=>{this.detachView(_.hostView),Uf(this.components,_),S&&S.unregisterApplication(I)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;Uf(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Gg,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Be(Ds),Be(Tr),Be(Dh),Be(Sd),Be(Yu))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function Uf(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let qE=!0,Yg=!1;function zE(){return Yg=!0,qE}function r_(){if(Yg)throw new Error("Cannot enable prod mode after platform setup.");qE=!1}let i_=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ab,i})();function Ab(i){return function s_(i,s,a){if(Il(i)&&!a){const u=pr(i.index,s);return new Rd(u,u)}return 47&i.type?new Rd(s[16],s):null}(gn(),Ce(),16==(16&i))}class em{constructor(){}supports(s){return dd(s)}create(s){return new c_(s)}}const tI=(i,s)=>s;class c_{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||tI}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,l=0,h=null;for(;a||u;){const y=!u||a&&a.currentIndex<rI(u,l,h)?a:u,_=rI(y,l,h),I=y.currentIndex;if(y===u)l--,u=u._nextRemoved;else if(a=a._next,null==y.previousIndex)l++;else{h||(h=[]);const C=_-l,S=I-l;if(C!=S){for(let B=0;B<C;B++){const Q=B<h.length?h[B]:h[B]=0,we=Q+B;S<=we&&we<C&&(h[B]=Q+1)}h[y.previousIndex]=S-C}}_!==I&&s(y,_,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!dd(s))throw new Pe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,h,y,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let _=0;_<this.length;_++)h=s[_],y=this._trackByFn(_,h),null!==a&&Object.is(a.trackById,y)?(u&&(a=this._verifyReinsertion(a,h,y,_)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,y,_),u=!0),a=a._next}else l=0,function Qp(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Mu()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,_=>{y=this._trackByFn(l,_),null!==a&&Object.is(a.trackById,y)?(u&&(a=this._verifyReinsertion(a,_,y,l)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,y,l),u=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,l){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,l)):s=this._addAfter(new qd(a,u),h,l),s}_verifyReinsertion(s,a,u,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,h=s._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new nI),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class qd{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class l_{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class nI{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new l_,this.map.set(a,u)),u.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rI(i,s,a){const u=i.previousIndex;if(null===u)return u;let l=0;return a&&u<a.length&&(l=a[u]),u+s+l}class iI{constructor(){}supports(s){return s instanceof Map||Jp(s)}create(){return new sI}}class sI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Jp(s)))throw new Pe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(l,u);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const h=l._prev,y=l._next;return h&&(h._next=y),y&&(y._prev=h),l._next=null,l._prev=null,l}const u=new Nb(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class Nb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function d_(){return new h_([new em])}let h_=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const l=u.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||d_()),deps:[[i,new Pr,new Ir]]}}find(a){const u=this.factories.find(l=>l.supports(a));if(null!=u)return u;throw new Pe(901,"")}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:d_}),i})();function oI(){return new f_([new iI])}let f_=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const l=u.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||oI()),deps:[[i,new Pr,new Ir]]}}find(a){const u=this.factories.find(h=>h.supports(a));if(u)return u;throw new Pe(901,"")}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:oI}),i})();const tm=Wg(null,"core",[{provide:Hg,useValue:"unknown"},{provide:Kg,deps:[Tr]},{provide:zg,deps:[]},{provide:jv,deps:[]}]),cI=[{provide:Lf,useClass:Lf,deps:[Ds,Tr,Dh,Sd,Yu]},{provide:tE,deps:[Ds],useFactory:function Bf(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:Yu,useClass:Yu,deps:[[new Ir,Lv]]},{provide:Hv,useClass:Hv,deps:[]},Vv,{provide:qg,useFactory:function Zt(i){return i||function uI(){return"undefined"!=typeof $localize&&$localize.locale||df}()},deps:[[new Vs(qg),new Ir,new Pr]]},{provide:$v,useValue:"USD"}];let Fb=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Be(Lf))},i.\u0275mod=ie({type:i}),i.\u0275inj=Jt({providers:cI}),i})()},3942:(at,Ae,O)=>{"use strict";O.d(Ae,{Z:()=>Pe});var m=O(2090),L=O(4859),M=O(9681),se=O(1877);class re{constructor(K,ae){this._delegate=K,this.firebase=ae,(0,M._addComponent)(K,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=K.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this._delegate.automaticDataCollectionEnabled=K}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(K=>{this._delegate.checkDestroyed(),K()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,M.deleteApp)(this._delegate)))}_getService(K,ae=M._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const Me=this._delegate.container.getProvider(K);return!Me.isInitialized()&&"EXPLICIT"===(null===(xe=Me.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&Me.initialize(),Me.getImmediate({identifier:ae})}_removeServiceInstance(K,ae=M._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(K).clearInstance(ae)}_addComponent(K){(0,M._addComponent)(this._delegate,K)}_addOrOverwriteComponent(K){(0,M._addOrOverwriteComponent)(this._delegate,K)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ge(){const Ue=function oe(Ue){const K={},ae={__esModule:!0,initializeApp:function le(te,Ze={}){const Y=M.initializeApp(te,Ze);if((0,m.r3)(K,Y.name))return K[Y.name];const he=new Ue(Y,ae);return K[Y.name]=he,he},app:Me,registerVersion:M.registerVersion,setLogLevel:M.setLogLevel,onLog:M.onLog,apps:null,SDK_VERSION:M.SDK_VERSION,INTERNAL:{registerComponent:function ye(te){const Ze=te.name,Y=Ze.replace("-compat","");if(M._registerComponent(te)&&"PUBLIC"===te.type){const he=(de=Me())=>{if("function"!=typeof de[Y])throw ce.create("invalid-app-argument",{appName:Ze});return de[Y]()};void 0!==te.serviceProps&&(0,m.ZB)(he,te.serviceProps),ae[Y]=he,Ue.prototype[Y]=function(...de){return this._getService.bind(this,Ze).apply(this,te.multipleInstances?de:[])}}return"PUBLIC"===te.type?ae[Y]:null},removeApp:function xe(te){delete K[te]},useAsService:function ze(te,Ze){return"serverAuth"===Ze?null:Ze},modularAPIs:M}};function Me(te){if(!(0,m.r3)(K,te=te||M._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:te});return K[te]}return ae.default=ae,Object.defineProperty(ae,"apps",{get:function De(){return Object.keys(K).map(te=>K[te])}}),Me.App=Ue,ae}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function K(ae){(0,m.ZB)(Ue,ae)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Ue}(),V=new se.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=j;!function Se(Ue){(0,M.registerVersion)("@firebase/app-compat","0.1.18",Ue)}()},9681:(at,Ae,O)=>{"use strict";O.r(Ae),O.d(Ae,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Oi,_DEFAULT_ENTRY_NAME:()=>Tn,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>hr,_apps:()=>rt,_clearComponents:()=>fn,_components:()=>Zn,_getProvider:()=>Bt,_registerComponent:()=>Yt,_removeServiceInstance:()=>Jt,deleteApp:()=>Pi,getApp:()=>wi,getApps:()=>Un,initializeApp:()=>ci,onLog:()=>yn,registerVersion:()=>vr,setLogLevel:()=>jt});var m=O(5861),L=O(4859),M=O(1877),se=O(2090);class re{constructor(ot){this.container=ot}getPlatformInfoString(){return this.container.getProviders().map(wt=>{if(function pe(ht){const ot=ht.getComponent();return"VERSION"===(null==ot?void 0:ot.type)}(wt)){const Qt=wt.getImmediate();return`${Qt.library}/${Qt.version}`}return null}).filter(wt=>wt).join(" ")}}const ce="@firebase/app",ge=new M.Yd("@firebase/app"),Tn="[DEFAULT]",ut={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rt=new Map,Zn=new Map;function Xt(ht,ot){try{ht.container.addComponent(ot)}catch(wt){ge.debug(`Component ${ot.name} failed to register with FirebaseApp ${ht.name}`,wt)}}function hr(ht,ot){ht.container.addOrOverwriteComponent(ot)}function Yt(ht){const ot=ht.name;if(Zn.has(ot))return ge.debug(`There were multiple attempts to register component ${ot}.`),!1;Zn.set(ot,ht);for(const wt of rt.values())Xt(wt,ht);return!0}function Bt(ht,ot){return ht.container.getProvider(ot)}function Jt(ht,ot,wt=Tn){Bt(ht,ot).clearInstance(wt)}function fn(){Zn.clear()}const Ln=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class fr{constructor(ot,wt,Qt){this._isDeleted=!1,this._options=Object.assign({},ot),this._config=Object.assign({},wt),this._name=wt.name,this._automaticDataCollectionEnabled=wt.automaticDataCollectionEnabled,this._container=Qt,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this.checkDestroyed(),this._automaticDataCollectionEnabled=ot}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ot){this._isDeleted=ot}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}const Oi="9.6.7";function ci(ht,ot={}){"object"!=typeof ot&&(ot={name:ot});const wt=Object.assign({name:Tn,automaticDataCollectionEnabled:!1},ot),Qt=wt.name;if("string"!=typeof Qt||!Qt)throw Ln.create("bad-app-name",{appName:String(Qt)});const sr=rt.get(Qt);if(sr){if((0,se.vZ)(ht,sr.options)&&(0,se.vZ)(wt,sr.config))return sr;throw Ln.create("duplicate-app",{appName:Qt})}const Ct=new L.H0(Qt);for(const Ye of Zn.values())Ct.addComponent(Ye);const it=new fr(ht,wt,Ct);return rt.set(Qt,it),it}function wi(ht=Tn){const ot=rt.get(ht);if(!ot)throw Ln.create("no-app",{appName:ht});return ot}function Un(){return Array.from(rt.values())}function Pi(ht){return dt.apply(this,arguments)}function dt(){return(dt=(0,m.Z)(function*(ht){const ot=ht.name;rt.has(ot)&&(rt.delete(ot),yield Promise.all(ht.container.getProviders().map(wt=>wt.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function vr(ht,ot,wt){var Qt;let sr=null!==(Qt=ut[ht])&&void 0!==Qt?Qt:ht;wt&&(sr+=`-${wt}`);const Ct=sr.match(/\s|\//),it=ot.match(/\s|\//);if(Ct||it){const Ye=[`Unable to register library "${sr}" with version "${ot}":`];return Ct&&Ye.push(`library name "${sr}" contains illegal characters (whitespace or "/")`),Ct&&it&&Ye.push("and"),it&&Ye.push(`version name "${ot}" contains illegal characters (whitespace or "/")`),void ge.warn(Ye.join(" "))}Yt(new L.wA(`${sr}-version`,()=>({library:sr,version:ot}),"VERSION"))}function yn(ht,ot){if(null!==ht&&"function"!=typeof ht)throw Ln.create("invalid-log-argument");(0,M.Am)(ht,ot)}function jt(ht){(0,M.Ub)(ht)}!function _r(ht){Yt(new L.wA("platform-logger",ot=>new re(ot),"PRIVATE")),vr(ce,"0.7.17",ht),vr(ce,"0.7.17","esm2017"),vr("fire-js","")}("")},4859:(at,Ae,O)=>{"use strict";O.d(Ae,{wA:()=>M,H0:()=>oe});var m=O(5861),L=O(2090);class M{constructor(j,V,X){this.name=j,this.instanceFactory=V,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const se="[DEFAULT]";class re{constructor(j,V){this.name=j,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const V=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(V)){const X=new L.BH;if(this.instancesDeferred.set(V,X),this.isInitialized(V)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:V});Ve&&X.resolve(Ve)}catch(Ve){}}return this.instancesDeferred.get(V).promise}getImmediate(j){var V;const X=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),Ve=null!==(V=null==j?void 0:j.optional)&&void 0!==V&&V;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Se){if(Ve)return null;throw Se}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ce(ge){return"EAGER"===ge.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:se})}catch(V){}for(const[V,X]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(V);try{const Se=this.getOrInitializeService({instanceIdentifier:Ve});X.resolve(Se)}catch(Se){}}}}clearInstance(j=se){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,m.Z)(function*(){const V=Array.from(j.instances.values());yield Promise.all([...V.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...V.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=se){return this.instances.has(j)}getOptions(j=se){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:V={}}=j,X=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:X,options:V});for(const[Se,Pe]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Se)&&Pe.resolve(Ve);return Ve}onInit(j,V){var X;const Ve=this.normalizeInstanceIdentifier(V),Se=null!==(X=this.onInitCallbacks.get(Ve))&&void 0!==X?X:new Set;Se.add(j),this.onInitCallbacks.set(Ve,Se);const Pe=this.instances.get(Ve);return Pe&&j(Pe,Ve),()=>{Se.delete(j)}}invokeOnInitCallbacks(j,V){const X=this.onInitCallbacks.get(V);if(X)for(const Ve of X)try{Ve(j,V)}catch(Se){}}getOrInitializeService({instanceIdentifier:j,options:V={}}){let X=this.instances.get(j);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=j,ge===se?void 0:ge),options:V}),this.instances.set(j,X),this.instancesOptions.set(j,V),this.invokeOnInitCallbacks(X,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,X)}catch(Ve){}var ge;return X||null}normalizeInstanceIdentifier(j=se){return this.component?this.component.multipleInstances?j:se:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const V=this.getProvider(j.name);if(V.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);V.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const V=new re(j,this);return this.providers.set(j,V),V}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Ae,O)=>{"use strict";O.d(Ae,{in:()=>L,Yd:()=>ce,Ub:()=>oe,Am:()=>ge});const m=[];var L=(()=>{return(j=L||(L={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",L;var j})();const M={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},se=L.INFO,re={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},pe=(j,V,...X)=>{if(V<j.logLevel)return;const Ve=(new Date).toISOString(),Se=re[V];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[Se](`[${Ve}]  ${j.name}:`,...X)};class ce{constructor(V){this.name=V,this._logLevel=se,this._logHandler=pe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in L))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?M[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...V),this._logHandler(this,L.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...V),this._logHandler(this,L.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,L.INFO,...V),this._logHandler(this,L.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,L.WARN,...V),this._logHandler(this,L.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...V),this._logHandler(this,L.ERROR,...V)}}function oe(j){m.forEach(V=>{V.setLogLevel(j)})}function ge(j,V){for(const X of m){let Ve=null;V&&V.level&&(Ve=M[V.level]),X.userLogHandler=null===j?null:(Se,Pe,...Ue)=>{const K=Ue.map(ae=>{if(null==ae)return null;if("string"==typeof ae)return ae;if("number"==typeof ae||"boolean"==typeof ae)return ae.toString();if(ae instanceof Error)return ae.message;try{return JSON.stringify(ae)}catch(xe){return null}}).filter(ae=>ae).join(" ");Pe>=(null!=Ve?Ve:Se.logLevel)&&j({level:L[Pe].toLowerCase(),message:K,args:Ue,type:Se.name})}}}},5861:(at,Ae,O)=>{"use strict";function m(M,se,re,pe,ce,oe,ge){try{var j=M[oe](ge),V=j.value}catch(X){return void re(X)}j.done?se(V):Promise.resolve(V).then(pe,ce)}function L(M){return function(){var se=this,re=arguments;return new Promise(function(pe,ce){var oe=M.apply(se,re);function ge(V){m(oe,pe,ce,ge,j,"next",V)}function j(V){m(oe,pe,ce,ge,j,"throw",V)}ge(void 0)})}}O.d(Ae,{Z:()=>L})}},at=>{at(at.s=3483)}]);